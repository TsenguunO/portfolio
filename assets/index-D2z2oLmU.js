var UE=Object.defineProperty;var Ow=f=>{throw TypeError(f)};var VE=(f,e,t)=>e in f?UE(f,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[e]=t;var be=(f,e,t)=>VE(f,typeof e!="symbol"?e+"":e,t),em=(f,e,t)=>e.has(f)||Ow("Cannot "+t);var l=(f,e,t)=>(em(f,e,"read from private field"),t?t.call(f):e.get(f)),E=(f,e,t)=>e.has(f)?Ow("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(f):e.set(f,t),A=(f,e,t,i)=>(em(f,e,"write to private field"),i?i.call(f,t):e.set(f,t),t),x=(f,e,t)=>(em(f,e,"access private method"),t);var un=(f,e,t,i)=>({set _(r){A(f,e,r,t)},get _(){return l(f,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function $E(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var tm={exports:{}},Xc={},nm={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw;function WE(){if(jw)return Fe;jw=1;var f=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function P(M,V,le){this.props=M,this.context=V,this.refs=C,this.updater=le||_}P.prototype.isReactComponent={},P.prototype.setState=function(M,V){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,V,"setState")},P.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function k(){}k.prototype=P.prototype;function I(M,V,le){this.props=M,this.context=V,this.refs=C,this.updater=le||_}var F=I.prototype=new k;F.constructor=I,b(F,P.prototype),F.isPureReactComponent=!0;var N=Array.isArray,B=Object.prototype.hasOwnProperty,H={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function W(M,V,le){var Ae,ke={},ve=null,me=null;if(V!=null)for(Ae in V.ref!==void 0&&(me=V.ref),V.key!==void 0&&(ve=""+V.key),V)B.call(V,Ae)&&!$.hasOwnProperty(Ae)&&(ke[Ae]=V[Ae]);var Le=arguments.length-2;if(Le===1)ke.children=le;else if(1<Le){for(var Oe=Array(Le),Ne=0;Ne<Le;Ne++)Oe[Ne]=arguments[Ne+2];ke.children=Oe}if(M&&M.defaultProps)for(Ae in Le=M.defaultProps,Le)ke[Ae]===void 0&&(ke[Ae]=Le[Ae]);return{$$typeof:f,type:M,key:ve,ref:me,props:ke,_owner:H.current}}function Q(M,V){return{$$typeof:f,type:M.type,key:V,ref:M.ref,props:M.props,_owner:M._owner}}function ne(M){return typeof M=="object"&&M!==null&&M.$$typeof===f}function te(M){var V={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(le){return V[le]})}var xe=/\/+/g;function fe(M,V){return typeof M=="object"&&M!==null&&M.key!=null?te(""+M.key):V.toString(36)}function he(M,V,le,Ae,ke){var ve=typeof M;(ve==="undefined"||ve==="boolean")&&(M=null);var me=!1;if(M===null)me=!0;else switch(ve){case"string":case"number":me=!0;break;case"object":switch(M.$$typeof){case f:case e:me=!0}}if(me)return me=M,ke=ke(me),M=Ae===""?"."+fe(me,0):Ae,N(ke)?(le="",M!=null&&(le=M.replace(xe,"$&/")+"/"),he(ke,V,le,"",function(Ne){return Ne})):ke!=null&&(ne(ke)&&(ke=Q(ke,le+(!ke.key||me&&me.key===ke.key?"":(""+ke.key).replace(xe,"$&/")+"/")+M)),V.push(ke)),1;if(me=0,Ae=Ae===""?".":Ae+":",N(M))for(var Le=0;Le<M.length;Le++){ve=M[Le];var Oe=Ae+fe(ve,Le);me+=he(ve,V,le,Oe,ke)}else if(Oe=w(M),typeof Oe=="function")for(M=Oe.call(M),Le=0;!(ve=M.next()).done;)ve=ve.value,Oe=Ae+fe(ve,Le++),me+=he(ve,V,le,Oe,ke);else if(ve==="object")throw V=String(M),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return me}function we(M,V,le){if(M==null)return M;var Ae=[],ke=0;return he(M,Ae,"","",function(ve){return V.call(le,ve,ke++)}),Ae}function ge(M){if(M._status===-1){var V=M._result;V=V(),V.then(function(le){(M._status===0||M._status===-1)&&(M._status=1,M._result=le)},function(le){(M._status===0||M._status===-1)&&(M._status=2,M._result=le)}),M._status===-1&&(M._status=0,M._result=V)}if(M._status===1)return M._result.default;throw M._result}var K={current:null},U={transition:null},oe={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:U,ReactCurrentOwner:H};function J(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:we,forEach:function(M,V,le){we(M,function(){V.apply(this,arguments)},le)},count:function(M){var V=0;return we(M,function(){V++}),V},toArray:function(M){return we(M,function(V){return V})||[]},only:function(M){if(!ne(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Fe.Component=P,Fe.Fragment=t,Fe.Profiler=r,Fe.PureComponent=I,Fe.StrictMode=i,Fe.Suspense=d,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Fe.act=J,Fe.cloneElement=function(M,V,le){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Ae=b({},M.props),ke=M.key,ve=M.ref,me=M._owner;if(V!=null){if(V.ref!==void 0&&(ve=V.ref,me=H.current),V.key!==void 0&&(ke=""+V.key),M.type&&M.type.defaultProps)var Le=M.type.defaultProps;for(Oe in V)B.call(V,Oe)&&!$.hasOwnProperty(Oe)&&(Ae[Oe]=V[Oe]===void 0&&Le!==void 0?Le[Oe]:V[Oe])}var Oe=arguments.length-2;if(Oe===1)Ae.children=le;else if(1<Oe){Le=Array(Oe);for(var Ne=0;Ne<Oe;Ne++)Le[Ne]=arguments[Ne+2];Ae.children=Le}return{$$typeof:f,type:M.type,key:ke,ref:ve,props:Ae,_owner:me}},Fe.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},Fe.createElement=W,Fe.createFactory=function(M){var V=W.bind(null,M);return V.type=M,V},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(M){return{$$typeof:u,render:M}},Fe.isValidElement=ne,Fe.lazy=function(M){return{$$typeof:m,_payload:{_status:-1,_result:M},_init:ge}},Fe.memo=function(M,V){return{$$typeof:p,type:M,compare:V===void 0?null:V}},Fe.startTransition=function(M){var V=U.transition;U.transition={};try{M()}finally{U.transition=V}},Fe.unstable_act=J,Fe.useCallback=function(M,V){return K.current.useCallback(M,V)},Fe.useContext=function(M){return K.current.useContext(M)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(M){return K.current.useDeferredValue(M)},Fe.useEffect=function(M,V){return K.current.useEffect(M,V)},Fe.useId=function(){return K.current.useId()},Fe.useImperativeHandle=function(M,V,le){return K.current.useImperativeHandle(M,V,le)},Fe.useInsertionEffect=function(M,V){return K.current.useInsertionEffect(M,V)},Fe.useLayoutEffect=function(M,V){return K.current.useLayoutEffect(M,V)},Fe.useMemo=function(M,V){return K.current.useMemo(M,V)},Fe.useReducer=function(M,V,le){return K.current.useReducer(M,V,le)},Fe.useRef=function(M){return K.current.useRef(M)},Fe.useState=function(M){return K.current.useState(M)},Fe.useSyncExternalStore=function(M,V,le){return K.current.useSyncExternalStore(M,V,le)},Fe.useTransition=function(){return K.current.useTransition()},Fe.version="18.3.1",Fe}var zw;function Nv(){return zw||(zw=1,nm.exports=WE()),nm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function GE(){if(Hw)return Xc;Hw=1;var f=Nv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,p){var m,y={},w=null,_=null;p!==void 0&&(w=""+p),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(_=d.ref);for(m in d)i.call(d,m)&&!a.hasOwnProperty(m)&&(y[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:u,key:w,ref:_,props:y,_owner:r.current}}return Xc.Fragment=t,Xc.jsx=c,Xc.jsxs=c,Xc}var Bw;function XE(){return Bw||(Bw=1,tm.exports=GE()),tm.exports}var z=XE(),re=Nv(),Xd={},im={exports:{}},Sn={},sm={exports:{}},rm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function qE(){return Uw||(Uw=1,function(f){function e(U,oe){var J=U.length;U.push(oe);e:for(;0<J;){var M=J-1>>>1,V=U[M];if(0<r(V,oe))U[M]=oe,U[J]=V,J=M;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var oe=U[0],J=U.pop();if(J!==oe){U[0]=J;e:for(var M=0,V=U.length,le=V>>>1;M<le;){var Ae=2*(M+1)-1,ke=U[Ae],ve=Ae+1,me=U[ve];if(0>r(ke,J))ve<V&&0>r(me,ke)?(U[M]=me,U[ve]=J,M=ve):(U[M]=ke,U[Ae]=J,M=Ae);else if(ve<V&&0>r(me,J))U[M]=me,U[ve]=J,M=ve;else break e}}return oe}function r(U,oe){var J=U.sortIndex-oe.sortIndex;return J!==0?J:U.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;f.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();f.unstable_now=function(){return c.now()-u}}var d=[],p=[],m=1,y=null,w=3,_=!1,b=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(U){for(var oe=t(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=U)i(p),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=t(p)}}function N(U){if(C=!1,F(U),!b)if(t(d)!==null)b=!0,ge(B);else{var oe=t(p);oe!==null&&K(N,oe.startTime-U)}}function B(U,oe){b=!1,C&&(C=!1,k(W),W=-1),_=!0;var J=w;try{for(F(oe),y=t(d);y!==null&&(!(y.expirationTime>oe)||U&&!te());){var M=y.callback;if(typeof M=="function"){y.callback=null,w=y.priorityLevel;var V=M(y.expirationTime<=oe);oe=f.unstable_now(),typeof V=="function"?y.callback=V:y===t(d)&&i(d),F(oe)}else i(d);y=t(d)}if(y!==null)var le=!0;else{var Ae=t(p);Ae!==null&&K(N,Ae.startTime-oe),le=!1}return le}finally{y=null,w=J,_=!1}}var H=!1,$=null,W=-1,Q=5,ne=-1;function te(){return!(f.unstable_now()-ne<Q)}function xe(){if($!==null){var U=f.unstable_now();ne=U;var oe=!0;try{oe=$(!0,U)}finally{oe?fe():(H=!1,$=null)}}else H=!1}var fe;if(typeof I=="function")fe=function(){I(xe)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,we=he.port2;he.port1.onmessage=xe,fe=function(){we.postMessage(null)}}else fe=function(){P(xe,0)};function ge(U){$=U,H||(H=!0,fe())}function K(U,oe){W=P(function(){U(f.unstable_now())},oe)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(U){U.callback=null},f.unstable_continueExecution=function(){b||_||(b=!0,ge(B))},f.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<U?Math.floor(1e3/U):5},f.unstable_getCurrentPriorityLevel=function(){return w},f.unstable_getFirstCallbackNode=function(){return t(d)},f.unstable_next=function(U){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var J=w;w=oe;try{return U()}finally{w=J}},f.unstable_pauseExecution=function(){},f.unstable_requestPaint=function(){},f.unstable_runWithPriority=function(U,oe){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=w;w=U;try{return oe()}finally{w=J}},f.unstable_scheduleCallback=function(U,oe,J){var M=f.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?M+J:M):J=M,U){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=J+V,U={id:m++,callback:oe,priorityLevel:U,startTime:J,expirationTime:V,sortIndex:-1},J>M?(U.sortIndex=J,e(p,U),t(d)===null&&U===t(p)&&(C?(k(W),W=-1):C=!0,K(N,J-M))):(U.sortIndex=V,e(d,U),b||_||(b=!0,ge(B))),U},f.unstable_shouldYield=te,f.unstable_wrapCallback=function(U){var oe=w;return function(){var J=w;w=oe;try{return U.apply(this,arguments)}finally{w=J}}}}(rm)),rm}var Vw;function YE(){return Vw||(Vw=1,sm.exports=qE()),sm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function KE(){if($w)return Sn;$w=1;var f=Nv(),e=YE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function a(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(r[n]=s,n=0;n<s.length;n++)i.add(s[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function w(n){return d.call(y,n)?!0:d.call(m,n)?!1:p.test(n)?y[n]=!0:(m[n]=!0,!1)}function _(n,s,o,h){if(o!==null&&o.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:o!==null?!o.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function b(n,s,o,h){if(s===null||typeof s>"u"||_(n,s,o,h))return!0;if(h)return!1;if(o!==null)switch(o.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(n,s,o,h,g,v,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=o,this.propertyName=n,this.type=s,this.sanitizeURL=v,this.removeEmptyString=S}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){P[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];P[s]=new C(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){P[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){P[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){P[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){P[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){P[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){P[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){P[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function I(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(k,I);P[s]=new C(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(k,I);P[s]=new C(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(k,I);P[s]=new C(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){P[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),P.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){P[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function F(n,s,o,h){var g=P.hasOwnProperty(s)?P[s]:null;(g!==null?g.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(b(s,o,g,h)&&(o=null),h||g===null?w(s)&&(o===null?n.removeAttribute(s):n.setAttribute(s,""+o)):g.mustUseProperty?n[g.propertyName]=o===null?g.type===3?!1:"":o:(s=g.attributeName,h=g.attributeNamespace,o===null?n.removeAttribute(s):(g=g.type,o=g===3||g===4&&o===!0?"":""+o,h?n.setAttributeNS(h,s,o):n.setAttribute(s,o))))}var N=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),H=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),te=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),U=Symbol.iterator;function oe(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var J=Object.assign,M;function V(n){if(M===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+n}var le=!1;function Ae(n,s){if(!n||le)return"";le=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(j){var h=j}Reflect.construct(n,[],s)}else{try{s.call()}catch(j){h=j}n.call(s.prototype)}else{try{throw Error()}catch(j){h=j}n()}}catch(j){if(j&&h&&typeof j.stack=="string"){for(var g=j.stack.split(`
`),v=h.stack.split(`
`),S=g.length-1,T=v.length-1;1<=S&&0<=T&&g[S]!==v[T];)T--;for(;1<=S&&0<=T;S--,T--)if(g[S]!==v[T]){if(S!==1||T!==1)do if(S--,T--,0>T||g[S]!==v[T]){var R=`
`+g[S].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=S&&0<=T);break}}}finally{le=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?V(n):""}function ke(n){switch(n.tag){case 5:return V(n.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $:return"Fragment";case H:return"Portal";case Q:return"Profiler";case W:return"StrictMode";case fe:return"Suspense";case he:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case te:return(n.displayName||"Context")+".Consumer";case ne:return(n._context.displayName||"Context")+".Provider";case xe:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case we:return s=n.displayName||null,s!==null?s:ve(n.type)||"Memo";case ge:s=n._payload,n=n._init;try{return ve(n(s))}catch{}}return null}function me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(s);case 8:return s===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Le(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Oe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ne(n){var s=Oe(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,v=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Mi(n){n._valueTracker||(n._valueTracker=Ne(n))}function Ks(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),h="";return n&&(h=Oe(n)?n.checked?"true":"false":n.value),n=h,n!==o?(s.setValue(n),!0):!1}function Ue(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function it(n,s){var o=s.checked;return J({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??n._wrapperState.initialChecked})}function Et(n,s){var o=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;o=Le(s.value!=null?s.value:o),n._wrapperState={initialChecked:h,initialValue:o,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function gt(n,s){s=s.checked,s!=null&&F(n,"checked",s,!1)}function Ii(n,s){gt(n,s);var o=Le(s.value),h=s.type;if(o!=null)h==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?lc(n,s.type,o):s.hasOwnProperty("defaultValue")&&lc(n,s.type,Le(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Qs(n,s,o){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,o||s===n.value||(n.value=s),n.defaultValue=s}o=n.name,o!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,o!==""&&(n.name=o)}function lc(n,s,o){(s!=="number"||Ue(n.ownerDocument)!==n)&&(o==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var Jr=Array.isArray;function li(n,s,o,h){if(n=n.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<n.length;o++)g=s.hasOwnProperty("$"+n[o].value),n[o].selected!==g&&(n[o].selected=g),g&&h&&(n[o].defaultSelected=!0)}else{for(o=""+Le(o),s=null,g=0;g<n.length;g++){if(n[g].value===o){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function cc(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Dh(n,s){var o=s.value;if(o==null){if(o=s.children,s=s.defaultValue,o!=null){if(s!=null)throw Error(t(92));if(Jr(o)){if(1<o.length)throw Error(t(93));o=o[0]}s=o}s==null&&(s=""),o=s}n._wrapperState={initialValue:Le(o)}}function Oh(n,s){var o=Le(s.value),h=Le(s.defaultValue);o!=null&&(o=""+o,o!==n.value&&(n.value=o),s.defaultValue==null&&n.defaultValue!==o&&(n.defaultValue=o)),h!=null&&(n.defaultValue=""+h)}function jh(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function zh(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ni(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?zh(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var rs,Zr=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,o,h,g){MSApp.execUnsafeLocalFunction(function(){return n(s,o,h,g)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(rs=rs||document.createElement("div"),rs.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=rs.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function os(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var uc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GS=["Webkit","ms","Moz","O"];Object.keys(uc).forEach(function(n){GS.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),uc[s]=uc[n]})});function Jv(n,s,o){return s==null||typeof s=="boolean"||s===""?"":o||typeof s!="number"||s===0||uc.hasOwnProperty(n)&&uc[n]?(""+s).trim():s+"px"}function Zv(n,s){n=n.style;for(var o in s)if(s.hasOwnProperty(o)){var h=o.indexOf("--")===0,g=Jv(o,s[o],h);o==="float"&&(o="cssFloat"),h?n.setProperty(o,g):n[o]=g}}var XS=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dp(n,s){if(s){if(XS[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function fp(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pp=null;function gp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mp=null,Ca=null,ka=null;function ey(n){if(n=Mc(n)){if(typeof mp!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ld(s),mp(n.stateNode,n.type,s))}}function ty(n){Ca?ka?ka.push(n):ka=[n]:Ca=n}function ny(){if(Ca){var n=Ca,s=ka;if(ka=Ca=null,ey(n),s)for(n=0;n<s.length;n++)ey(s[n])}}function iy(n,s){return n(s)}function sy(){}var vp=!1;function ry(n,s,o){if(vp)return n(s,o);vp=!0;try{return iy(n,s,o)}finally{vp=!1,(Ca!==null||ka!==null)&&(sy(),ny())}}function hc(n,s){var o=n.stateNode;if(o===null)return null;var h=ld(o);if(h===null)return null;o=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(t(231,s,typeof o));return o}var yp=!1;if(u)try{var dc={};Object.defineProperty(dc,"passive",{get:function(){yp=!0}}),window.addEventListener("test",dc,dc),window.removeEventListener("test",dc,dc)}catch{yp=!1}function qS(n,s,o,h,g,v,S,T,R){var j=Array.prototype.slice.call(arguments,3);try{s.apply(o,j)}catch(X){this.onError(X)}}var fc=!1,Hh=null,Bh=!1,wp=null,YS={onError:function(n){fc=!0,Hh=n}};function KS(n,s,o,h,g,v,S,T,R){fc=!1,Hh=null,qS.apply(YS,arguments)}function QS(n,s,o,h,g,v,S,T,R){if(KS.apply(this,arguments),fc){if(fc){var j=Hh;fc=!1,Hh=null}else throw Error(t(198));Bh||(Bh=!0,wp=j)}}function eo(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function oy(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function ay(n){if(eo(n)!==n)throw Error(t(188))}function JS(n){var s=n.alternate;if(!s){if(s=eo(n),s===null)throw Error(t(188));return s!==n?null:n}for(var o=n,h=s;;){var g=o.return;if(g===null)break;var v=g.alternate;if(v===null){if(h=g.return,h!==null){o=h;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===o)return ay(g),n;if(v===h)return ay(g),s;v=v.sibling}throw Error(t(188))}if(o.return!==h.return)o=g,h=v;else{for(var S=!1,T=g.child;T;){if(T===o){S=!0,o=g,h=v;break}if(T===h){S=!0,h=g,o=v;break}T=T.sibling}if(!S){for(T=v.child;T;){if(T===o){S=!0,o=v,h=g;break}if(T===h){S=!0,h=v,o=g;break}T=T.sibling}if(!S)throw Error(t(189))}}if(o.alternate!==h)throw Error(t(190))}if(o.tag!==3)throw Error(t(188));return o.stateNode.current===o?n:s}function ly(n){return n=JS(n),n!==null?cy(n):null}function cy(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=cy(n);if(s!==null)return s;n=n.sibling}return null}var uy=e.unstable_scheduleCallback,hy=e.unstable_cancelCallback,ZS=e.unstable_shouldYield,ex=e.unstable_requestPaint,mt=e.unstable_now,tx=e.unstable_getCurrentPriorityLevel,Ap=e.unstable_ImmediatePriority,dy=e.unstable_UserBlockingPriority,Uh=e.unstable_NormalPriority,nx=e.unstable_LowPriority,fy=e.unstable_IdlePriority,Vh=null,Fi=null;function ix(n){if(Fi&&typeof Fi.onCommitFiberRoot=="function")try{Fi.onCommitFiberRoot(Vh,n,void 0,(n.current.flags&128)===128)}catch{}}var ci=Math.clz32?Math.clz32:ox,sx=Math.log,rx=Math.LN2;function ox(n){return n>>>=0,n===0?32:31-(sx(n)/rx|0)|0}var $h=64,Wh=4194304;function pc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Gh(n,s){var o=n.pendingLanes;if(o===0)return 0;var h=0,g=n.suspendedLanes,v=n.pingedLanes,S=o&268435455;if(S!==0){var T=S&~g;T!==0?h=pc(T):(v&=S,v!==0&&(h=pc(v)))}else S=o&~g,S!==0?h=pc(S):v!==0&&(h=pc(v));if(h===0)return 0;if(s!==0&&s!==h&&!(s&g)&&(g=h&-h,v=s&-s,g>=v||g===16&&(v&4194240)!==0))return s;if(h&4&&(h|=o&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)o=31-ci(s),g=1<<o,h|=n[o],s&=~g;return h}function ax(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lx(n,s){for(var o=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes;0<v;){var S=31-ci(v),T=1<<S,R=g[S];R===-1?(!(T&o)||T&h)&&(g[S]=ax(T,s)):R<=s&&(n.expiredLanes|=T),v&=~T}}function _p(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function py(){var n=$h;return $h<<=1,!($h&4194240)&&($h=64),n}function Sp(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function gc(n,s,o){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-ci(s),n[s]=o}function cx(n,s){var o=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<o;){var g=31-ci(o),v=1<<g;s[g]=0,h[g]=-1,n[g]=-1,o&=~v}}function xp(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var h=31-ci(o),g=1<<h;g&s|n[h]&s&&(n[h]|=s),o&=~g}}var We=0;function gy(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var my,Ep,vy,yy,wy,bp=!1,Xh=[],Js=null,Zs=null,er=null,mc=new Map,vc=new Map,tr=[],ux="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ay(n,s){switch(n){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":mc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(s.pointerId)}}function yc(n,s,o,h,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:o,eventSystemFlags:h,nativeEvent:v,targetContainers:[g]},s!==null&&(s=Mc(s),s!==null&&Ep(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function hx(n,s,o,h,g){switch(s){case"focusin":return Js=yc(Js,n,s,o,h,g),!0;case"dragenter":return Zs=yc(Zs,n,s,o,h,g),!0;case"mouseover":return er=yc(er,n,s,o,h,g),!0;case"pointerover":var v=g.pointerId;return mc.set(v,yc(mc.get(v)||null,n,s,o,h,g)),!0;case"gotpointercapture":return v=g.pointerId,vc.set(v,yc(vc.get(v)||null,n,s,o,h,g)),!0}return!1}function _y(n){var s=to(n.target);if(s!==null){var o=eo(s);if(o!==null){if(s=o.tag,s===13){if(s=oy(o),s!==null){n.blockedOn=s,wy(n.priority,function(){vy(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=kp(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(o===null){o=n.nativeEvent;var h=new o.constructor(o.type,o);pp=h,o.target.dispatchEvent(h),pp=null}else return s=Mc(o),s!==null&&Ep(s),n.blockedOn=o,!1;s.shift()}return!0}function Sy(n,s,o){qh(n)&&o.delete(s)}function dx(){bp=!1,Js!==null&&qh(Js)&&(Js=null),Zs!==null&&qh(Zs)&&(Zs=null),er!==null&&qh(er)&&(er=null),mc.forEach(Sy),vc.forEach(Sy)}function wc(n,s){n.blockedOn===s&&(n.blockedOn=null,bp||(bp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dx)))}function Ac(n){function s(g){return wc(g,n)}if(0<Xh.length){wc(Xh[0],n);for(var o=1;o<Xh.length;o++){var h=Xh[o];h.blockedOn===n&&(h.blockedOn=null)}}for(Js!==null&&wc(Js,n),Zs!==null&&wc(Zs,n),er!==null&&wc(er,n),mc.forEach(s),vc.forEach(s),o=0;o<tr.length;o++)h=tr[o],h.blockedOn===n&&(h.blockedOn=null);for(;0<tr.length&&(o=tr[0],o.blockedOn===null);)_y(o),o.blockedOn===null&&tr.shift()}var Ta=N.ReactCurrentBatchConfig,Yh=!0;function fx(n,s,o,h){var g=We,v=Ta.transition;Ta.transition=null;try{We=1,Cp(n,s,o,h)}finally{We=g,Ta.transition=v}}function px(n,s,o,h){var g=We,v=Ta.transition;Ta.transition=null;try{We=4,Cp(n,s,o,h)}finally{We=g,Ta.transition=v}}function Cp(n,s,o,h){if(Yh){var g=kp(n,s,o,h);if(g===null)$p(n,s,h,Kh,o),Ay(n,h);else if(hx(g,n,s,o,h))h.stopPropagation();else if(Ay(n,h),s&4&&-1<ux.indexOf(n)){for(;g!==null;){var v=Mc(g);if(v!==null&&my(v),v=kp(n,s,o,h),v===null&&$p(n,s,h,Kh,o),v===g)break;g=v}g!==null&&h.stopPropagation()}else $p(n,s,h,null,o)}}var Kh=null;function kp(n,s,o,h){if(Kh=null,n=gp(h),n=to(n),n!==null)if(s=eo(n),s===null)n=null;else if(o=s.tag,o===13){if(n=oy(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Kh=n,null}function xy(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tx()){case Ap:return 1;case dy:return 4;case Uh:case nx:return 16;case fy:return 536870912;default:return 16}default:return 16}}var nr=null,Tp=null,Qh=null;function Ey(){if(Qh)return Qh;var n,s=Tp,o=s.length,h,g="value"in nr?nr.value:nr.textContent,v=g.length;for(n=0;n<o&&s[n]===g[n];n++);var S=o-n;for(h=1;h<=S&&s[o-h]===g[v-h];h++);return Qh=g.slice(n,1<h?1-h:void 0)}function Jh(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Zh(){return!0}function by(){return!1}function Rn(n){function s(o,h,g,v,S){this._reactName=o,this._targetInst=g,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zh:by,this.isPropagationStopped=by,this}return J(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Zh)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Zh)},persist:function(){},isPersistent:Zh}),s}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pp=Rn(Pa),_c=J({},Pa,{view:0,detail:0}),gx=Rn(_c),Rp,Lp,Sc,ed=J({},_c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ip,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Sc&&(Sc&&n.type==="mousemove"?(Rp=n.screenX-Sc.screenX,Lp=n.screenY-Sc.screenY):Lp=Rp=0,Sc=n),Rp)},movementY:function(n){return"movementY"in n?n.movementY:Lp}}),Cy=Rn(ed),mx=J({},ed,{dataTransfer:0}),vx=Rn(mx),yx=J({},_c,{relatedTarget:0}),Mp=Rn(yx),wx=J({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),Ax=Rn(wx),_x=J({},Pa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Sx=Rn(_x),xx=J({},Pa,{data:0}),ky=Rn(xx),Ex={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kx(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Cx[n])?!!s[n]:!1}function Ip(){return kx}var Tx=J({},_c,{key:function(n){if(n.key){var s=Ex[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Jh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?bx[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ip,charCode:function(n){return n.type==="keypress"?Jh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Jh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Px=Rn(Tx),Rx=J({},ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ty=Rn(Rx),Lx=J({},_c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ip}),Mx=Rn(Lx),Ix=J({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nx=Rn(Ix),Fx=J({},ed,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Dx=Rn(Fx),Ox=[9,13,27,32],Np=u&&"CompositionEvent"in window,xc=null;u&&"documentMode"in document&&(xc=document.documentMode);var jx=u&&"TextEvent"in window&&!xc,Py=u&&(!Np||xc&&8<xc&&11>=xc),Ry=" ",Ly=!1;function My(n,s){switch(n){case"keyup":return Ox.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iy(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ra=!1;function zx(n,s){switch(n){case"compositionend":return Iy(s);case"keypress":return s.which!==32?null:(Ly=!0,Ry);case"textInput":return n=s.data,n===Ry&&Ly?null:n;default:return null}}function Hx(n,s){if(Ra)return n==="compositionend"||!Np&&My(n,s)?(n=Ey(),Qh=Tp=nr=null,Ra=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Py&&s.locale!=="ko"?null:s.data;default:return null}}var Bx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ny(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Bx[n.type]:s==="textarea"}function Fy(n,s,o,h){ty(h),s=rd(s,"onChange"),0<s.length&&(o=new Pp("onChange","change",null,o,h),n.push({event:o,listeners:s}))}var Ec=null,bc=null;function Ux(n){Zy(n,0)}function td(n){var s=Fa(n);if(Ks(s))return n}function Vx(n,s){if(n==="change")return s}var Dy=!1;if(u){var Fp;if(u){var Dp="oninput"in document;if(!Dp){var Oy=document.createElement("div");Oy.setAttribute("oninput","return;"),Dp=typeof Oy.oninput=="function"}Fp=Dp}else Fp=!1;Dy=Fp&&(!document.documentMode||9<document.documentMode)}function jy(){Ec&&(Ec.detachEvent("onpropertychange",zy),bc=Ec=null)}function zy(n){if(n.propertyName==="value"&&td(bc)){var s=[];Fy(s,bc,n,gp(n)),ry(Ux,s)}}function $x(n,s,o){n==="focusin"?(jy(),Ec=s,bc=o,Ec.attachEvent("onpropertychange",zy)):n==="focusout"&&jy()}function Wx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return td(bc)}function Gx(n,s){if(n==="click")return td(s)}function Xx(n,s){if(n==="input"||n==="change")return td(s)}function qx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ui=typeof Object.is=="function"?Object.is:qx;function Cc(n,s){if(ui(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),h=Object.keys(s);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var g=o[h];if(!d.call(s,g)||!ui(n[g],s[g]))return!1}return!0}function Hy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function By(n,s){var o=Hy(n);n=0;for(var h;o;){if(o.nodeType===3){if(h=n+o.textContent.length,n<=s&&h>=s)return{node:o,offset:s-n};n=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Hy(o)}}function Uy(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Uy(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Vy(){for(var n=window,s=Ue();s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Ue(n.document)}return s}function Op(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Yx(n){var s=Vy(),o=n.focusedElem,h=n.selectionRange;if(s!==o&&o&&o.ownerDocument&&Uy(o.ownerDocument.documentElement,o)){if(h!==null&&Op(o)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(n,o.value.length);else if(n=(s=o.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=o.textContent.length,v=Math.min(h.start,g);h=h.end===void 0?v:Math.min(h.end,g),!n.extend&&v>h&&(g=h,h=v,v=g),g=By(o,v);var S=By(o,h);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),v>h?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=o;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)n=s[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Kx=u&&"documentMode"in document&&11>=document.documentMode,La=null,jp=null,kc=null,zp=!1;function $y(n,s,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;zp||La==null||La!==Ue(h)||(h=La,"selectionStart"in h&&Op(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),kc&&Cc(kc,h)||(kc=h,h=rd(jp,"onSelect"),0<h.length&&(s=new Pp("onSelect","select",null,s,o),n.push({event:s,listeners:h}),s.target=La)))}function nd(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Ma={animationend:nd("Animation","AnimationEnd"),animationiteration:nd("Animation","AnimationIteration"),animationstart:nd("Animation","AnimationStart"),transitionend:nd("Transition","TransitionEnd")},Hp={},Wy={};u&&(Wy=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function id(n){if(Hp[n])return Hp[n];if(!Ma[n])return n;var s=Ma[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Wy)return Hp[n]=s[o];return n}var Gy=id("animationend"),Xy=id("animationiteration"),qy=id("animationstart"),Yy=id("transitionend"),Ky=new Map,Qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(n,s){Ky.set(n,s),a(s,[n])}for(var Bp=0;Bp<Qy.length;Bp++){var Up=Qy[Bp],Qx=Up.toLowerCase(),Jx=Up[0].toUpperCase()+Up.slice(1);ir(Qx,"on"+Jx)}ir(Gy,"onAnimationEnd"),ir(Xy,"onAnimationIteration"),ir(qy,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(Yy,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tc));function Jy(n,s,o){var h=n.type||"unknown-event";n.currentTarget=o,QS(h,s,void 0,n),n.currentTarget=null}function Zy(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var h=n[o],g=h.event;h=h.listeners;e:{var v=void 0;if(s)for(var S=h.length-1;0<=S;S--){var T=h[S],R=T.instance,j=T.currentTarget;if(T=T.listener,R!==v&&g.isPropagationStopped())break e;Jy(g,T,j),v=R}else for(S=0;S<h.length;S++){if(T=h[S],R=T.instance,j=T.currentTarget,T=T.listener,R!==v&&g.isPropagationStopped())break e;Jy(g,T,j),v=R}}}if(Bh)throw n=wp,Bh=!1,wp=null,n}function et(n,s){var o=s[Kp];o===void 0&&(o=s[Kp]=new Set);var h=n+"__bubble";o.has(h)||(e0(s,n,2,!1),o.add(h))}function Vp(n,s,o){var h=0;s&&(h|=4),e0(o,n,h,s)}var sd="_reactListening"+Math.random().toString(36).slice(2);function Pc(n){if(!n[sd]){n[sd]=!0,i.forEach(function(o){o!=="selectionchange"&&(Zx.has(o)||Vp(o,!1,n),Vp(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[sd]||(s[sd]=!0,Vp("selectionchange",!1,s))}}function e0(n,s,o,h){switch(xy(s)){case 1:var g=fx;break;case 4:g=px;break;default:g=Cp}o=g.bind(null,s,o,n),g=void 0,!yp||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(s,o,{capture:!0,passive:g}):n.addEventListener(s,o,!0):g!==void 0?n.addEventListener(s,o,{passive:g}):n.addEventListener(s,o,!1)}function $p(n,s,o,h,g){var v=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var T=h.stateNode.containerInfo;if(T===g||T.nodeType===8&&T.parentNode===g)break;if(S===4)for(S=h.return;S!==null;){var R=S.tag;if((R===3||R===4)&&(R=S.stateNode.containerInfo,R===g||R.nodeType===8&&R.parentNode===g))return;S=S.return}for(;T!==null;){if(S=to(T),S===null)return;if(R=S.tag,R===5||R===6){h=v=S;continue e}T=T.parentNode}}h=h.return}ry(function(){var j=v,X=gp(o),q=[];e:{var G=Ky.get(n);if(G!==void 0){var ie=Pp,ce=n;switch(n){case"keypress":if(Jh(o)===0)break e;case"keydown":case"keyup":ie=Px;break;case"focusin":ce="focus",ie=Mp;break;case"focusout":ce="blur",ie=Mp;break;case"beforeblur":case"afterblur":ie=Mp;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Cy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=vx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=Mx;break;case Gy:case Xy:case qy:ie=Ax;break;case Yy:ie=Nx;break;case"scroll":ie=gx;break;case"wheel":ie=Dx;break;case"copy":case"cut":case"paste":ie=Sx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Ty}var ue=(s&4)!==0,vt=!ue&&n==="scroll",D=ue?G!==null?G+"Capture":null:G;ue=[];for(var L=j,O;L!==null;){O=L;var Y=O.stateNode;if(O.tag===5&&Y!==null&&(O=Y,D!==null&&(Y=hc(L,D),Y!=null&&ue.push(Rc(L,Y,O)))),vt)break;L=L.return}0<ue.length&&(G=new ie(G,ce,null,o,X),q.push({event:G,listeners:ue}))}}if(!(s&7)){e:{if(G=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",G&&o!==pp&&(ce=o.relatedTarget||o.fromElement)&&(to(ce)||ce[as]))break e;if((ie||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,ie?(ce=o.relatedTarget||o.toElement,ie=j,ce=ce?to(ce):null,ce!==null&&(vt=eo(ce),ce!==vt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(ie=null,ce=j),ie!==ce)){if(ue=Cy,Y="onMouseLeave",D="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(ue=Ty,Y="onPointerLeave",D="onPointerEnter",L="pointer"),vt=ie==null?G:Fa(ie),O=ce==null?G:Fa(ce),G=new ue(Y,L+"leave",ie,o,X),G.target=vt,G.relatedTarget=O,Y=null,to(X)===j&&(ue=new ue(D,L+"enter",ce,o,X),ue.target=O,ue.relatedTarget=vt,Y=ue),vt=Y,ie&&ce)t:{for(ue=ie,D=ce,L=0,O=ue;O;O=Ia(O))L++;for(O=0,Y=D;Y;Y=Ia(Y))O++;for(;0<L-O;)ue=Ia(ue),L--;for(;0<O-L;)D=Ia(D),O--;for(;L--;){if(ue===D||D!==null&&ue===D.alternate)break t;ue=Ia(ue),D=Ia(D)}ue=null}else ue=null;ie!==null&&t0(q,G,ie,ue,!1),ce!==null&&vt!==null&&t0(q,vt,ce,ue,!0)}}e:{if(G=j?Fa(j):window,ie=G.nodeName&&G.nodeName.toLowerCase(),ie==="select"||ie==="input"&&G.type==="file")var de=Vx;else if(Ny(G))if(Dy)de=Xx;else{de=Wx;var _e=$x}else(ie=G.nodeName)&&ie.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(de=Gx);if(de&&(de=de(n,j))){Fy(q,de,o,X);break e}_e&&_e(n,G,j),n==="focusout"&&(_e=G._wrapperState)&&_e.controlled&&G.type==="number"&&lc(G,"number",G.value)}switch(_e=j?Fa(j):window,n){case"focusin":(Ny(_e)||_e.contentEditable==="true")&&(La=_e,jp=j,kc=null);break;case"focusout":kc=jp=La=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,$y(q,o,X);break;case"selectionchange":if(Kx)break;case"keydown":case"keyup":$y(q,o,X)}var Se;if(Np)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ra?My(n,o)&&(Ee="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ee="onCompositionStart");Ee&&(Py&&o.locale!=="ko"&&(Ra||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ra&&(Se=Ey()):(nr=X,Tp="value"in nr?nr.value:nr.textContent,Ra=!0)),_e=rd(j,Ee),0<_e.length&&(Ee=new ky(Ee,n,null,o,X),q.push({event:Ee,listeners:_e}),Se?Ee.data=Se:(Se=Iy(o),Se!==null&&(Ee.data=Se)))),(Se=jx?zx(n,o):Hx(n,o))&&(j=rd(j,"onBeforeInput"),0<j.length&&(X=new ky("onBeforeInput","beforeinput",null,o,X),q.push({event:X,listeners:j}),X.data=Se))}Zy(q,s)})}function Rc(n,s,o){return{instance:n,listener:s,currentTarget:o}}function rd(n,s){for(var o=s+"Capture",h=[];n!==null;){var g=n,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=hc(n,o),v!=null&&h.unshift(Rc(n,v,g)),v=hc(n,s),v!=null&&h.push(Rc(n,v,g))),n=n.return}return h}function Ia(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function t0(n,s,o,h,g){for(var v=s._reactName,S=[];o!==null&&o!==h;){var T=o,R=T.alternate,j=T.stateNode;if(R!==null&&R===h)break;T.tag===5&&j!==null&&(T=j,g?(R=hc(o,v),R!=null&&S.unshift(Rc(o,R,T))):g||(R=hc(o,v),R!=null&&S.push(Rc(o,R,T)))),o=o.return}S.length!==0&&n.push({event:s,listeners:S})}var eE=/\r\n?/g,tE=/\u0000|\uFFFD/g;function n0(n){return(typeof n=="string"?n:""+n).replace(eE,`
`).replace(tE,"")}function od(n,s,o){if(s=n0(s),n0(n)!==s&&o)throw Error(t(425))}function ad(){}var Wp=null,Gp=null;function Xp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qp=typeof setTimeout=="function"?setTimeout:void 0,nE=typeof clearTimeout=="function"?clearTimeout:void 0,i0=typeof Promise=="function"?Promise:void 0,iE=typeof queueMicrotask=="function"?queueMicrotask:typeof i0<"u"?function(n){return i0.resolve(null).then(n).catch(sE)}:qp;function sE(n){setTimeout(function(){throw n})}function Yp(n,s){var o=s,h=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(h===0){n.removeChild(g),Ac(s);return}h--}else o!=="$"&&o!=="$?"&&o!=="$!"||h++;o=g}while(o);Ac(s)}function sr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function s0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}var Na=Math.random().toString(36).slice(2),Di="__reactFiber$"+Na,Lc="__reactProps$"+Na,as="__reactContainer$"+Na,Kp="__reactEvents$"+Na,rE="__reactListeners$"+Na,oE="__reactHandles$"+Na;function to(n){var s=n[Di];if(s)return s;for(var o=n.parentNode;o;){if(s=o[as]||o[Di]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=s0(n);n!==null;){if(o=n[Di])return o;n=s0(n)}return s}n=o,o=n.parentNode}return null}function Mc(n){return n=n[Di]||n[as],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Fa(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ld(n){return n[Lc]||null}var Qp=[],Da=-1;function rr(n){return{current:n}}function tt(n){0>Da||(n.current=Qp[Da],Qp[Da]=null,Da--)}function Je(n,s){Da++,Qp[Da]=n.current,n.current=s}var or={},Yt=rr(or),vn=rr(!1),no=or;function Oa(n,s){var o=n.type.contextTypes;if(!o)return or;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in o)g[v]=s[v];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function yn(n){return n=n.childContextTypes,n!=null}function cd(){tt(vn),tt(Yt)}function r0(n,s,o){if(Yt.current!==or)throw Error(t(168));Je(Yt,s),Je(vn,o)}function o0(n,s,o){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return o;h=h.getChildContext();for(var g in h)if(!(g in s))throw Error(t(108,me(n)||"Unknown",g));return J({},o,h)}function ud(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||or,no=Yt.current,Je(Yt,n),Je(vn,vn.current),!0}function a0(n,s,o){var h=n.stateNode;if(!h)throw Error(t(169));o?(n=o0(n,s,no),h.__reactInternalMemoizedMergedChildContext=n,tt(vn),tt(Yt),Je(Yt,n)):tt(vn),Je(vn,o)}var ls=null,hd=!1,Jp=!1;function l0(n){ls===null?ls=[n]:ls.push(n)}function aE(n){hd=!0,l0(n)}function ar(){if(!Jp&&ls!==null){Jp=!0;var n=0,s=We;try{var o=ls;for(We=1;n<o.length;n++){var h=o[n];do h=h(!0);while(h!==null)}ls=null,hd=!1}catch(g){throw ls!==null&&(ls=ls.slice(n+1)),uy(Ap,ar),g}finally{We=s,Jp=!1}}return null}var ja=[],za=0,dd=null,fd=0,Gn=[],Xn=0,io=null,cs=1,us="";function so(n,s){ja[za++]=fd,ja[za++]=dd,dd=n,fd=s}function c0(n,s,o){Gn[Xn++]=cs,Gn[Xn++]=us,Gn[Xn++]=io,io=n;var h=cs;n=us;var g=32-ci(h)-1;h&=~(1<<g),o+=1;var v=32-ci(s)+g;if(30<v){var S=g-g%5;v=(h&(1<<S)-1).toString(32),h>>=S,g-=S,cs=1<<32-ci(s)+g|o<<g|h,us=v+n}else cs=1<<v|o<<g|h,us=n}function Zp(n){n.return!==null&&(so(n,1),c0(n,1,0))}function eg(n){for(;n===dd;)dd=ja[--za],ja[za]=null,fd=ja[--za],ja[za]=null;for(;n===io;)io=Gn[--Xn],Gn[Xn]=null,us=Gn[--Xn],Gn[Xn]=null,cs=Gn[--Xn],Gn[Xn]=null}var Ln=null,Mn=null,st=!1,hi=null;function u0(n,s){var o=Qn(5,null,null,0);o.elementType="DELETED",o.stateNode=s,o.return=n,s=n.deletions,s===null?(n.deletions=[o],n.flags|=16):s.push(o)}function h0(n,s){switch(n.tag){case 5:var o=n.type;return s=s.nodeType!==1||o.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Ln=n,Mn=sr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Ln=n,Mn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(o=io!==null?{id:cs,overflow:us}:null,n.memoizedState={dehydrated:s,treeContext:o,retryLane:1073741824},o=Qn(18,null,null,0),o.stateNode=s,o.return=n,n.child=o,Ln=n,Mn=null,!0):!1;default:return!1}}function tg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ng(n){if(st){var s=Mn;if(s){var o=s;if(!h0(n,s)){if(tg(n))throw Error(t(418));s=sr(o.nextSibling);var h=Ln;s&&h0(n,s)?u0(h,o):(n.flags=n.flags&-4097|2,st=!1,Ln=n)}}else{if(tg(n))throw Error(t(418));n.flags=n.flags&-4097|2,st=!1,Ln=n}}}function d0(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ln=n}function pd(n){if(n!==Ln)return!1;if(!st)return d0(n),st=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Xp(n.type,n.memoizedProps)),s&&(s=Mn)){if(tg(n))throw f0(),Error(t(418));for(;s;)u0(n,s),s=sr(s.nextSibling)}if(d0(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"){if(s===0){Mn=sr(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++}n=n.nextSibling}Mn=null}}else Mn=Ln?sr(n.stateNode.nextSibling):null;return!0}function f0(){for(var n=Mn;n;)n=sr(n.nextSibling)}function Ha(){Mn=Ln=null,st=!1}function ig(n){hi===null?hi=[n]:hi.push(n)}var lE=N.ReactCurrentBatchConfig;function Ic(n,s,o){if(n=o.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(t(309));var h=o.stateNode}if(!h)throw Error(t(147,n));var g=h,v=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(S){var T=g.refs;S===null?delete T[v]:T[v]=S},s._stringRef=v,s)}if(typeof n!="string")throw Error(t(284));if(!o._owner)throw Error(t(290,n))}return n}function gd(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function p0(n){var s=n._init;return s(n._payload)}function g0(n){function s(D,L){if(n){var O=D.deletions;O===null?(D.deletions=[L],D.flags|=16):O.push(L)}}function o(D,L){if(!n)return null;for(;L!==null;)s(D,L),L=L.sibling;return null}function h(D,L){for(D=new Map;L!==null;)L.key!==null?D.set(L.key,L):D.set(L.index,L),L=L.sibling;return D}function g(D,L){return D=gr(D,L),D.index=0,D.sibling=null,D}function v(D,L,O){return D.index=O,n?(O=D.alternate,O!==null?(O=O.index,O<L?(D.flags|=2,L):O):(D.flags|=2,L)):(D.flags|=1048576,L)}function S(D){return n&&D.alternate===null&&(D.flags|=2),D}function T(D,L,O,Y){return L===null||L.tag!==6?(L=qg(O,D.mode,Y),L.return=D,L):(L=g(L,O),L.return=D,L)}function R(D,L,O,Y){var de=O.type;return de===$?X(D,L,O.props.children,Y,O.key):L!==null&&(L.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ge&&p0(de)===L.type)?(Y=g(L,O.props),Y.ref=Ic(D,L,O),Y.return=D,Y):(Y=zd(O.type,O.key,O.props,null,D.mode,Y),Y.ref=Ic(D,L,O),Y.return=D,Y)}function j(D,L,O,Y){return L===null||L.tag!==4||L.stateNode.containerInfo!==O.containerInfo||L.stateNode.implementation!==O.implementation?(L=Yg(O,D.mode,Y),L.return=D,L):(L=g(L,O.children||[]),L.return=D,L)}function X(D,L,O,Y,de){return L===null||L.tag!==7?(L=fo(O,D.mode,Y,de),L.return=D,L):(L=g(L,O),L.return=D,L)}function q(D,L,O){if(typeof L=="string"&&L!==""||typeof L=="number")return L=qg(""+L,D.mode,O),L.return=D,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case B:return O=zd(L.type,L.key,L.props,null,D.mode,O),O.ref=Ic(D,null,L),O.return=D,O;case H:return L=Yg(L,D.mode,O),L.return=D,L;case ge:var Y=L._init;return q(D,Y(L._payload),O)}if(Jr(L)||oe(L))return L=fo(L,D.mode,O,null),L.return=D,L;gd(D,L)}return null}function G(D,L,O,Y){var de=L!==null?L.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return de!==null?null:T(D,L,""+O,Y);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case B:return O.key===de?R(D,L,O,Y):null;case H:return O.key===de?j(D,L,O,Y):null;case ge:return de=O._init,G(D,L,de(O._payload),Y)}if(Jr(O)||oe(O))return de!==null?null:X(D,L,O,Y,null);gd(D,O)}return null}function ie(D,L,O,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return D=D.get(O)||null,T(L,D,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case B:return D=D.get(Y.key===null?O:Y.key)||null,R(L,D,Y,de);case H:return D=D.get(Y.key===null?O:Y.key)||null,j(L,D,Y,de);case ge:var _e=Y._init;return ie(D,L,O,_e(Y._payload),de)}if(Jr(Y)||oe(Y))return D=D.get(O)||null,X(L,D,Y,de,null);gd(L,Y)}return null}function ce(D,L,O,Y){for(var de=null,_e=null,Se=L,Ee=L=0,Ft=null;Se!==null&&Ee<O.length;Ee++){Se.index>Ee?(Ft=Se,Se=null):Ft=Se.sibling;var Be=G(D,Se,O[Ee],Y);if(Be===null){Se===null&&(Se=Ft);break}n&&Se&&Be.alternate===null&&s(D,Se),L=v(Be,L,Ee),_e===null?de=Be:_e.sibling=Be,_e=Be,Se=Ft}if(Ee===O.length)return o(D,Se),st&&so(D,Ee),de;if(Se===null){for(;Ee<O.length;Ee++)Se=q(D,O[Ee],Y),Se!==null&&(L=v(Se,L,Ee),_e===null?de=Se:_e.sibling=Se,_e=Se);return st&&so(D,Ee),de}for(Se=h(D,Se);Ee<O.length;Ee++)Ft=ie(Se,D,Ee,O[Ee],Y),Ft!==null&&(n&&Ft.alternate!==null&&Se.delete(Ft.key===null?Ee:Ft.key),L=v(Ft,L,Ee),_e===null?de=Ft:_e.sibling=Ft,_e=Ft);return n&&Se.forEach(function(mr){return s(D,mr)}),st&&so(D,Ee),de}function ue(D,L,O,Y){var de=oe(O);if(typeof de!="function")throw Error(t(150));if(O=de.call(O),O==null)throw Error(t(151));for(var _e=de=null,Se=L,Ee=L=0,Ft=null,Be=O.next();Se!==null&&!Be.done;Ee++,Be=O.next()){Se.index>Ee?(Ft=Se,Se=null):Ft=Se.sibling;var mr=G(D,Se,Be.value,Y);if(mr===null){Se===null&&(Se=Ft);break}n&&Se&&mr.alternate===null&&s(D,Se),L=v(mr,L,Ee),_e===null?de=mr:_e.sibling=mr,_e=mr,Se=Ft}if(Be.done)return o(D,Se),st&&so(D,Ee),de;if(Se===null){for(;!Be.done;Ee++,Be=O.next())Be=q(D,Be.value,Y),Be!==null&&(L=v(Be,L,Ee),_e===null?de=Be:_e.sibling=Be,_e=Be);return st&&so(D,Ee),de}for(Se=h(D,Se);!Be.done;Ee++,Be=O.next())Be=ie(Se,D,Ee,Be.value,Y),Be!==null&&(n&&Be.alternate!==null&&Se.delete(Be.key===null?Ee:Be.key),L=v(Be,L,Ee),_e===null?de=Be:_e.sibling=Be,_e=Be);return n&&Se.forEach(function(BE){return s(D,BE)}),st&&so(D,Ee),de}function vt(D,L,O,Y){if(typeof O=="object"&&O!==null&&O.type===$&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case B:e:{for(var de=O.key,_e=L;_e!==null;){if(_e.key===de){if(de=O.type,de===$){if(_e.tag===7){o(D,_e.sibling),L=g(_e,O.props.children),L.return=D,D=L;break e}}else if(_e.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ge&&p0(de)===_e.type){o(D,_e.sibling),L=g(_e,O.props),L.ref=Ic(D,_e,O),L.return=D,D=L;break e}o(D,_e);break}else s(D,_e);_e=_e.sibling}O.type===$?(L=fo(O.props.children,D.mode,Y,O.key),L.return=D,D=L):(Y=zd(O.type,O.key,O.props,null,D.mode,Y),Y.ref=Ic(D,L,O),Y.return=D,D=Y)}return S(D);case H:e:{for(_e=O.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===O.containerInfo&&L.stateNode.implementation===O.implementation){o(D,L.sibling),L=g(L,O.children||[]),L.return=D,D=L;break e}else{o(D,L);break}else s(D,L);L=L.sibling}L=Yg(O,D.mode,Y),L.return=D,D=L}return S(D);case ge:return _e=O._init,vt(D,L,_e(O._payload),Y)}if(Jr(O))return ce(D,L,O,Y);if(oe(O))return ue(D,L,O,Y);gd(D,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,L!==null&&L.tag===6?(o(D,L.sibling),L=g(L,O),L.return=D,D=L):(o(D,L),L=qg(O,D.mode,Y),L.return=D,D=L),S(D)):o(D,L)}return vt}var Ba=g0(!0),m0=g0(!1),md=rr(null),vd=null,Ua=null,sg=null;function rg(){sg=Ua=vd=null}function og(n){var s=md.current;tt(md),n._currentValue=s}function ag(n,s,o){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===o)break;n=n.return}}function Va(n,s){vd=n,sg=Ua=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(wn=!0),n.firstContext=null)}function qn(n){var s=n._currentValue;if(sg!==n)if(n={context:n,memoizedValue:s,next:null},Ua===null){if(vd===null)throw Error(t(308));Ua=n,vd.dependencies={lanes:0,firstContext:n}}else Ua=Ua.next=n;return s}var ro=null;function lg(n){ro===null?ro=[n]:ro.push(n)}function v0(n,s,o,h){var g=s.interleaved;return g===null?(o.next=o,lg(s)):(o.next=g.next,g.next=o),s.interleaved=o,hs(n,h)}function hs(n,s){n.lanes|=s;var o=n.alternate;for(o!==null&&(o.lanes|=s),o=n,n=n.return;n!==null;)n.childLanes|=s,o=n.alternate,o!==null&&(o.childLanes|=s),o=n,n=n.return;return o.tag===3?o.stateNode:null}var lr=!1;function cg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y0(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ds(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function cr(n,s,o){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,He&2){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,hs(n,o)}return g=h.interleaved,g===null?(s.next=s,lg(h)):(s.next=g.next,g.next=s),h.interleaved=s,hs(n,o)}function yd(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,o|=h,s.lanes=o,xp(n,o)}}function w0(n,s){var o=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var g=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var S={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};v===null?g=v=S:v=v.next=S,o=o.next}while(o!==null);v===null?g=v=s:v=v.next=s}else g=v=s;o={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:h.shared,effects:h.effects},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}function wd(n,s,o,h){var g=n.updateQueue;lr=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var R=T,j=R.next;R.next=null,S===null?v=j:S.next=j,S=R;var X=n.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==S&&(T===null?X.firstBaseUpdate=j:T.next=j,X.lastBaseUpdate=R))}if(v!==null){var q=g.baseState;S=0,X=j=R=null,T=v;do{var G=T.lane,ie=T.eventTime;if((h&G)===G){X!==null&&(X=X.next={eventTime:ie,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ce=n,ue=T;switch(G=s,ie=o,ue.tag){case 1:if(ce=ue.payload,typeof ce=="function"){q=ce.call(ie,q,G);break e}q=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=ue.payload,G=typeof ce=="function"?ce.call(ie,q,G):ce,G==null)break e;q=J({},q,G);break e;case 2:lr=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,G=g.effects,G===null?g.effects=[T]:G.push(T))}else ie={eventTime:ie,lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(j=X=ie,R=q):X=X.next=ie,S|=G;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;G=T,T=G.next,G.next=null,g.lastBaseUpdate=G,g.shared.pending=null}}while(!0);if(X===null&&(R=q),g.baseState=R,g.firstBaseUpdate=j,g.lastBaseUpdate=X,s=g.shared.interleaved,s!==null){g=s;do S|=g.lane,g=g.next;while(g!==s)}else v===null&&(g.shared.lanes=0);lo|=S,n.lanes=S,n.memoizedState=q}}function A0(n,s,o){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],g=h.callback;if(g!==null){if(h.callback=null,h=o,typeof g!="function")throw Error(t(191,g));g.call(h)}}}var Nc={},Oi=rr(Nc),Fc=rr(Nc),Dc=rr(Nc);function oo(n){if(n===Nc)throw Error(t(174));return n}function ug(n,s){switch(Je(Dc,s),Je(Fc,n),Je(Oi,Nc),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ni(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Ni(s,n)}tt(Oi),Je(Oi,s)}function $a(){tt(Oi),tt(Fc),tt(Dc)}function _0(n){oo(Dc.current);var s=oo(Oi.current),o=Ni(s,n.type);s!==o&&(Je(Fc,n),Je(Oi,o))}function hg(n){Fc.current===n&&(tt(Oi),tt(Fc))}var ot=rr(0);function Ad(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var dg=[];function fg(){for(var n=0;n<dg.length;n++)dg[n]._workInProgressVersionPrimary=null;dg.length=0}var _d=N.ReactCurrentDispatcher,pg=N.ReactCurrentBatchConfig,ao=0,at=null,bt=null,It=null,Sd=!1,Oc=!1,jc=0,cE=0;function Kt(){throw Error(t(321))}function gg(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!ui(n[o],s[o]))return!1;return!0}function mg(n,s,o,h,g,v){if(ao=v,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,_d.current=n===null||n.memoizedState===null?fE:pE,n=o(h,g),Oc){v=0;do{if(Oc=!1,jc=0,25<=v)throw Error(t(301));v+=1,It=bt=null,s.updateQueue=null,_d.current=gE,n=o(h,g)}while(Oc)}if(_d.current=bd,s=bt!==null&&bt.next!==null,ao=0,It=bt=at=null,Sd=!1,s)throw Error(t(300));return n}function vg(){var n=jc!==0;return jc=0,n}function ji(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?at.memoizedState=It=n:It=It.next=n,It}function Yn(){if(bt===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=bt.next;var s=It===null?at.memoizedState:It.next;if(s!==null)It=s,bt=n;else{if(n===null)throw Error(t(310));bt=n,n={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},It===null?at.memoizedState=It=n:It=It.next=n}return It}function zc(n,s){return typeof s=="function"?s(n):s}function yg(n){var s=Yn(),o=s.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var h=bt,g=h.baseQueue,v=o.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}h.baseQueue=g=v,o.pending=null}if(g!==null){v=g.next,h=h.baseState;var T=S=null,R=null,j=v;do{var X=j.lane;if((ao&X)===X)R!==null&&(R=R.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),h=j.hasEagerState?j.eagerState:n(h,j.action);else{var q={lane:X,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};R===null?(T=R=q,S=h):R=R.next=q,at.lanes|=X,lo|=X}j=j.next}while(j!==null&&j!==v);R===null?S=h:R.next=T,ui(h,s.memoizedState)||(wn=!0),s.memoizedState=h,s.baseState=S,s.baseQueue=R,o.lastRenderedState=h}if(n=o.interleaved,n!==null){g=n;do v=g.lane,at.lanes|=v,lo|=v,g=g.next;while(g!==n)}else g===null&&(o.lanes=0);return[s.memoizedState,o.dispatch]}function wg(n){var s=Yn(),o=s.queue;if(o===null)throw Error(t(311));o.lastRenderedReducer=n;var h=o.dispatch,g=o.pending,v=s.memoizedState;if(g!==null){o.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);ui(v,s.memoizedState)||(wn=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),o.lastRenderedState=v}return[v,h]}function S0(){}function x0(n,s){var o=at,h=Yn(),g=s(),v=!ui(h.memoizedState,g);if(v&&(h.memoizedState=g,wn=!0),h=h.queue,Ag(C0.bind(null,o,h,n),[n]),h.getSnapshot!==s||v||It!==null&&It.memoizedState.tag&1){if(o.flags|=2048,Hc(9,b0.bind(null,o,h,g,s),void 0,null),Nt===null)throw Error(t(349));ao&30||E0(o,s,g)}return g}function E0(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function b0(n,s,o,h){s.value=o,s.getSnapshot=h,k0(s)&&T0(n)}function C0(n,s,o){return o(function(){k0(s)&&T0(n)})}function k0(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!ui(n,o)}catch{return!0}}function T0(n){var s=hs(n,1);s!==null&&gi(s,n,1,-1)}function P0(n){var s=ji();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zc,lastRenderedState:n},s.queue=n,n=n.dispatch=dE.bind(null,at,n),[s.memoizedState,n]}function Hc(n,s,o,h){return n={tag:n,create:s,destroy:o,deps:h,next:null},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.lastEffect=n.next=n):(o=s.lastEffect,o===null?s.lastEffect=n.next=n:(h=o.next,o.next=n,n.next=h,s.lastEffect=n)),n}function R0(){return Yn().memoizedState}function xd(n,s,o,h){var g=ji();at.flags|=n,g.memoizedState=Hc(1|s,o,void 0,h===void 0?null:h)}function Ed(n,s,o,h){var g=Yn();h=h===void 0?null:h;var v=void 0;if(bt!==null){var S=bt.memoizedState;if(v=S.destroy,h!==null&&gg(h,S.deps)){g.memoizedState=Hc(s,o,v,h);return}}at.flags|=n,g.memoizedState=Hc(1|s,o,v,h)}function L0(n,s){return xd(8390656,8,n,s)}function Ag(n,s){return Ed(2048,8,n,s)}function M0(n,s){return Ed(4,2,n,s)}function I0(n,s){return Ed(4,4,n,s)}function N0(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function F0(n,s,o){return o=o!=null?o.concat([n]):null,Ed(4,4,N0.bind(null,s,n),o)}function _g(){}function D0(n,s){var o=Yn();s=s===void 0?null:s;var h=o.memoizedState;return h!==null&&s!==null&&gg(s,h[1])?h[0]:(o.memoizedState=[n,s],n)}function O0(n,s){var o=Yn();s=s===void 0?null:s;var h=o.memoizedState;return h!==null&&s!==null&&gg(s,h[1])?h[0]:(n=n(),o.memoizedState=[n,s],n)}function j0(n,s,o){return ao&21?(ui(o,s)||(o=py(),at.lanes|=o,lo|=o,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,wn=!0),n.memoizedState=o)}function uE(n,s){var o=We;We=o!==0&&4>o?o:4,n(!0);var h=pg.transition;pg.transition={};try{n(!1),s()}finally{We=o,pg.transition=h}}function z0(){return Yn().memoizedState}function hE(n,s,o){var h=fr(n);if(o={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null},H0(n))B0(s,o);else if(o=v0(n,s,o,h),o!==null){var g=cn();gi(o,n,h,g),U0(o,s,h)}}function dE(n,s,o){var h=fr(n),g={lane:h,action:o,hasEagerState:!1,eagerState:null,next:null};if(H0(n))B0(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,T=v(S,o);if(g.hasEagerState=!0,g.eagerState=T,ui(T,S)){var R=s.interleaved;R===null?(g.next=g,lg(s)):(g.next=R.next,R.next=g),s.interleaved=g;return}}catch{}finally{}o=v0(n,s,g,h),o!==null&&(g=cn(),gi(o,n,h,g),U0(o,s,h))}}function H0(n){var s=n.alternate;return n===at||s!==null&&s===at}function B0(n,s){Oc=Sd=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function U0(n,s,o){if(o&4194240){var h=s.lanes;h&=n.pendingLanes,o|=h,s.lanes=o,xp(n,o)}}var bd={readContext:qn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},fE={readContext:qn,useCallback:function(n,s){return ji().memoizedState=[n,s===void 0?null:s],n},useContext:qn,useEffect:L0,useImperativeHandle:function(n,s,o){return o=o!=null?o.concat([n]):null,xd(4194308,4,N0.bind(null,s,n),o)},useLayoutEffect:function(n,s){return xd(4194308,4,n,s)},useInsertionEffect:function(n,s){return xd(4,2,n,s)},useMemo:function(n,s){var o=ji();return s=s===void 0?null:s,n=n(),o.memoizedState=[n,s],n},useReducer:function(n,s,o){var h=ji();return s=o!==void 0?o(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=hE.bind(null,at,n),[h.memoizedState,n]},useRef:function(n){var s=ji();return n={current:n},s.memoizedState=n},useState:P0,useDebugValue:_g,useDeferredValue:function(n){return ji().memoizedState=n},useTransition:function(){var n=P0(!1),s=n[0];return n=uE.bind(null,n[1]),ji().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,o){var h=at,g=ji();if(st){if(o===void 0)throw Error(t(407));o=o()}else{if(o=s(),Nt===null)throw Error(t(349));ao&30||E0(h,s,o)}g.memoizedState=o;var v={value:o,getSnapshot:s};return g.queue=v,L0(C0.bind(null,h,v,n),[n]),h.flags|=2048,Hc(9,b0.bind(null,h,v,o,s),void 0,null),o},useId:function(){var n=ji(),s=Nt.identifierPrefix;if(st){var o=us,h=cs;o=(h&~(1<<32-ci(h)-1)).toString(32)+o,s=":"+s+"R"+o,o=jc++,0<o&&(s+="H"+o.toString(32)),s+=":"}else o=cE++,s=":"+s+"r"+o.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},pE={readContext:qn,useCallback:D0,useContext:qn,useEffect:Ag,useImperativeHandle:F0,useInsertionEffect:M0,useLayoutEffect:I0,useMemo:O0,useReducer:yg,useRef:R0,useState:function(){return yg(zc)},useDebugValue:_g,useDeferredValue:function(n){var s=Yn();return j0(s,bt.memoizedState,n)},useTransition:function(){var n=yg(zc)[0],s=Yn().memoizedState;return[n,s]},useMutableSource:S0,useSyncExternalStore:x0,useId:z0,unstable_isNewReconciler:!1},gE={readContext:qn,useCallback:D0,useContext:qn,useEffect:Ag,useImperativeHandle:F0,useInsertionEffect:M0,useLayoutEffect:I0,useMemo:O0,useReducer:wg,useRef:R0,useState:function(){return wg(zc)},useDebugValue:_g,useDeferredValue:function(n){var s=Yn();return bt===null?s.memoizedState=n:j0(s,bt.memoizedState,n)},useTransition:function(){var n=wg(zc)[0],s=Yn().memoizedState;return[n,s]},useMutableSource:S0,useSyncExternalStore:x0,useId:z0,unstable_isNewReconciler:!1};function di(n,s){if(n&&n.defaultProps){s=J({},s),n=n.defaultProps;for(var o in n)s[o]===void 0&&(s[o]=n[o]);return s}return s}function Sg(n,s,o,h){s=n.memoizedState,o=o(h,s),o=o==null?s:J({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Cd={isMounted:function(n){return(n=n._reactInternals)?eo(n)===n:!1},enqueueSetState:function(n,s,o){n=n._reactInternals;var h=cn(),g=fr(n),v=ds(h,g);v.payload=s,o!=null&&(v.callback=o),s=cr(n,v,g),s!==null&&(gi(s,n,g,h),yd(s,n,g))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var h=cn(),g=fr(n),v=ds(h,g);v.tag=1,v.payload=s,o!=null&&(v.callback=o),s=cr(n,v,g),s!==null&&(gi(s,n,g,h),yd(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=cn(),h=fr(n),g=ds(o,h);g.tag=2,s!=null&&(g.callback=s),s=cr(n,g,h),s!==null&&(gi(s,n,h,o),yd(s,n,h))}};function V0(n,s,o,h,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,v,S):s.prototype&&s.prototype.isPureReactComponent?!Cc(o,h)||!Cc(g,v):!0}function $0(n,s,o){var h=!1,g=or,v=s.contextType;return typeof v=="object"&&v!==null?v=qn(v):(g=yn(s)?no:Yt.current,h=s.contextTypes,v=(h=h!=null)?Oa(n,g):or),s=new s(o,v),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Cd,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=v),s}function W0(n,s,o,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,h),s.state!==n&&Cd.enqueueReplaceState(s,s.state,null)}function xg(n,s,o,h){var g=n.stateNode;g.props=o,g.state=n.memoizedState,g.refs={},cg(n);var v=s.contextType;typeof v=="object"&&v!==null?g.context=qn(v):(v=yn(s)?no:Yt.current,g.context=Oa(n,v)),g.state=n.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Sg(n,s,v,o),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Cd.enqueueReplaceState(g,g.state,null),wd(n,o,g,h),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function Wa(n,s){try{var o="",h=s;do o+=ke(h),h=h.return;while(h);var g=o}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:s,stack:g,digest:null}}function Eg(n,s,o){return{value:n,source:null,stack:o??null,digest:s??null}}function bg(n,s){try{console.error(s.value)}catch(o){setTimeout(function(){throw o})}}var mE=typeof WeakMap=="function"?WeakMap:Map;function G0(n,s,o){o=ds(-1,o),o.tag=3,o.payload={element:null};var h=s.value;return o.callback=function(){Id||(Id=!0,Hg=h),bg(n,s)},o}function X0(n,s,o){o=ds(-1,o),o.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var g=s.value;o.payload=function(){return h(g)},o.callback=function(){bg(n,s)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(o.callback=function(){bg(n,s),typeof h!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),o}function q0(n,s,o){var h=n.pingCache;if(h===null){h=n.pingCache=new mE;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(o)||(g.add(o),n=RE.bind(null,n,s,o),s.then(n,n))}function Y0(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function K0(n,s,o,h,g){return n.mode&1?(n.flags|=65536,n.lanes=g,n):(n===s?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(s=ds(-1,1),s.tag=2,cr(o,s,1))),o.lanes|=1),n)}var vE=N.ReactCurrentOwner,wn=!1;function ln(n,s,o,h){s.child=n===null?m0(s,null,o,h):Ba(s,n.child,o,h)}function Q0(n,s,o,h,g){o=o.render;var v=s.ref;return Va(s,g),h=mg(n,s,o,h,v,g),o=vg(),n!==null&&!wn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,fs(n,s,g)):(st&&o&&Zp(s),s.flags|=1,ln(n,s,h,g),s.child)}function J0(n,s,o,h,g){if(n===null){var v=o.type;return typeof v=="function"&&!Xg(v)&&v.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(s.tag=15,s.type=v,Z0(n,s,v,h,g)):(n=zd(o.type,null,h,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!(n.lanes&g)){var S=v.memoizedProps;if(o=o.compare,o=o!==null?o:Cc,o(S,h)&&n.ref===s.ref)return fs(n,s,g)}return s.flags|=1,n=gr(v,h),n.ref=s.ref,n.return=s,s.child=n}function Z0(n,s,o,h,g){if(n!==null){var v=n.memoizedProps;if(Cc(v,h)&&n.ref===s.ref)if(wn=!1,s.pendingProps=h=v,(n.lanes&g)!==0)n.flags&131072&&(wn=!0);else return s.lanes=n.lanes,fs(n,s,g)}return Cg(n,s,o,h,g)}function ew(n,s,o){var h=s.pendingProps,g=h.children,v=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Xa,In),In|=o;else{if(!(o&1073741824))return n=v!==null?v.baseLanes|o:o,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Je(Xa,In),In|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:o,Je(Xa,In),In|=h}else v!==null?(h=v.baseLanes|o,s.memoizedState=null):h=o,Je(Xa,In),In|=h;return ln(n,s,g,o),s.child}function tw(n,s){var o=s.ref;(n===null&&o!==null||n!==null&&n.ref!==o)&&(s.flags|=512,s.flags|=2097152)}function Cg(n,s,o,h,g){var v=yn(o)?no:Yt.current;return v=Oa(s,v),Va(s,g),o=mg(n,s,o,h,v,g),h=vg(),n!==null&&!wn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,fs(n,s,g)):(st&&h&&Zp(s),s.flags|=1,ln(n,s,o,g),s.child)}function nw(n,s,o,h,g){if(yn(o)){var v=!0;ud(s)}else v=!1;if(Va(s,g),s.stateNode===null)Td(n,s),$0(s,o,h),xg(s,o,h,g),h=!0;else if(n===null){var S=s.stateNode,T=s.memoizedProps;S.props=T;var R=S.context,j=o.contextType;typeof j=="object"&&j!==null?j=qn(j):(j=yn(o)?no:Yt.current,j=Oa(s,j));var X=o.getDerivedStateFromProps,q=typeof X=="function"||typeof S.getSnapshotBeforeUpdate=="function";q||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==h||R!==j)&&W0(s,S,h,j),lr=!1;var G=s.memoizedState;S.state=G,wd(s,h,S,g),R=s.memoizedState,T!==h||G!==R||vn.current||lr?(typeof X=="function"&&(Sg(s,o,X,h),R=s.memoizedState),(T=lr||V0(s,o,T,h,G,R,j))?(q||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=R),S.props=h,S.state=R,S.context=j,h=T):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{S=s.stateNode,y0(n,s),T=s.memoizedProps,j=s.type===s.elementType?T:di(s.type,T),S.props=j,q=s.pendingProps,G=S.context,R=o.contextType,typeof R=="object"&&R!==null?R=qn(R):(R=yn(o)?no:Yt.current,R=Oa(s,R));var ie=o.getDerivedStateFromProps;(X=typeof ie=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==q||G!==R)&&W0(s,S,h,R),lr=!1,G=s.memoizedState,S.state=G,wd(s,h,S,g);var ce=s.memoizedState;T!==q||G!==ce||vn.current||lr?(typeof ie=="function"&&(Sg(s,o,ie,h),ce=s.memoizedState),(j=lr||V0(s,o,j,h,G,ce,R)||!1)?(X||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,ce,R),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,ce,R)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ce),S.props=h,S.state=ce,S.context=R,h=j):(typeof S.componentDidUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),h=!1)}return kg(n,s,o,h,v,g)}function kg(n,s,o,h,g,v){tw(n,s);var S=(s.flags&128)!==0;if(!h&&!S)return g&&a0(s,o,!1),fs(n,s,v);h=s.stateNode,vE.current=s;var T=S&&typeof o.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&S?(s.child=Ba(s,n.child,null,v),s.child=Ba(s,null,T,v)):ln(n,s,T,v),s.memoizedState=h.state,g&&a0(s,o,!0),s.child}function iw(n){var s=n.stateNode;s.pendingContext?r0(n,s.pendingContext,s.pendingContext!==s.context):s.context&&r0(n,s.context,!1),ug(n,s.containerInfo)}function sw(n,s,o,h,g){return Ha(),ig(g),s.flags|=256,ln(n,s,o,h),s.child}var Tg={dehydrated:null,treeContext:null,retryLane:0};function Pg(n){return{baseLanes:n,cachePool:null,transitions:null}}function rw(n,s,o){var h=s.pendingProps,g=ot.current,v=!1,S=(s.flags&128)!==0,T;if((T=S)||(T=n!==null&&n.memoizedState===null?!1:(g&2)!==0),T?(v=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Je(ot,g&1),n===null)return ng(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(S=h.children,n=h.fallback,v?(h=s.mode,v=s.child,S={mode:"hidden",children:S},!(h&1)&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Hd(S,h,0,null),n=fo(n,h,o,null),v.return=s,n.return=s,v.sibling=n,s.child=v,s.child.memoizedState=Pg(o),s.memoizedState=Tg,n):Rg(s,S));if(g=n.memoizedState,g!==null&&(T=g.dehydrated,T!==null))return yE(n,s,S,h,T,g,o);if(v){v=h.fallback,S=s.mode,g=n.child,T=g.sibling;var R={mode:"hidden",children:h.children};return!(S&1)&&s.child!==g?(h=s.child,h.childLanes=0,h.pendingProps=R,s.deletions=null):(h=gr(g,R),h.subtreeFlags=g.subtreeFlags&14680064),T!==null?v=gr(T,v):(v=fo(v,S,o,null),v.flags|=2),v.return=s,h.return=s,h.sibling=v,s.child=h,h=v,v=s.child,S=n.child.memoizedState,S=S===null?Pg(o):{baseLanes:S.baseLanes|o,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=n.childLanes&~o,s.memoizedState=Tg,h}return v=n.child,n=v.sibling,h=gr(v,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=o),h.return=s,h.sibling=null,n!==null&&(o=s.deletions,o===null?(s.deletions=[n],s.flags|=16):o.push(n)),s.child=h,s.memoizedState=null,h}function Rg(n,s){return s=Hd({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function kd(n,s,o,h){return h!==null&&ig(h),Ba(s,n.child,null,o),n=Rg(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function yE(n,s,o,h,g,v,S){if(o)return s.flags&256?(s.flags&=-257,h=Eg(Error(t(422))),kd(n,s,S,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(v=h.fallback,g=s.mode,h=Hd({mode:"visible",children:h.children},g,0,null),v=fo(v,g,S,null),v.flags|=2,h.return=s,v.return=s,h.sibling=v,s.child=h,s.mode&1&&Ba(s,n.child,null,S),s.child.memoizedState=Pg(S),s.memoizedState=Tg,v);if(!(s.mode&1))return kd(n,s,S,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var T=h.dgst;return h=T,v=Error(t(419)),h=Eg(v,h,void 0),kd(n,s,S,h)}if(T=(S&n.childLanes)!==0,wn||T){if(h=Nt,h!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(h.suspendedLanes|S)?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,hs(n,g),gi(h,n,g,-1))}return Gg(),h=Eg(Error(t(421))),kd(n,s,S,h)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=LE.bind(null,n),g._reactRetry=s,null):(n=v.treeContext,Mn=sr(g.nextSibling),Ln=s,st=!0,hi=null,n!==null&&(Gn[Xn++]=cs,Gn[Xn++]=us,Gn[Xn++]=io,cs=n.id,us=n.overflow,io=s),s=Rg(s,h.children),s.flags|=4096,s)}function ow(n,s,o){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),ag(n.return,s,o)}function Lg(n,s,o,h,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=o,v.tailMode=g)}function aw(n,s,o){var h=s.pendingProps,g=h.revealOrder,v=h.tail;if(ln(n,s,h.children,o),h=ot.current,h&2)h=h&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ow(n,o,s);else if(n.tag===19)ow(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Je(ot,h),!(s.mode&1))s.memoizedState=null;else switch(g){case"forwards":for(o=s.child,g=null;o!==null;)n=o.alternate,n!==null&&Ad(n)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),Lg(s,!1,g,o,v);break;case"backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Ad(n)===null){s.child=g;break}n=g.sibling,g.sibling=o,o=g,g=n}Lg(s,!0,o,null,v);break;case"together":Lg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Td(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function fs(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),lo|=s.lanes,!(o&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,o=gr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=gr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function wE(n,s,o){switch(s.tag){case 3:iw(s),Ha();break;case 5:_0(s);break;case 1:yn(s.type)&&ud(s);break;case 4:ug(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,g=s.memoizedProps.value;Je(md,h._currentValue),h._currentValue=g;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Je(ot,ot.current&1),s.flags|=128,null):o&s.child.childLanes?rw(n,s,o):(Je(ot,ot.current&1),n=fs(n,s,o),n!==null?n.sibling:null);Je(ot,ot.current&1);break;case 19:if(h=(o&s.childLanes)!==0,n.flags&128){if(h)return aw(n,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Je(ot,ot.current),h)break;return null;case 22:case 23:return s.lanes=0,ew(n,s,o)}return fs(n,s,o)}var lw,Mg,cw,uw;lw=function(n,s){for(var o=s.child;o!==null;){if(o.tag===5||o.tag===6)n.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Mg=function(){},cw=function(n,s,o,h){var g=n.memoizedProps;if(g!==h){n=s.stateNode,oo(Oi.current);var v=null;switch(o){case"input":g=it(n,g),h=it(n,h),v=[];break;case"select":g=J({},g,{value:void 0}),h=J({},h,{value:void 0}),v=[];break;case"textarea":g=cc(n,g),h=cc(n,h),v=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=ad)}dp(o,h);var S;o=null;for(j in g)if(!h.hasOwnProperty(j)&&g.hasOwnProperty(j)&&g[j]!=null)if(j==="style"){var T=g[j];for(S in T)T.hasOwnProperty(S)&&(o||(o={}),o[S]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(r.hasOwnProperty(j)?v||(v=[]):(v=v||[]).push(j,null));for(j in h){var R=h[j];if(T=g!=null?g[j]:void 0,h.hasOwnProperty(j)&&R!==T&&(R!=null||T!=null))if(j==="style")if(T){for(S in T)!T.hasOwnProperty(S)||R&&R.hasOwnProperty(S)||(o||(o={}),o[S]="");for(S in R)R.hasOwnProperty(S)&&T[S]!==R[S]&&(o||(o={}),o[S]=R[S])}else o||(v||(v=[]),v.push(j,o)),o=R;else j==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(v=v||[]).push(j,R)):j==="children"?typeof R!="string"&&typeof R!="number"||(v=v||[]).push(j,""+R):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(r.hasOwnProperty(j)?(R!=null&&j==="onScroll"&&et("scroll",n),v||T===R||(v=[])):(v=v||[]).push(j,R))}o&&(v=v||[]).push("style",o);var j=v;(s.updateQueue=j)&&(s.flags|=4)}},uw=function(n,s,o,h){o!==h&&(s.flags|=4)};function Bc(n,s){if(!st)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Qt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,h=0;if(s)for(var g=n.child;g!==null;)o|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)o|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=o,s}function AE(n,s,o){var h=s.pendingProps;switch(eg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return yn(s.type)&&cd(),Qt(s),null;case 3:return h=s.stateNode,$a(),tt(vn),tt(Yt),fg(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(pd(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,hi!==null&&(Vg(hi),hi=null))),Mg(n,s),Qt(s),null;case 5:hg(s);var g=oo(Dc.current);if(o=s.type,n!==null&&s.stateNode!=null)cw(n,s,o,h,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Qt(s),null}if(n=oo(Oi.current),pd(s)){h=s.stateNode,o=s.type;var v=s.memoizedProps;switch(h[Di]=s,h[Lc]=v,n=(s.mode&1)!==0,o){case"dialog":et("cancel",h),et("close",h);break;case"iframe":case"object":case"embed":et("load",h);break;case"video":case"audio":for(g=0;g<Tc.length;g++)et(Tc[g],h);break;case"source":et("error",h);break;case"img":case"image":case"link":et("error",h),et("load",h);break;case"details":et("toggle",h);break;case"input":Et(h,v),et("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},et("invalid",h);break;case"textarea":Dh(h,v),et("invalid",h)}dp(o,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var T=v[S];S==="children"?typeof T=="string"?h.textContent!==T&&(v.suppressHydrationWarning!==!0&&od(h.textContent,T,n),g=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&od(h.textContent,T,n),g=["children",""+T]):r.hasOwnProperty(S)&&T!=null&&S==="onScroll"&&et("scroll",h)}switch(o){case"input":Mi(h),Qs(h,v,!0);break;case"textarea":Mi(h),jh(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=ad)}h=g,s.updateQueue=h,h!==null&&(s.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=zh(o)),n==="http://www.w3.org/1999/xhtml"?o==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=S.createElement(o,{is:h.is}):(n=S.createElement(o),o==="select"&&(S=n,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):n=S.createElementNS(n,o),n[Di]=s,n[Lc]=h,lw(n,s,!1,!1),s.stateNode=n;e:{switch(S=fp(o,h),o){case"dialog":et("cancel",n),et("close",n),g=h;break;case"iframe":case"object":case"embed":et("load",n),g=h;break;case"video":case"audio":for(g=0;g<Tc.length;g++)et(Tc[g],n);g=h;break;case"source":et("error",n),g=h;break;case"img":case"image":case"link":et("error",n),et("load",n),g=h;break;case"details":et("toggle",n),g=h;break;case"input":Et(n,h),g=it(n,h),et("invalid",n);break;case"option":g=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},g=J({},h,{value:void 0}),et("invalid",n);break;case"textarea":Dh(n,h),g=cc(n,h),et("invalid",n);break;default:g=h}dp(o,g),T=g;for(v in T)if(T.hasOwnProperty(v)){var R=T[v];v==="style"?Zv(n,R):v==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Zr(n,R)):v==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&os(n,R):typeof R=="number"&&os(n,""+R):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(r.hasOwnProperty(v)?R!=null&&v==="onScroll"&&et("scroll",n):R!=null&&F(n,v,R,S))}switch(o){case"input":Mi(n),Qs(n,h,!1);break;case"textarea":Mi(n),jh(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Le(h.value));break;case"select":n.multiple=!!h.multiple,v=h.value,v!=null?li(n,!!h.multiple,v,!1):h.defaultValue!=null&&li(n,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=ad)}switch(o){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Qt(s),null;case 6:if(n&&s.stateNode!=null)uw(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(o=oo(Dc.current),oo(Oi.current),pd(s)){if(h=s.stateNode,o=s.memoizedProps,h[Di]=s,(v=h.nodeValue!==o)&&(n=Ln,n!==null))switch(n.tag){case 3:od(h.nodeValue,o,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&od(h.nodeValue,o,(n.mode&1)!==0)}v&&(s.flags|=4)}else h=(o.nodeType===9?o:o.ownerDocument).createTextNode(h),h[Di]=s,s.stateNode=h}return Qt(s),null;case 13:if(tt(ot),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(st&&Mn!==null&&s.mode&1&&!(s.flags&128))f0(),Ha(),s.flags|=98560,v=!1;else if(v=pd(s),h!==null&&h.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Di]=s}else Ha(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Qt(s),v=!1}else hi!==null&&(Vg(hi),hi=null),v=!0;if(!v)return s.flags&65536?s:null}return s.flags&128?(s.lanes=o,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(n===null||ot.current&1?Ct===0&&(Ct=3):Gg())),s.updateQueue!==null&&(s.flags|=4),Qt(s),null);case 4:return $a(),Mg(n,s),n===null&&Pc(s.stateNode.containerInfo),Qt(s),null;case 10:return og(s.type._context),Qt(s),null;case 17:return yn(s.type)&&cd(),Qt(s),null;case 19:if(tt(ot),v=s.memoizedState,v===null)return Qt(s),null;if(h=(s.flags&128)!==0,S=v.rendering,S===null)if(h)Bc(v,!1);else{if(Ct!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(S=Ad(n),S!==null){for(s.flags|=128,Bc(v,!1),h=S.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=o,o=s.child;o!==null;)v=o,n=h,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,n=S.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;return Je(ot,ot.current&1|2),s.child}n=n.sibling}v.tail!==null&&mt()>qa&&(s.flags|=128,h=!0,Bc(v,!1),s.lanes=4194304)}else{if(!h)if(n=Ad(S),n!==null){if(s.flags|=128,h=!0,o=n.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),Bc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!st)return Qt(s),null}else 2*mt()-v.renderingStartTime>qa&&o!==1073741824&&(s.flags|=128,h=!0,Bc(v,!1),s.lanes=4194304);v.isBackwards?(S.sibling=s.child,s.child=S):(o=v.last,o!==null?o.sibling=S:s.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=mt(),s.sibling=null,o=ot.current,Je(ot,h?o&1|2:o&1),s):(Qt(s),null);case 22:case 23:return Wg(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?In&1073741824&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function _E(n,s){switch(eg(s),s.tag){case 1:return yn(s.type)&&cd(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return $a(),tt(vn),tt(Yt),fg(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return hg(s),null;case 13:if(tt(ot),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ha()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(ot),null;case 4:return $a(),null;case 10:return og(s.type._context),null;case 22:case 23:return Wg(),null;case 24:return null;default:return null}}var Pd=!1,Jt=!1,SE=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Ga(n,s){var o=n.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(h){dt(n,s,h)}else o.current=null}function Ig(n,s,o){try{o()}catch(h){dt(n,s,h)}}var hw=!1;function xE(n,s){if(Wp=Yh,n=Vy(),Op(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var g=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break e}var S=0,T=-1,R=-1,j=0,X=0,q=n,G=null;t:for(;;){for(var ie;q!==o||g!==0&&q.nodeType!==3||(T=S+g),q!==v||h!==0&&q.nodeType!==3||(R=S+h),q.nodeType===3&&(S+=q.nodeValue.length),(ie=q.firstChild)!==null;)G=q,q=ie;for(;;){if(q===n)break t;if(G===o&&++j===g&&(T=S),G===v&&++X===h&&(R=S),(ie=q.nextSibling)!==null)break;q=G,G=q.parentNode}q=ie}o=T===-1||R===-1?null:{start:T,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Gp={focusedElem:n,selectionRange:o},Yh=!1,ae=s;ae!==null;)if(s=ae,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ae=n;else for(;ae!==null;){s=ae;try{var ce=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var ue=ce.memoizedProps,vt=ce.memoizedState,D=s.stateNode,L=D.getSnapshotBeforeUpdate(s.elementType===s.type?ue:di(s.type,ue),vt);D.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var O=s.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Y){dt(s,s.return,Y)}if(n=s.sibling,n!==null){n.return=s.return,ae=n;break}ae=s.return}return ce=hw,hw=!1,ce}function Uc(n,s,o){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&n)===n){var v=g.destroy;g.destroy=void 0,v!==void 0&&Ig(s,o,v)}g=g.next}while(g!==h)}}function Rd(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&n)===n){var h=o.create;o.destroy=h()}o=o.next}while(o!==s)}}function Ng(n){var s=n.ref;if(s!==null){var o=n.stateNode;switch(n.tag){case 5:n=o;break;default:n=o}typeof s=="function"?s(n):s.current=n}}function dw(n){var s=n.alternate;s!==null&&(n.alternate=null,dw(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Di],delete s[Lc],delete s[Kp],delete s[rE],delete s[oE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function fw(n){return n.tag===5||n.tag===3||n.tag===4}function pw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fw(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fg(n,s,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?o.nodeType===8?o.parentNode.insertBefore(n,s):o.insertBefore(n,s):(o.nodeType===8?(s=o.parentNode,s.insertBefore(n,o)):(s=o,s.appendChild(n)),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ad));else if(h!==4&&(n=n.child,n!==null))for(Fg(n,s,o),n=n.sibling;n!==null;)Fg(n,s,o),n=n.sibling}function Dg(n,s,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Dg(n,s,o),n=n.sibling;n!==null;)Dg(n,s,o),n=n.sibling}var Ut=null,fi=!1;function ur(n,s,o){for(o=o.child;o!==null;)gw(n,s,o),o=o.sibling}function gw(n,s,o){if(Fi&&typeof Fi.onCommitFiberUnmount=="function")try{Fi.onCommitFiberUnmount(Vh,o)}catch{}switch(o.tag){case 5:Jt||Ga(o,s);case 6:var h=Ut,g=fi;Ut=null,ur(n,s,o),Ut=h,fi=g,Ut!==null&&(fi?(n=Ut,o=o.stateNode,n.nodeType===8?n.parentNode.removeChild(o):n.removeChild(o)):Ut.removeChild(o.stateNode));break;case 18:Ut!==null&&(fi?(n=Ut,o=o.stateNode,n.nodeType===8?Yp(n.parentNode,o):n.nodeType===1&&Yp(n,o),Ac(n)):Yp(Ut,o.stateNode));break;case 4:h=Ut,g=fi,Ut=o.stateNode.containerInfo,fi=!0,ur(n,s,o),Ut=h,fi=g;break;case 0:case 11:case 14:case 15:if(!Jt&&(h=o.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&(v&2||v&4)&&Ig(o,s,S),g=g.next}while(g!==h)}ur(n,s,o);break;case 1:if(!Jt&&(Ga(o,s),h=o.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=o.memoizedProps,h.state=o.memoizedState,h.componentWillUnmount()}catch(T){dt(o,s,T)}ur(n,s,o);break;case 21:ur(n,s,o);break;case 22:o.mode&1?(Jt=(h=Jt)||o.memoizedState!==null,ur(n,s,o),Jt=h):ur(n,s,o);break;default:ur(n,s,o)}}function mw(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var o=n.stateNode;o===null&&(o=n.stateNode=new SE),s.forEach(function(h){var g=ME.bind(null,n,h);o.has(h)||(o.add(h),h.then(g,g))})}}function pi(n,s){var o=s.deletions;if(o!==null)for(var h=0;h<o.length;h++){var g=o[h];try{var v=n,S=s,T=S;e:for(;T!==null;){switch(T.tag){case 5:Ut=T.stateNode,fi=!1;break e;case 3:Ut=T.stateNode.containerInfo,fi=!0;break e;case 4:Ut=T.stateNode.containerInfo,fi=!0;break e}T=T.return}if(Ut===null)throw Error(t(160));gw(v,S,g),Ut=null,fi=!1;var R=g.alternate;R!==null&&(R.return=null),g.return=null}catch(j){dt(g,s,j)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)vw(s,n),s=s.sibling}function vw(n,s){var o=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(pi(s,n),zi(n),h&4){try{Uc(3,n,n.return),Rd(3,n)}catch(ue){dt(n,n.return,ue)}try{Uc(5,n,n.return)}catch(ue){dt(n,n.return,ue)}}break;case 1:pi(s,n),zi(n),h&512&&o!==null&&Ga(o,o.return);break;case 5:if(pi(s,n),zi(n),h&512&&o!==null&&Ga(o,o.return),n.flags&32){var g=n.stateNode;try{os(g,"")}catch(ue){dt(n,n.return,ue)}}if(h&4&&(g=n.stateNode,g!=null)){var v=n.memoizedProps,S=o!==null?o.memoizedProps:v,T=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&gt(g,v),fp(T,S);var j=fp(T,v);for(S=0;S<R.length;S+=2){var X=R[S],q=R[S+1];X==="style"?Zv(g,q):X==="dangerouslySetInnerHTML"?Zr(g,q):X==="children"?os(g,q):F(g,X,q,j)}switch(T){case"input":Ii(g,v);break;case"textarea":Oh(g,v);break;case"select":var G=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var ie=v.value;ie!=null?li(g,!!v.multiple,ie,!1):G!==!!v.multiple&&(v.defaultValue!=null?li(g,!!v.multiple,v.defaultValue,!0):li(g,!!v.multiple,v.multiple?[]:"",!1))}g[Lc]=v}catch(ue){dt(n,n.return,ue)}}break;case 6:if(pi(s,n),zi(n),h&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,v=n.memoizedProps;try{g.nodeValue=v}catch(ue){dt(n,n.return,ue)}}break;case 3:if(pi(s,n),zi(n),h&4&&o!==null&&o.memoizedState.isDehydrated)try{Ac(s.containerInfo)}catch(ue){dt(n,n.return,ue)}break;case 4:pi(s,n),zi(n);break;case 13:pi(s,n),zi(n),g=n.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(zg=mt())),h&4&&mw(n);break;case 22:if(X=o!==null&&o.memoizedState!==null,n.mode&1?(Jt=(j=Jt)||X,pi(s,n),Jt=j):pi(s,n),zi(n),h&8192){if(j=n.memoizedState!==null,(n.stateNode.isHidden=j)&&!X&&n.mode&1)for(ae=n,X=n.child;X!==null;){for(q=ae=X;ae!==null;){switch(G=ae,ie=G.child,G.tag){case 0:case 11:case 14:case 15:Uc(4,G,G.return);break;case 1:Ga(G,G.return);var ce=G.stateNode;if(typeof ce.componentWillUnmount=="function"){h=G,o=G.return;try{s=h,ce.props=s.memoizedProps,ce.state=s.memoizedState,ce.componentWillUnmount()}catch(ue){dt(h,o,ue)}}break;case 5:Ga(G,G.return);break;case 22:if(G.memoizedState!==null){Aw(q);continue}}ie!==null?(ie.return=G,ae=ie):Aw(q)}X=X.sibling}e:for(X=null,q=n;;){if(q.tag===5){if(X===null){X=q;try{g=q.stateNode,j?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=q.stateNode,R=q.memoizedProps.style,S=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=Jv("display",S))}catch(ue){dt(n,n.return,ue)}}}else if(q.tag===6){if(X===null)try{q.stateNode.nodeValue=j?"":q.memoizedProps}catch(ue){dt(n,n.return,ue)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===n)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===n)break e;for(;q.sibling===null;){if(q.return===null||q.return===n)break e;X===q&&(X=null),q=q.return}X===q&&(X=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:pi(s,n),zi(n),h&4&&mw(n);break;case 21:break;default:pi(s,n),zi(n)}}function zi(n){var s=n.flags;if(s&2){try{e:{for(var o=n.return;o!==null;){if(fw(o)){var h=o;break e}o=o.return}throw Error(t(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(os(g,""),h.flags&=-33);var v=pw(n);Dg(n,v,g);break;case 3:case 4:var S=h.stateNode.containerInfo,T=pw(n);Fg(n,T,S);break;default:throw Error(t(161))}}catch(R){dt(n,n.return,R)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function EE(n,s,o){ae=n,yw(n)}function yw(n,s,o){for(var h=(n.mode&1)!==0;ae!==null;){var g=ae,v=g.child;if(g.tag===22&&h){var S=g.memoizedState!==null||Pd;if(!S){var T=g.alternate,R=T!==null&&T.memoizedState!==null||Jt;T=Pd;var j=Jt;if(Pd=S,(Jt=R)&&!j)for(ae=g;ae!==null;)S=ae,R=S.child,S.tag===22&&S.memoizedState!==null?_w(g):R!==null?(R.return=S,ae=R):_w(g);for(;v!==null;)ae=v,yw(v),v=v.sibling;ae=g,Pd=T,Jt=j}ww(n)}else g.subtreeFlags&8772&&v!==null?(v.return=g,ae=v):ww(n)}}function ww(n){for(;ae!==null;){var s=ae;if(s.flags&8772){var o=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Jt||Rd(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Jt)if(o===null)h.componentDidMount();else{var g=s.elementType===s.type?o.memoizedProps:di(s.type,o.memoizedProps);h.componentDidUpdate(g,o.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&A0(s,v,h);break;case 3:var S=s.updateQueue;if(S!==null){if(o=null,s.child!==null)switch(s.child.tag){case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}A0(s,S,o)}break;case 5:var T=s.stateNode;if(o===null&&s.flags&4){o=T;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var j=s.alternate;if(j!==null){var X=j.memoizedState;if(X!==null){var q=X.dehydrated;q!==null&&Ac(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||s.flags&512&&Ng(s)}catch(G){dt(s,s.return,G)}}if(s===n){ae=null;break}if(o=s.sibling,o!==null){o.return=s.return,ae=o;break}ae=s.return}}function Aw(n){for(;ae!==null;){var s=ae;if(s===n){ae=null;break}var o=s.sibling;if(o!==null){o.return=s.return,ae=o;break}ae=s.return}}function _w(n){for(;ae!==null;){var s=ae;try{switch(s.tag){case 0:case 11:case 15:var o=s.return;try{Rd(4,s)}catch(R){dt(s,o,R)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var g=s.return;try{h.componentDidMount()}catch(R){dt(s,g,R)}}var v=s.return;try{Ng(s)}catch(R){dt(s,v,R)}break;case 5:var S=s.return;try{Ng(s)}catch(R){dt(s,S,R)}}}catch(R){dt(s,s.return,R)}if(s===n){ae=null;break}var T=s.sibling;if(T!==null){T.return=s.return,ae=T;break}ae=s.return}}var bE=Math.ceil,Ld=N.ReactCurrentDispatcher,Og=N.ReactCurrentOwner,Kn=N.ReactCurrentBatchConfig,He=0,Nt=null,At=null,Vt=0,In=0,Xa=rr(0),Ct=0,Vc=null,lo=0,Md=0,jg=0,$c=null,An=null,zg=0,qa=1/0,ps=null,Id=!1,Hg=null,hr=null,Nd=!1,dr=null,Fd=0,Wc=0,Bg=null,Dd=-1,Od=0;function cn(){return He&6?mt():Dd!==-1?Dd:Dd=mt()}function fr(n){return n.mode&1?He&2&&Vt!==0?Vt&-Vt:lE.transition!==null?(Od===0&&(Od=py()),Od):(n=We,n!==0||(n=window.event,n=n===void 0?16:xy(n.type)),n):1}function gi(n,s,o,h){if(50<Wc)throw Wc=0,Bg=null,Error(t(185));gc(n,o,h),(!(He&2)||n!==Nt)&&(n===Nt&&(!(He&2)&&(Md|=o),Ct===4&&pr(n,Vt)),_n(n,h),o===1&&He===0&&!(s.mode&1)&&(qa=mt()+500,hd&&ar()))}function _n(n,s){var o=n.callbackNode;lx(n,s);var h=Gh(n,n===Nt?Vt:0);if(h===0)o!==null&&hy(o),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(o!=null&&hy(o),s===1)n.tag===0?aE(xw.bind(null,n)):l0(xw.bind(null,n)),iE(function(){!(He&6)&&ar()}),o=null;else{switch(gy(h)){case 1:o=Ap;break;case 4:o=dy;break;case 16:o=Uh;break;case 536870912:o=fy;break;default:o=Uh}o=Lw(o,Sw.bind(null,n))}n.callbackPriority=s,n.callbackNode=o}}function Sw(n,s){if(Dd=-1,Od=0,He&6)throw Error(t(327));var o=n.callbackNode;if(Ya()&&n.callbackNode!==o)return null;var h=Gh(n,n===Nt?Vt:0);if(h===0)return null;if(h&30||h&n.expiredLanes||s)s=jd(n,h);else{s=h;var g=He;He|=2;var v=bw();(Nt!==n||Vt!==s)&&(ps=null,qa=mt()+500,uo(n,s));do try{TE();break}catch(T){Ew(n,T)}while(!0);rg(),Ld.current=v,He=g,At!==null?s=0:(Nt=null,Vt=0,s=Ct)}if(s!==0){if(s===2&&(g=_p(n),g!==0&&(h=g,s=Ug(n,g))),s===1)throw o=Vc,uo(n,0),pr(n,h),_n(n,mt()),o;if(s===6)pr(n,h);else{if(g=n.current.alternate,!(h&30)&&!CE(g)&&(s=jd(n,h),s===2&&(v=_p(n),v!==0&&(h=v,s=Ug(n,v))),s===1))throw o=Vc,uo(n,0),pr(n,h),_n(n,mt()),o;switch(n.finishedWork=g,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ho(n,An,ps);break;case 3:if(pr(n,h),(h&130023424)===h&&(s=zg+500-mt(),10<s)){if(Gh(n,0)!==0)break;if(g=n.suspendedLanes,(g&h)!==h){cn(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=qp(ho.bind(null,n,An,ps),s);break}ho(n,An,ps);break;case 4:if(pr(n,h),(h&4194240)===h)break;for(s=n.eventTimes,g=-1;0<h;){var S=31-ci(h);v=1<<S,S=s[S],S>g&&(g=S),h&=~v}if(h=g,h=mt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*bE(h/1960))-h,10<h){n.timeoutHandle=qp(ho.bind(null,n,An,ps),h);break}ho(n,An,ps);break;case 5:ho(n,An,ps);break;default:throw Error(t(329))}}}return _n(n,mt()),n.callbackNode===o?Sw.bind(null,n):null}function Ug(n,s){var o=$c;return n.current.memoizedState.isDehydrated&&(uo(n,s).flags|=256),n=jd(n,s),n!==2&&(s=An,An=o,s!==null&&Vg(s)),n}function Vg(n){An===null?An=n:An.push.apply(An,n)}function CE(n){for(var s=n;;){if(s.flags&16384){var o=s.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var h=0;h<o.length;h++){var g=o[h],v=g.getSnapshot;g=g.value;try{if(!ui(v(),g))return!1}catch{return!1}}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function pr(n,s){for(s&=~jg,s&=~Md,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var o=31-ci(s),h=1<<o;n[o]=-1,s&=~h}}function xw(n){if(He&6)throw Error(t(327));Ya();var s=Gh(n,0);if(!(s&1))return _n(n,mt()),null;var o=jd(n,s);if(n.tag!==0&&o===2){var h=_p(n);h!==0&&(s=h,o=Ug(n,h))}if(o===1)throw o=Vc,uo(n,0),pr(n,s),_n(n,mt()),o;if(o===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ho(n,An,ps),_n(n,mt()),null}function $g(n,s){var o=He;He|=1;try{return n(s)}finally{He=o,He===0&&(qa=mt()+500,hd&&ar())}}function co(n){dr!==null&&dr.tag===0&&!(He&6)&&Ya();var s=He;He|=1;var o=Kn.transition,h=We;try{if(Kn.transition=null,We=1,n)return n()}finally{We=h,Kn.transition=o,He=s,!(He&6)&&ar()}}function Wg(){In=Xa.current,tt(Xa)}function uo(n,s){n.finishedWork=null,n.finishedLanes=0;var o=n.timeoutHandle;if(o!==-1&&(n.timeoutHandle=-1,nE(o)),At!==null)for(o=At.return;o!==null;){var h=o;switch(eg(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&cd();break;case 3:$a(),tt(vn),tt(Yt),fg();break;case 5:hg(h);break;case 4:$a();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:og(h.type._context);break;case 22:case 23:Wg()}o=o.return}if(Nt=n,At=n=gr(n.current,null),Vt=In=s,Ct=0,Vc=null,jg=Md=lo=0,An=$c=null,ro!==null){for(s=0;s<ro.length;s++)if(o=ro[s],h=o.interleaved,h!==null){o.interleaved=null;var g=h.next,v=o.pending;if(v!==null){var S=v.next;v.next=g,h.next=S}o.pending=h}ro=null}return n}function Ew(n,s){do{var o=At;try{if(rg(),_d.current=bd,Sd){for(var h=at.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Sd=!1}if(ao=0,It=bt=at=null,Oc=!1,jc=0,Og.current=null,o===null||o.return===null){Ct=1,Vc=s,At=null;break}e:{var v=n,S=o.return,T=o,R=s;if(s=Vt,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var j=R,X=T,q=X.tag;if(!(X.mode&1)&&(q===0||q===11||q===15)){var G=X.alternate;G?(X.updateQueue=G.updateQueue,X.memoizedState=G.memoizedState,X.lanes=G.lanes):(X.updateQueue=null,X.memoizedState=null)}var ie=Y0(S);if(ie!==null){ie.flags&=-257,K0(ie,S,T,v,s),ie.mode&1&&q0(v,j,s),s=ie,R=j;var ce=s.updateQueue;if(ce===null){var ue=new Set;ue.add(R),s.updateQueue=ue}else ce.add(R);break e}else{if(!(s&1)){q0(v,j,s),Gg();break e}R=Error(t(426))}}else if(st&&T.mode&1){var vt=Y0(S);if(vt!==null){!(vt.flags&65536)&&(vt.flags|=256),K0(vt,S,T,v,s),ig(Wa(R,T));break e}}v=R=Wa(R,T),Ct!==4&&(Ct=2),$c===null?$c=[v]:$c.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var D=G0(v,R,s);w0(v,D);break e;case 1:T=R;var L=v.type,O=v.stateNode;if(!(v.flags&128)&&(typeof L.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(hr===null||!hr.has(O)))){v.flags|=65536,s&=-s,v.lanes|=s;var Y=X0(v,T,s);w0(v,Y);break e}}v=v.return}while(v!==null)}kw(o)}catch(de){s=de,At===o&&o!==null&&(At=o=o.return);continue}break}while(!0)}function bw(){var n=Ld.current;return Ld.current=bd,n===null?bd:n}function Gg(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Nt===null||!(lo&268435455)&&!(Md&268435455)||pr(Nt,Vt)}function jd(n,s){var o=He;He|=2;var h=bw();(Nt!==n||Vt!==s)&&(ps=null,uo(n,s));do try{kE();break}catch(g){Ew(n,g)}while(!0);if(rg(),He=o,Ld.current=h,At!==null)throw Error(t(261));return Nt=null,Vt=0,Ct}function kE(){for(;At!==null;)Cw(At)}function TE(){for(;At!==null&&!ZS();)Cw(At)}function Cw(n){var s=Rw(n.alternate,n,In);n.memoizedProps=n.pendingProps,s===null?kw(n):At=s,Og.current=null}function kw(n){var s=n;do{var o=s.alternate;if(n=s.return,s.flags&32768){if(o=_E(o,s),o!==null){o.flags&=32767,At=o;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,At=null;return}}else if(o=AE(o,s,In),o!==null){At=o;return}if(s=s.sibling,s!==null){At=s;return}At=s=n}while(s!==null);Ct===0&&(Ct=5)}function ho(n,s,o){var h=We,g=Kn.transition;try{Kn.transition=null,We=1,PE(n,s,o,h)}finally{Kn.transition=g,We=h}return null}function PE(n,s,o,h){do Ya();while(dr!==null);if(He&6)throw Error(t(327));o=n.finishedWork;var g=n.finishedLanes;if(o===null)return null;if(n.finishedWork=null,n.finishedLanes=0,o===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=o.lanes|o.childLanes;if(cx(n,v),n===Nt&&(At=Nt=null,Vt=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Nd||(Nd=!0,Lw(Uh,function(){return Ya(),null})),v=(o.flags&15990)!==0,o.subtreeFlags&15990||v){v=Kn.transition,Kn.transition=null;var S=We;We=1;var T=He;He|=4,Og.current=null,xE(n,o),vw(o,n),Yx(Gp),Yh=!!Wp,Gp=Wp=null,n.current=o,EE(o),ex(),He=T,We=S,Kn.transition=v}else n.current=o;if(Nd&&(Nd=!1,dr=n,Fd=g),v=n.pendingLanes,v===0&&(hr=null),ix(o.stateNode),_n(n,mt()),s!==null)for(h=n.onRecoverableError,o=0;o<s.length;o++)g=s[o],h(g.value,{componentStack:g.stack,digest:g.digest});if(Id)throw Id=!1,n=Hg,Hg=null,n;return Fd&1&&n.tag!==0&&Ya(),v=n.pendingLanes,v&1?n===Bg?Wc++:(Wc=0,Bg=n):Wc=0,ar(),null}function Ya(){if(dr!==null){var n=gy(Fd),s=Kn.transition,o=We;try{if(Kn.transition=null,We=16>n?16:n,dr===null)var h=!1;else{if(n=dr,dr=null,Fd=0,He&6)throw Error(t(331));var g=He;for(He|=4,ae=n.current;ae!==null;){var v=ae,S=v.child;if(ae.flags&16){var T=v.deletions;if(T!==null){for(var R=0;R<T.length;R++){var j=T[R];for(ae=j;ae!==null;){var X=ae;switch(X.tag){case 0:case 11:case 15:Uc(8,X,v)}var q=X.child;if(q!==null)q.return=X,ae=q;else for(;ae!==null;){X=ae;var G=X.sibling,ie=X.return;if(dw(X),X===j){ae=null;break}if(G!==null){G.return=ie,ae=G;break}ae=ie}}}var ce=v.alternate;if(ce!==null){var ue=ce.child;if(ue!==null){ce.child=null;do{var vt=ue.sibling;ue.sibling=null,ue=vt}while(ue!==null)}}ae=v}}if(v.subtreeFlags&2064&&S!==null)S.return=v,ae=S;else e:for(;ae!==null;){if(v=ae,v.flags&2048)switch(v.tag){case 0:case 11:case 15:Uc(9,v,v.return)}var D=v.sibling;if(D!==null){D.return=v.return,ae=D;break e}ae=v.return}}var L=n.current;for(ae=L;ae!==null;){S=ae;var O=S.child;if(S.subtreeFlags&2064&&O!==null)O.return=S,ae=O;else e:for(S=L;ae!==null;){if(T=ae,T.flags&2048)try{switch(T.tag){case 0:case 11:case 15:Rd(9,T)}}catch(de){dt(T,T.return,de)}if(T===S){ae=null;break e}var Y=T.sibling;if(Y!==null){Y.return=T.return,ae=Y;break e}ae=T.return}}if(He=g,ar(),Fi&&typeof Fi.onPostCommitFiberRoot=="function")try{Fi.onPostCommitFiberRoot(Vh,n)}catch{}h=!0}return h}finally{We=o,Kn.transition=s}}return!1}function Tw(n,s,o){s=Wa(o,s),s=G0(n,s,1),n=cr(n,s,1),s=cn(),n!==null&&(gc(n,1,s),_n(n,s))}function dt(n,s,o){if(n.tag===3)Tw(n,n,o);else for(;s!==null;){if(s.tag===3){Tw(s,n,o);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(hr===null||!hr.has(h))){n=Wa(o,n),n=X0(s,n,1),s=cr(s,n,1),n=cn(),s!==null&&(gc(s,1,n),_n(s,n));break}}s=s.return}}function RE(n,s,o){var h=n.pingCache;h!==null&&h.delete(s),s=cn(),n.pingedLanes|=n.suspendedLanes&o,Nt===n&&(Vt&o)===o&&(Ct===4||Ct===3&&(Vt&130023424)===Vt&&500>mt()-zg?uo(n,0):jg|=o),_n(n,s)}function Pw(n,s){s===0&&(n.mode&1?(s=Wh,Wh<<=1,!(Wh&130023424)&&(Wh=4194304)):s=1);var o=cn();n=hs(n,s),n!==null&&(gc(n,s,o),_n(n,o))}function LE(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Pw(n,o)}function ME(n,s){var o=0;switch(n.tag){case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(o=g.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Pw(n,o)}var Rw;Rw=function(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps||vn.current)wn=!0;else{if(!(n.lanes&o)&&!(s.flags&128))return wn=!1,wE(n,s,o);wn=!!(n.flags&131072)}else wn=!1,st&&s.flags&1048576&&c0(s,fd,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Td(n,s),n=s.pendingProps;var g=Oa(s,Yt.current);Va(s,o),g=mg(null,s,h,n,g,o);var v=vg();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,yn(h)?(v=!0,ud(s)):v=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,cg(s),g.updater=Cd,s.stateNode=g,g._reactInternals=s,xg(s,h,n,o),s=kg(null,s,h,!0,v,o)):(s.tag=0,st&&v&&Zp(s),ln(null,s,g,o),s=s.child),s;case 16:h=s.elementType;e:{switch(Td(n,s),n=s.pendingProps,g=h._init,h=g(h._payload),s.type=h,g=s.tag=NE(h),n=di(h,n),g){case 0:s=Cg(null,s,h,n,o);break e;case 1:s=nw(null,s,h,n,o);break e;case 11:s=Q0(null,s,h,n,o);break e;case 14:s=J0(null,s,h,di(h.type,n),o);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:di(h,g),Cg(n,s,h,g,o);case 1:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:di(h,g),nw(n,s,h,g,o);case 3:e:{if(iw(s),n===null)throw Error(t(387));h=s.pendingProps,v=s.memoizedState,g=v.element,y0(n,s),wd(s,h,null,o);var S=s.memoizedState;if(h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){g=Wa(Error(t(423)),s),s=sw(n,s,h,o,g);break e}else if(h!==g){g=Wa(Error(t(424)),s),s=sw(n,s,h,o,g);break e}else for(Mn=sr(s.stateNode.containerInfo.firstChild),Ln=s,st=!0,hi=null,o=m0(s,null,h,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ha(),h===g){s=fs(n,s,o);break e}ln(n,s,h,o)}s=s.child}return s;case 5:return _0(s),n===null&&ng(s),h=s.type,g=s.pendingProps,v=n!==null?n.memoizedProps:null,S=g.children,Xp(h,g)?S=null:v!==null&&Xp(h,v)&&(s.flags|=32),tw(n,s),ln(n,s,S,o),s.child;case 6:return n===null&&ng(s),null;case 13:return rw(n,s,o);case 4:return ug(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Ba(s,null,h,o):ln(n,s,h,o),s.child;case 11:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:di(h,g),Q0(n,s,h,g,o);case 7:return ln(n,s,s.pendingProps,o),s.child;case 8:return ln(n,s,s.pendingProps.children,o),s.child;case 12:return ln(n,s,s.pendingProps.children,o),s.child;case 10:e:{if(h=s.type._context,g=s.pendingProps,v=s.memoizedProps,S=g.value,Je(md,h._currentValue),h._currentValue=S,v!==null)if(ui(v.value,S)){if(v.children===g.children&&!vn.current){s=fs(n,s,o);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var T=v.dependencies;if(T!==null){S=v.child;for(var R=T.firstContext;R!==null;){if(R.context===h){if(v.tag===1){R=ds(-1,o&-o),R.tag=2;var j=v.updateQueue;if(j!==null){j=j.shared;var X=j.pending;X===null?R.next=R:(R.next=X.next,X.next=R),j.pending=R}}v.lanes|=o,R=v.alternate,R!==null&&(R.lanes|=o),ag(v.return,o,s),T.lanes|=o;break}R=R.next}}else if(v.tag===10)S=v.type===s.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=o,T=S.alternate,T!==null&&(T.lanes|=o),ag(S,o,s),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===s){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}ln(n,s,g.children,o),s=s.child}return s;case 9:return g=s.type,h=s.pendingProps.children,Va(s,o),g=qn(g),h=h(g),s.flags|=1,ln(n,s,h,o),s.child;case 14:return h=s.type,g=di(h,s.pendingProps),g=di(h.type,g),J0(n,s,h,g,o);case 15:return Z0(n,s,s.type,s.pendingProps,o);case 17:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:di(h,g),Td(n,s),s.tag=1,yn(h)?(n=!0,ud(s)):n=!1,Va(s,o),$0(s,h,g),xg(s,h,g,o),kg(null,s,h,!0,n,o);case 19:return aw(n,s,o);case 22:return ew(n,s,o)}throw Error(t(156,s.tag))};function Lw(n,s){return uy(n,s)}function IE(n,s,o,h){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(n,s,o,h){return new IE(n,s,o,h)}function Xg(n){return n=n.prototype,!(!n||!n.isReactComponent)}function NE(n){if(typeof n=="function")return Xg(n)?1:0;if(n!=null){if(n=n.$$typeof,n===xe)return 11;if(n===we)return 14}return 2}function gr(n,s){var o=n.alternate;return o===null?(o=Qn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&14680064,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o}function zd(n,s,o,h,g,v){var S=2;if(h=n,typeof n=="function")Xg(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case $:return fo(o.children,g,v,s);case W:S=8,g|=8;break;case Q:return n=Qn(12,o,s,g|2),n.elementType=Q,n.lanes=v,n;case fe:return n=Qn(13,o,s,g),n.elementType=fe,n.lanes=v,n;case he:return n=Qn(19,o,s,g),n.elementType=he,n.lanes=v,n;case K:return Hd(o,g,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ne:S=10;break e;case te:S=9;break e;case xe:S=11;break e;case we:S=14;break e;case ge:S=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Qn(S,o,s,g),s.elementType=n,s.type=h,s.lanes=v,s}function fo(n,s,o,h){return n=Qn(7,n,h,s),n.lanes=o,n}function Hd(n,s,o,h){return n=Qn(22,n,h,s),n.elementType=K,n.lanes=o,n.stateNode={isHidden:!1},n}function qg(n,s,o){return n=Qn(6,n,null,s),n.lanes=o,n}function Yg(n,s,o){return s=Qn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function FE(n,s,o,h,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sp(0),this.expirationTimes=Sp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sp(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Kg(n,s,o,h,g,v,S,T,R){return n=new FE(n,s,o,T,R),s===1?(s=1,v===!0&&(s|=8)):s=0,v=Qn(3,null,null,s),n.current=v,v.stateNode=n,v.memoizedState={element:h,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},cg(v),n}function DE(n,s,o){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:h==null?null:""+h,children:n,containerInfo:s,implementation:o}}function Mw(n){if(!n)return or;n=n._reactInternals;e:{if(eo(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(yn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var o=n.type;if(yn(o))return o0(n,o,s)}return s}function Iw(n,s,o,h,g,v,S,T,R){return n=Kg(o,h,!0,n,g,v,S,T,R),n.context=Mw(null),o=n.current,h=cn(),g=fr(o),v=ds(h,g),v.callback=s??null,cr(o,v,g),n.current.lanes=g,gc(n,g,h),_n(n,h),n}function Bd(n,s,o,h){var g=s.current,v=cn(),S=fr(g);return o=Mw(o),s.context===null?s.context=o:s.pendingContext=o,s=ds(v,S),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=cr(g,s,S),n!==null&&(gi(n,g,S,v),yd(n,g,S)),S}function Ud(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Nw(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Qg(n,s){Nw(n,s),(n=n.alternate)&&Nw(n,s)}function OE(){return null}var Fw=typeof reportError=="function"?reportError:function(n){console.error(n)};function Jg(n){this._internalRoot=n}Vd.prototype.render=Jg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Bd(n,s,null,null)},Vd.prototype.unmount=Jg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;co(function(){Bd(null,n,null,null)}),s[as]=null}};function Vd(n){this._internalRoot=n}Vd.prototype.unstable_scheduleHydration=function(n){if(n){var s=yy();n={blockedOn:null,target:n,priority:s};for(var o=0;o<tr.length&&s!==0&&s<tr[o].priority;o++);tr.splice(o,0,n),o===0&&_y(n)}};function Zg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function $d(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Dw(){}function jE(n,s,o,h,g){if(g){if(typeof h=="function"){var v=h;h=function(){var j=Ud(S);v.call(j)}}var S=Iw(s,h,n,0,null,!1,!1,"",Dw);return n._reactRootContainer=S,n[as]=S.current,Pc(n.nodeType===8?n.parentNode:n),co(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof h=="function"){var T=h;h=function(){var j=Ud(R);T.call(j)}}var R=Kg(n,0,!1,null,null,!1,!1,"",Dw);return n._reactRootContainer=R,n[as]=R.current,Pc(n.nodeType===8?n.parentNode:n),co(function(){Bd(s,R,o,h)}),R}function Wd(n,s,o,h,g){var v=o._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var T=g;g=function(){var R=Ud(S);T.call(R)}}Bd(s,S,n,g)}else S=jE(o,s,n,g,h);return Ud(S)}my=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var o=pc(s.pendingLanes);o!==0&&(xp(s,o|1),_n(s,mt()),!(He&6)&&(qa=mt()+500,ar()))}break;case 13:co(function(){var h=hs(n,1);if(h!==null){var g=cn();gi(h,n,1,g)}}),Qg(n,1)}},Ep=function(n){if(n.tag===13){var s=hs(n,134217728);if(s!==null){var o=cn();gi(s,n,134217728,o)}Qg(n,134217728)}},vy=function(n){if(n.tag===13){var s=fr(n),o=hs(n,s);if(o!==null){var h=cn();gi(o,n,s,h)}Qg(n,s)}},yy=function(){return We},wy=function(n,s){var o=We;try{return We=n,s()}finally{We=o}},mp=function(n,s,o){switch(s){case"input":if(Ii(n,o),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<o.length;s++){var h=o[s];if(h!==n&&h.form===n.form){var g=ld(h);if(!g)throw Error(t(90));Ks(h),Ii(h,g)}}}break;case"textarea":Oh(n,o);break;case"select":s=o.value,s!=null&&li(n,!!o.multiple,s,!1)}},iy=$g,sy=co;var zE={usingClientEntryPoint:!1,Events:[Mc,Fa,ld,ty,ny,$g]},Gc={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HE={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ly(n),n===null?null:n.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||OE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{Vh=Gd.inject(HE),Fi=Gd}catch{}}return Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zE,Sn.createPortal=function(n,s){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zg(s))throw Error(t(200));return DE(n,s,null,o)},Sn.createRoot=function(n,s){if(!Zg(n))throw Error(t(299));var o=!1,h="",g=Fw;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Kg(n,1,!1,null,null,o,!1,h,g),n[as]=s.current,Pc(n.nodeType===8?n.parentNode:n),new Jg(s)},Sn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ly(s),n=n===null?null:n.stateNode,n},Sn.flushSync=function(n){return co(n)},Sn.hydrate=function(n,s,o){if(!$d(s))throw Error(t(200));return Wd(null,n,s,!0,o)},Sn.hydrateRoot=function(n,s,o){if(!Zg(n))throw Error(t(405));var h=o!=null&&o.hydratedSources||null,g=!1,v="",S=Fw;if(o!=null&&(o.unstable_strictMode===!0&&(g=!0),o.identifierPrefix!==void 0&&(v=o.identifierPrefix),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),s=Iw(s,null,n,1,o??null,g,!1,v,S),n[as]=s.current,Pc(n),h)for(n=0;n<h.length;n++)o=h[n],g=o._getVersion,g=g(o._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[o,g]:s.mutableSourceEagerHydrationData.push(o,g);return new Vd(s)},Sn.render=function(n,s,o){if(!$d(s))throw Error(t(200));return Wd(null,n,s,!1,o)},Sn.unmountComponentAtNode=function(n){if(!$d(n))throw Error(t(40));return n._reactRootContainer?(co(function(){Wd(null,null,n,!1,function(){n._reactRootContainer=null,n[as]=null})}),!0):!1},Sn.unstable_batchedUpdates=$g,Sn.unstable_renderSubtreeIntoContainer=function(n,s,o,h){if(!$d(o))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Wd(n,s,o,!1,h)},Sn.version="18.3.1-next-f1338f8080-20240426",Sn}var Ww;function QE(){if(Ww)return im.exports;Ww=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(e){console.error(e)}}return f(),im.exports=KE(),im.exports}var Gw;function JE(){if(Gw)return Xd;Gw=1;var f=QE();return Xd.createRoot=f.createRoot,Xd.hydrateRoot=f.hydrateRoot,Xd}var ZE=JE();const eb=({onComplete:f})=>{const[e,t]=re.useState(""),i="Welcome to my porfolio!";return re.useEffect(()=>{let r=0;const a=setInterval(()=>{t(i.substring(0,r)),r++,r>i.length&&(clearInterval(a),setTimeout(()=>{f()},500))},100);return()=>clearInterval(a)},[f]),z.jsxs("div",{className:"fixed inset-0 z-50 bg-black text-gray-100 flex flex-col items-center justify-center",children:[z.jsxs("div",{className:"mb-4 text-4xl font-mono font-bold",children:[e,z.jsx("span",{className:"animate-pulse",children:"|"})]})," ",z.jsx("div",{className:"w-[300px] h-[7px] bg-gray-800 rounded relative overflow-hidden",children:z.jsx("div",{className:"w-full h-full bg-blue-800 shadow-[0_0_5px_#3b82f6] animate-loading-bar"})})]})},tb=({menuOpen:f,setMenuOpen:e})=>(re.useEffect(()=>{document.body.style.overflow=f?"hidden":""},[f]),z.jsx("nav",{className:"fixed top-0 left-0 right-0 w-full z-50 bg-[rgba(10, 10, 10, 0.8)] backdrop-blur-xs border-b border-white/10 shadow-lg m-0 p-0",children:z.jsx("div",{className:"max-w-5xl mx-auto px-4",children:z.jsxs("div",{className:"flex justify-between items-center h-16",children:[z.jsxs("a",{href:"#home",className:"text-2xl md:text-2xl font-bold bg-gradient-to-r from-[#85C1E9] to-[#242C38] bg-clip-text text-transparent",children:["Tim",z.jsx("span",{className:"text-white-500",children:".tech"})]}),z.jsx("div",{className:"w-7 h-5 relative cursor-pointer z-40 md:hidden",onClick:()=>e(t=>!t),children:""}),z.jsxs("div",{className:"hidden md:flex space-x-4 font-bold",children:[z.jsx("a",{href:"#home",className:"text-[#85C1E9] relative hover:text-black transition-all",children:"Home"}),z.jsx("a",{href:"#about",className:"text-[#658FAE] hover:text-black transition-all",children:"About"}),z.jsx("a",{href:"#projects",className:"text-[#445E73] hover:text-black transition-all",children:"Projects"}),z.jsx("a",{href:"#resume",className:"text-[var(--color-secondary)] hover:text-black transition-all",children:"Resume"})]})]})})})),nb=({menuOpen:f,setMenuOpen:e})=>z.jsxs("div",{className:`fixed top-0 left-0 w-full bg-[rgba(10,10,10,0.8)] z-40 flex flex-col items-center justify-center
                     transition-all duration-500 ease-in-out

                     ${f?"h-screen opacity-100 pointer-events-auto":"h-0 opacity-0 pointer-events-none"}
                   `,children:[z.jsx("button",{onClick:()=>e(!1),className:"absolute top-6 right-6 text-white text-3xl focus:outline-none cursor-pointer","aria-label":"Close Menu",children:""}),z.jsx("a",{href:"#home",onClick:()=>e(!1),className:`text-2xl font-semibold text-white my-4 transform transition-transform duration-300
                    ${f?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}        
            `,children:"Home"}),z.jsx("a",{href:"#About",onClick:()=>e(!1),className:`text-2xl font-semibold text-white my-4 transform transition-transform duration-300
            ${f?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}        
    `,children:"About"}),z.jsx("a",{href:"#projects",onClick:()=>e(!1),className:`text-2xl font-semibold text-white my-4 transform transition-transform duration-300
            ${f?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}        
    `,children:"Projects"}),z.jsx("a",{href:"#Resume",onClick:()=>e(!1),className:`text-2xl font-semibold text-white my-4 transform transition-transform duration-300
            ${f?"opacity-100 translate-y-0":"opacity-0 translate-y-5"}        
    `,children:"Resume"})]}),Zf=({children:f})=>{const e=re.useRef(null);return re.useEffect(()=>{const t=new IntersectionObserver(([i])=>{i.isIntersecting&&e.current.classList.add("visible")},{threshold:.2,rootMargin:"0px 0px -50px 0px"});return e.current&&t.observe(e.current),()=>t.disconnect()}),z.jsx("div",{ref:e,className:"reveal",children:f})},ib=()=>z.jsx("section",{id:"home",className:"home-section min-h-screen flex items-center justify-center relative",children:z.jsx(Zf,{children:z.jsxs("div",{className:"text-center z-10 px-4",children:[z.jsx("h2",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent leading-normal",children:"Hi, I'm Tim Tsenguun"}),z.jsx("p",{className:"text-[var(--color-description)] text-l mb-8 max-w-lg mx-auto text-center backdrop-blur-xs",children:"Hungry-to-learn Data Analytics Engineer with strong analytical skills and last two years of academic experience in predictive analytics. Seeking roles in data engineering or analysis."}),z.jsxs("div",{className:"flex justify-center space-x-4",children:[z.jsx("a",{href:"#projects",className:"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] text-white font-semibold py-2 px-6 rounded-full shadow-md hover:shadow-lg hover:scale-105 transform transition duration-300",children:"View Projects"}),z.jsx("a",{href:"#Resume",className:"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] text-white font-semibold py-2 px-6 rounded-full shadow-md hover:shadow-lg hover:scale-105 transform transition duration-300",children:"Resume"})]})]})})}),sb=()=>{const f=["React","Vue","TypeScript","TailwindCSS","Svelte"],e=["Node.js","Python","AWS","MongoDB","GraphQL"];return z.jsx("section",{id:"about",className:"min-h-screen flex items-center justify-center py-20",children:z.jsx(Zf,{children:z.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[z.jsxs("h2",{className:"text-3xl font-bold mb-8 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent text-center",children:[" ","About Me"]}),z.jsxs("div",{className:"box_transition",children:[z.jsx("p",{className:"text-[var(--color-description)] mb-6",children:"Passionate developer with expertise in building scalable web applications and creating innovative solutions."}),z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 ",children:[z.jsxs("div",{className:"rounded-xl p-6 hover:-translate-y-1 transition-all",children:[z.jsx("h3",{className:"text-xl font-bold mb-4",children:" Frontend"}),z.jsx("div",{className:"flex flex-wrap gap-2 ",children:f.map((t,i)=>z.jsx("span",{className:`\r
                      bg-gray-100/30 text-white-500 py-1 px-3 \r
                      rounded-full text-sm\r
                      transition\r
                      hover:bg-gray-100/60 hover:-translate-y-0.5\r
                      hover:shadow-[0_2px_8px_rgba(59,130,246,0.2)]\r
                    `,children:t},i))})]}),z.jsxs("div",{className:"rounded-xl p-6 hover:-translate-y-1 transition-all",children:[z.jsx("h3",{className:"text-xl font-bold mb-4",children:" Backend"}),z.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((t,i)=>z.jsx("span",{className:`\r
                      bg-gray-100/30 text-white-500 py-1 px-3 \r
                      rounded-full text-sm\r
                      transition\r
                      hover:bg-gray-100/60 hover:-translate-y-0.5\r
                      hover:shadow-[0_2px_8px_rgba(59,130,246,0.2)]\r
                    `,children:t},i))})]})]})]}),z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[z.jsxs("div",{className:"box_transition",children:[z.jsx("h3",{className:"text-xl font-bold mb-4",children:"  Education "}),z.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:[z.jsxs("li",{children:[z.jsx("strong",{children:" B.S. in Computer Science "})," - XYZ University (2016-2020)"]}),z.jsx("li",{children:"Relevant Coursework: Data Structures, Web Development, Cloud Computing..."})]})]}),z.jsxs("div",{className:"box_transition",children:[z.jsx("h3",{className:"text-xl font-bold mb-4",children:"  Work Experience "}),z.jsxs("div",{className:"space-y-4 text-gray-300",children:[z.jsxs("div",{children:[z.jsxs("h4",{className:"font-semibold",children:[" ","Software Engineer at ABC Corp (2020 - Present)"," "]}),z.jsx("p",{children:"Developed and maintained microservices for cloud-based applications."})]}),z.jsxs("div",{children:[z.jsxs("h4",{className:"font-semibold",children:[" ","Intern at DEF Startups (2019)"," "]}),z.jsx("p",{children:"Assisted in building front-end components and integration REST APIs"})]})]})]})]})]})})})},rb=()=>z.jsx("section",{id:"projects",className:"min-h-screen flex items-center justify-center py-15",children:z.jsx(Zf,{children:z.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[z.jsxs("h2",{className:"text-3xl md:text-3xl font-bold mb-6 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent leading-normal",children:[" ","Featured Projects"]}),z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[z.jsxs("div",{className:"box_transition",children:[z.jsx("h3",{className:"text-xl font-bold mb-2",children:" Cloud Platform"}),z.jsx("p",{className:"text-[var(--color-description)] mb-4",children:"Scalable cloud infrastructure management with real-time monitoring and automated scaling."}),z.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["React","Node.js","AWS","Docker"].map((f,e)=>z.jsx("span",{className:`\r
                      bg-gray-100/30 text-white-500 py-1 px-3 \r
                      rounded-full text-sm\r
                      transition\r
                      hover:bg-gray-100/60 hover:-translate-y-0.5\r
                      hover:shadow-[0_2px_8px_rgba(59,130,246,0.2)]\r
                    `,children:f},e))}),z.jsx("div",{className:"flex justify-between items-center",children:z.jsx("a",{href:"#",className:"text-[var(--color-description)] hover:text-blue-300 transition-colors my-4",children:"View Project "})})]}),z.jsxs("div",{className:"box_transition",children:[z.jsx("h3",{className:"text-xl font-bold mb-2",children:"AI Analytics Dashboard"}),z.jsx("p",{className:"text--[var(--color-description)] mb-4",children:"ML-powered data visualization platform with predictive analytics and interactive reports."}),z.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Python","TensorFlow","D3.js","Flask"].map((f,e)=>z.jsx("span",{className:`\r
                      bg-gray-100/30 text-white-500 py-1 px-3 \r
                      rounded-full text-sm\r
                      transition\r
                      hover:bg-gray-100/60 hover:-translate-y-0.5\r
                      hover:shadow-[0_2px_8px_rgba(59,130,246,0.2)]\r
                    `,children:f},e))}),z.jsx("div",{className:"flex justify-between items-center",children:z.jsx("a",{href:"#",className:"text-[var(--color-description)] hover:text-blue-300 transition-colors my-4",children:"View Project "})})]}),z.jsxs("div",{className:"box_transition",children:[z.jsx("h3",{className:"text-xl font-bold mb-2",children:"E-Commerce Web App"}),z.jsx("p",{className:"text-[var(--color-description)] mb-4",children:"Full-stack e-commerce with modern UI, secure payment integration, and customizable product inventory."}),z.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Next.js","TypeScript","Stripe","PostgreSQL"].map(f=>z.jsx("span",{className:`\r
                      bg-gray-100/30 text-white-500 py-1 px-3 \r
                      rounded-full text-sm\r
                      transition\r
                      hover:bg-gray-100/60 hover:-translate-y-0.5\r
                      hover:shadow-[0_2px_8px_rgba(59,130,246,0.2)]\r
                    `,children:f},f))}),z.jsx("div",{className:"flex justify-between items-center",children:z.jsx("a",{href:"#",className:"text-[var(--color-description)] hover:text-blue-300 transition-colors my-4",children:"View Project "})})]}),z.jsxs("div",{className:"box_transition",children:[z.jsx("h3",{className:"text-xl font-bold mb-2",children:"Real-Time Chat App"}),z.jsx("p",{className:"text-[var(--color-description)] mb-4",children:"Scalable chat platform supporting real-time messaging, presence, and group chat features."}),z.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["Socket.IO","Express","React","Redis"].map((f,e)=>z.jsx("span",{className:`\r
                      bg-gray-100/30 text-white-500 py-1 px-3 \r
                      rounded-full text-sm\r
                      transition\r
                      hover:bg-gray-100/60 hover:-translate-y-0.5\r
                      hover:shadow-[0_2px_8px_rgba(59,130,246,0.2)]\r
                    `,children:f},e))}),z.jsx("div",{className:"flex justify-between items-center ",children:z.jsx("a",{href:"#",className:"text-[var(--color-description)] hover:text-blue-300 transition-colors my-4",children:"View Project "})})]})]})]})})}),ob="modulepreload",ab=function(f){return"/portfolio/"+f},Xw={},qd=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=Promise.allSettled(t.map(d=>{if(d=ab(d),d in Xw)return;Xw[d]=!0;const p=d.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":ob,p||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((w,_)=>{y.addEventListener("load",w),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return r.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};var fu={};fu.d=(f,e)=>{for(var t in e)fu.o(e,t)&&!fu.o(f,t)&&Object.defineProperty(f,t,{enumerable:!0,get:e[t]})};fu.o=(f,e)=>Object.prototype.hasOwnProperty.call(f,e);var Te=globalThis.pdfjsLib={};fu.d(Te,{AbortException:()=>Ea,AnnotationEditorLayer:()=>bv,AnnotationEditorParamsType:()=>Ce,AnnotationEditorType:()=>Re,AnnotationEditorUIManager:()=>ya,AnnotationLayer:()=>rC,AnnotationMode:()=>wr,ColorPicker:()=>Nf,DOMSVGFactory:()=>Gv,DrawLayer:()=>Pv,FeatureTest:()=>pn,GlobalWorkerOptions:()=>$s,ImageKind:()=>ef,InvalidPDFException:()=>CA,MissingPDFException:()=>xa,OPS:()=>vi,OutputScale:()=>ym,PDFDataRangeTransport:()=>S_,PDFDateString:()=>zv,PDFWorker:()=>ol,PasswordResponses:()=>hb,PermissionFlag:()=>ub,PixelsPerInch:()=>Xr,RenderingCancelledException:()=>Ov,TextLayer:()=>Gm,UnexpectedResponseException:()=>ip,Util:()=>pe,VerbosityLevel:()=>ep,XfaLayer:()=>E_,build:()=>z1,createValidAbsoluteUrl:()=>gb,fetchData:()=>rp,getDocument:()=>R1,getFilenameFromUrl:()=>Eb,getPdfFilenameFromUrl:()=>bb,getXfaPageViewport:()=>Cb,isDataScheme:()=>op,isPdfFile:()=>jv,noContextMenu:()=>ai,normalizeUnicode:()=>_b,setLayerDimensions:()=>va,shadow:()=>ze,version:()=>j1});const an=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),bA=[1,0,0,1,0,0],pm=[.001,0,0,.001,0,0],lb=1e7,om=1.35,Vn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},wr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},cb="pdfjs_internal_editor_",Re={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},ub={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Zt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ef={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},kt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},qc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ep={ERRORS:0,WARNINGS:1,INFOS:5},vi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},hb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let tp=ep.WARNINGS;function db(f){Number.isInteger(f)&&(tp=f)}function fb(){return tp}function np(f){tp>=ep.INFOS&&console.log(`Info: ${f}`)}function Ie(f){tp>=ep.WARNINGS&&console.log(`Warning: ${f}`)}function nt(f){throw new Error(f)}function Lt(f,e){f||nt(e)}function pb(f){switch(f==null?void 0:f.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function gb(f,e=null,t=null){if(!f)return null;try{if(t&&typeof f=="string"){if(t.addDefaultProtocol&&f.startsWith("www.")){const r=f.match(/\./g);(r==null?void 0:r.length)>=2&&(f=`http://${f}`)}if(t.tryConvertEncoding)try{f=Ab(f)}catch{}}const i=e?new URL(f,e):new URL(f);if(pb(i))return i}catch{}return null}function ze(f,e,t,i=!1){return Object.defineProperty(f,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Qr=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class gm extends Qr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class mm extends Qr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class CA extends Qr{constructor(e){super(e,"InvalidPDFException")}}class xa extends Qr{constructor(e){super(e,"MissingPDFException")}}class ip extends Qr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class mb extends Qr{constructor(e){super(e,"FormatError")}}class Ea extends Qr{constructor(e){super(e,"AbortException")}}function kA(f){(typeof f!="object"||(f==null?void 0:f.length)===void 0)&&nt("Invalid argument for bytesToString");const e=f.length,t=8192;if(e<t)return String.fromCharCode.apply(null,f);const i=[];for(let r=0;r<e;r+=t){const a=Math.min(r+t,e),c=f.subarray(r,a);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function sp(f){typeof f!="string"&&nt("Invalid argument for stringToBytes");const e=f.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=f.charCodeAt(i)&255;return t}function vb(f){return String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,f&255)}function Fv(f){const e=Object.create(null);for(const[t,i]of f)e[t]=i;return e}function yb(){const f=new Uint8Array(4);return f[0]=1,new Uint32Array(f.buffer,0,1)[0]===1}function wb(){try{return new Function(""),!0}catch{return!1}}class pn{static get isLittleEndian(){return ze(this,"isLittleEndian",yb())}static get isEvalSupported(){return ze(this,"isEvalSupported",wb())}static get isOffscreenCanvasSupported(){return ze(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ze(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ze(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ze(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const am=Array.from(Array(256).keys(),f=>f.toString(16).padStart(2,"0"));var Gs,tf,vm;class pe{static makeHexColor(e,t,i){return`#${am[e]}${am[t]}${am[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,a=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,a]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),c=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],a[0],c[0]),Math.min(i[1],r[1],a[1],c[1]),Math.max(i[0],r[0],a[0],c[0]),Math.max(i[1],r[1],a[1],c[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],c=e[2]*t[1]+e[3]*t[3],u=(i+c)/2,d=Math.sqrt((i+c)**2-4*(i*c-a*r))/2,p=u+d||1,m=u-d||1;return[Math.sqrt(p),Math.sqrt(m)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>c?null:[i,a,r,c]}static bezierBoundingBox(e,t,i,r,a,c,u,d,p){return p?(p[0]=Math.min(p[0],e,u),p[1]=Math.min(p[1],t,d),p[2]=Math.max(p[2],e,u),p[3]=Math.max(p[3],t,d)):p=[Math.min(e,u),Math.min(t,d),Math.max(e,u),Math.max(t,d)],x(this,Gs,vm).call(this,e,i,a,u,t,r,c,d,3*(-e+3*(i-a)+u),6*(e-2*i+a),3*(i-e),p),x(this,Gs,vm).call(this,e,i,a,u,t,r,c,d,3*(-t+3*(r-c)+d),6*(t-2*r+c),3*(r-t),p),p}}Gs=new WeakSet,tf=function(e,t,i,r,a,c,u,d,p,m){if(p<=0||p>=1)return;const y=1-p,w=p*p,_=w*p,b=y*(y*(y*e+3*p*t)+3*w*i)+_*r,C=y*(y*(y*a+3*p*c)+3*w*u)+_*d;m[0]=Math.min(m[0],b),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],b),m[3]=Math.max(m[3],C)},vm=function(e,t,i,r,a,c,u,d,p,m,y,w){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&x(this,Gs,tf).call(this,e,t,i,r,a,c,u,d,-y/m,w);return}const _=m**2-4*y*p;if(_<0)return;const b=Math.sqrt(_),C=2*p;x(this,Gs,tf).call(this,e,t,i,r,a,c,u,d,(-m+b)/C,w),x(this,Gs,tf).call(this,e,t,i,r,a,c,u,d,(-m-b)/C,w)},E(pe,Gs);function Ab(f){return decodeURIComponent(escape(f))}let lm=null,qw=null;function _b(f){return lm||(lm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qw=new Map([["","t"]])),f.replaceAll(lm,(e,t,i)=>t?t.normalize("NFKC"):qw.get(i))}function Sb(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const f=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(f);else for(let e=0;e<32;e++)f[e]=Math.floor(Math.random()*255);return kA(f)}const Dv="pdfjs_internal_id_",gs={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function xb(f){return Uint8Array.prototype.toBase64?f.toBase64():btoa(kA(f))}const vs="http://www.w3.org/2000/svg",wo=class wo{};be(wo,"CSS",96),be(wo,"PDF",72),be(wo,"PDF_TO_CSS_UNITS",wo.CSS/wo.PDF);let Xr=wo;async function rp(f,e="text"){if(Qc(f,document.baseURI)){const t=await fetch(f);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",f,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Mh{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:c=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=a;const u=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let p,m,y,w;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,m=0,y=0,w=1;break;case 90:p=0,m=1,y=1,w=0;break;case 270:p=0,m=-1,y=-1,w=0;break;case 0:p=1,m=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,w=-w);let _,b,C,P;p===0?(_=Math.abs(d-e[1])*t+r,b=Math.abs(u-e[0])*t+a,C=(e[3]-e[1])*t,P=(e[2]-e[0])*t):(_=Math.abs(u-e[0])*t+r,b=Math.abs(d-e[1])*t+a,C=(e[2]-e[0])*t,P=(e[3]-e[1])*t),this.transform=[p*t,m*t,y*t,w*t,_-p*t*u-y*t*d,b-m*t*u-w*t*d],this.width=C,this.height=P}get rawDims(){const{viewBox:e}=this;return ze(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new Mh({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(e,t){return pe.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=pe.applyTransform([e[0],e[1]],this.transform),i=pe.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return pe.applyInverseTransform([e,t],this.transform)}}class Ov extends Qr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function op(f){const e=f.length;let t=0;for(;t<e&&f[t].trim()==="";)t++;return f.substring(t,t+5).toLowerCase()==="data:"}function jv(f){return typeof f=="string"&&/\.pdf$/i.test(f)}function Eb(f){return[f]=f.split(/[#?]/,1),f.substring(f.lastIndexOf("/")+1)}function bb(f,e="document.pdf"){if(typeof f!="string")return e;if(op(f))return Ie('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(f);let a=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch{}return a||e}class Yw{constructor(){be(this,"started",Object.create(null));be(this,"times",[])}time(e){e in this.started&&Ie(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ie(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:a}of this.times)e.push(`${i.padEnd(t)} ${a-r}ms
`);return e.join("")}}function Qc(f,e){try{const{protocol:t}=e?new URL(f,e):new URL(f);return t==="http:"||t==="https:"}catch{return!1}}function ai(f){f.preventDefault()}function Kw(f){console.log("Deprecated API usage: "+f)}var vu;class zv{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,vu)||A(this,vu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,vu).exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const p=t[7]||"Z";let m=parseInt(t[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(t[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(c+=m,u+=y):p==="+"&&(c-=m,u-=y),new Date(Date.UTC(i,r,a,c,u,d))}}vu=new WeakMap,E(zv,vu);function Cb(f,{scale:e=1,rotation:t=0}){const{width:i,height:r}=f.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new Mh({viewBox:a,scale:e,rotation:t})}function Hv(f){if(f.startsWith("#")){const e=parseInt(f.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return f.startsWith("rgb(")?f.slice(4,-1).split(",").map(e=>parseInt(e)):f.startsWith("rgba(")?f.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ie(`Not a valid color format: "${f}"`),[0,0,0])}function kb(f){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of f.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;f.set(t,Hv(i))}e.remove()}function ht(f){const{a:e,b:t,c:i,d:r,e:a,f:c}=f.getTransform();return[e,t,i,r,a,c]}function ms(f){const{a:e,b:t,c:i,d:r,e:a,f:c}=f.getTransform().invertSelf();return[e,t,i,r,a,c]}function va(f,e,t=!1,i=!0){if(e instanceof Mh){const{pageWidth:r,pageHeight:a}=e.rawDims,{style:c}=f,u=pn.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${a}px`,m=u?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,y=u?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!t||e.rotation%180===0?(c.width=m,c.height=y):(c.width=y,c.height=m)}i&&f.setAttribute("data-main-rotation",e.rotation)}class ym{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ar,_o,yi,So,yu,wu,Df,TA,gn,PA,RA,nf,LA,Am;const ys=class ys{constructor(e){E(this,gn);E(this,Ar,null);E(this,_o,null);E(this,yi);E(this,So,null);E(this,yu,null);A(this,yi,e),l(ys,wu)||A(ys,wu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=A(this,Ar,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,yi)._uiManager._signal;e.addEventListener("contextmenu",ai,{signal:t}),e.addEventListener("pointerdown",x(ys,Df,TA),{signal:t});const i=A(this,So,document.createElement("div"));i.className="buttons",e.append(i);const r=l(this,yi).toolbarPosition;if(r){const{style:a}=e,c=l(this,yi)._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*c}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return x(this,gn,LA).call(this),e}get div(){return l(this,Ar)}hide(){var e;l(this,Ar).classList.add("hidden"),(e=l(this,_o))==null||e.hideDropdown()}show(){var e;l(this,Ar).classList.remove("hidden"),(e=l(this,yu))==null||e.shown()}async addAltText(e){const t=await e.render();x(this,gn,nf).call(this,t),l(this,So).prepend(t,l(this,gn,Am)),A(this,yu,e)}addColorPicker(e){A(this,_o,e);const t=e.renderButton();x(this,gn,nf).call(this,t),l(this,So).prepend(t,l(this,gn,Am))}remove(){var e;l(this,Ar).remove(),(e=l(this,_o))==null||e.destroy(),A(this,_o,null)}};Ar=new WeakMap,_o=new WeakMap,yi=new WeakMap,So=new WeakMap,yu=new WeakMap,wu=new WeakMap,Df=new WeakSet,TA=function(e){e.stopPropagation()},gn=new WeakSet,PA=function(e){l(this,yi)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},RA=function(e){l(this,yi)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},nf=function(e){const t=l(this,yi)._uiManager._signal;e.addEventListener("focusin",x(this,gn,PA).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",x(this,gn,RA).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ai,{signal:t})},LA=function(){const{editorType:e,_uiManager:t}=l(this,yi),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",l(ys,wu)[e]),x(this,gn,nf).call(this,i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),l(this,So).append(i)},Am=function(){const e=document.createElement("div");return e.className="divider",e},E(ys,Df),E(ys,wu,null);let wm=ys;var Au,xo,Eo,Yr,MA,IA,NA;class Tb{constructor(e){E(this,Yr);E(this,Au,null);E(this,xo,null);E(this,Eo);A(this,Eo,e)}show(e,t,i){const[r,a]=x(this,Yr,IA).call(this,t,i),{style:c}=l(this,xo)||A(this,xo,x(this,Yr,MA).call(this));e.append(l(this,xo)),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,xo).remove()}}Au=new WeakMap,xo=new WeakMap,Eo=new WeakMap,Yr=new WeakSet,MA=function(){const e=A(this,xo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ai,{signal:l(this,Eo)._signal});const t=A(this,Au,document.createElement("div"));return t.className="buttons",e.append(t),x(this,Yr,NA).call(this),e},IA=function(e,t){let i=0,r=0;for(const a of e){const c=a.y+a.height;if(c<i)continue;const u=a.x+(t?a.width:0);if(c>i){r=u,i=c;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,i]},NA=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,Eo)._signal;e.addEventListener("contextmenu",ai,{signal:i}),e.addEventListener("click",()=>{l(this,Eo).highlightSelection("floating_button")},{signal:i}),l(this,Au).append(e)};function Lf(f,e,t){for(const i of t)e.addEventListener(i,f[i].bind(f))}function Pb(f){return Math.round(Math.min(255,Math.max(1,255*f))).toString(16).padStart(2,"0")}var Of;class Rb{constructor(){E(this,Of,0)}get id(){return`${cb}${un(this,Of)._++}`}}Of=new WeakMap;var cl,_u,tn,ul,sf;const Yv=class Yv{constructor(){E(this,ul);E(this,cl,Sb());E(this,_u,0);E(this,tn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const a=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ze(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:a}=e;return x(this,ul,sf).call(this,`${t}_${i}_${r}_${a}`,e)}async getFromUrl(e){return x(this,ul,sf).call(this,e,e)}async getFromBlob(e,t){const i=await t;return x(this,ul,sf).call(this,e,i)}async getFromId(e){l(this,tn)||A(this,tn,new Map);const t=l(this,tn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,tn)||A(this,tn,new Map);let i=l(this,tn).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${l(this,cl)}_${un(this,_u)._++}`,refCounter:1,isSvg:!1},l(this,tn).set(e,i),l(this,tn).set(i.id,i),i}getSvgUrl(e){const t=l(this,tn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;l(this,tn)||A(this,tn,new Map);const t=l(this,tn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=a.convertToBlob()}(r=i.close)==null||r.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,cl)}_`)}};cl=new WeakMap,_u=new WeakMap,tn=new WeakMap,ul=new WeakSet,sf=async function(e,t){l(this,tn)||A(this,tn,new Map);let i=l(this,tn).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,cl)}_${un(this,_u)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await rp(t,"blob")):t instanceof File?r=i.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const a=Yv._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((p,m)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,p()},c.onload=async()=>{const y=i.svgUrl=c.result;u.src=await a?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=m});c.readAsDataURL(r),await d}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){console.error(r),i=null}return l(this,tn).set(e,i),i&&l(this,tn).set(i.id,i),i};let _m=Yv;var Ot,_r,Su,jt;class Lb{constructor(e=128){E(this,Ot,[]);E(this,_r,!1);E(this,Su);E(this,jt,-1);A(this,Su,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:a=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&e(),l(this,_r))return;const d={cmd:e,undo:t,post:i,type:a};if(l(this,jt)===-1){l(this,Ot).length>0&&(l(this,Ot).length=0),A(this,jt,0),l(this,Ot).push(d);return}if(c&&l(this,Ot)[l(this,jt)].type===a){u&&(d.undo=l(this,Ot)[l(this,jt)].undo),l(this,Ot)[l(this,jt)]=d;return}const p=l(this,jt)+1;p===l(this,Su)?l(this,Ot).splice(0,1):(A(this,jt,p),p<l(this,Ot).length&&l(this,Ot).splice(p)),l(this,Ot).push(d)}undo(){if(l(this,jt)===-1)return;A(this,_r,!0);const{undo:e,post:t}=l(this,Ot)[l(this,jt)];e(),t==null||t(),A(this,_r,!1),A(this,jt,l(this,jt)-1)}redo(){if(l(this,jt)<l(this,Ot).length-1){A(this,jt,l(this,jt)+1),A(this,_r,!0);const{cmd:e,post:t}=l(this,Ot)[l(this,jt)];e(),t==null||t(),A(this,_r,!1)}}hasSomethingToUndo(){return l(this,jt)!==-1}hasSomethingToRedo(){return l(this,jt)<l(this,Ot).length-1}destroy(){A(this,Ot,null)}}Ot=new WeakMap,_r=new WeakMap,Su=new WeakMap,jt=new WeakMap;var jf,FA;class Ih{constructor(e){E(this,jf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=pn.platform;for(const[i,r,a={}]of e)for(const c of i){const u=c.startsWith("mac+");t&&u?(this.callbacks.set(c.slice(4),{callback:r,options:a}),this.allKeys.add(c.split("+").at(-1))):!t&&!u&&(this.callbacks.set(c,{callback:r,options:a}),this.allKeys.add(c.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(x(this,jf,FA).call(this,t));if(!i)return;const{callback:r,options:{bubbles:a=!1,args:c=[],checker:u=null}}=i;u&&!u(e,t)||(r.bind(e,...c,t)(),a||(t.stopPropagation(),t.preventDefault()))}}jf=new WeakSet,FA=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const zf=class zf{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return kb(e),ze(this,"_colors",e)}convert(e){const t=Hv(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((a,c)=>a===t[c]))return zf._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?pe.makeHexColor(...t):e}};be(zf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Sm=zf;var hl,Fn,Tt,Wt,dl,As,fl,wi,Sr,pl,bo,Bi,Ai,Co,xu,Eu,gl,bu,Ui,xr,ml,Er,Vi,Hf,br,Cu,Cr,ko,ku,Tu,zt,Ge,_s,To,Pu,Ru,kr,$i,Ss,Lu,Zn,ee,rf,xm,DA,OA,of,jA,zA,HA,Em,BA,bm,Cm,UA,hn,vr,VA,$A,km,WA,Jc,Tm;const sl=class sl{constructor(e,t,i,r,a,c,u,d,p,m,y){E(this,ee);E(this,hl,new AbortController);E(this,Fn,null);E(this,Tt,new Map);E(this,Wt,new Map);E(this,dl,null);E(this,As,null);E(this,fl,null);E(this,wi,new Lb);E(this,Sr,null);E(this,pl,0);E(this,bo,new Set);E(this,Bi,null);E(this,Ai,null);E(this,Co,new Set);E(this,xu,!1);E(this,Eu,!1);E(this,gl,!1);E(this,bu,null);E(this,Ui,null);E(this,xr,null);E(this,ml,null);E(this,Er,!1);E(this,Vi,null);E(this,Hf,new Rb);E(this,br,!1);E(this,Cu,!1);E(this,Cr,null);E(this,ko,null);E(this,ku,null);E(this,Tu,null);E(this,zt,Re.NONE);E(this,Ge,new Set);E(this,_s,null);E(this,To,null);E(this,Pu,null);E(this,Ru,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,kr,[0,0]);E(this,$i,null);E(this,Ss,null);E(this,Lu,null);E(this,Zn,null);const w=this._signal=l(this,hl).signal;A(this,Ss,e),A(this,Lu,t),A(this,dl,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:w}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),r._on("setpreference",this.onSetPreference.bind(this),{signal:w}),r._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:w}),x(this,ee,jA).call(this),x(this,ee,UA).call(this),x(this,ee,Em).call(this),A(this,As,a.annotationStorage),A(this,bu,a.filterFactory),A(this,To,c),A(this,ml,u||null),A(this,xu,d),A(this,Eu,p),A(this,gl,m),A(this,Tu,y||null),this.viewParameters={realScale:Xr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=sl.prototype,t=c=>l(c,Ss).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return ze(this,"_keyboardManager",new Ih([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&l(c,Ss).contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&l(c,Ss).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,i,r;(e=l(this,Zn))==null||e.resolve(),A(this,Zn,null),(t=l(this,hl))==null||t.abort(),A(this,hl,null),this._signal=null;for(const a of l(this,Wt).values())a.destroy();l(this,Wt).clear(),l(this,Tt).clear(),l(this,Co).clear(),A(this,Fn,null),l(this,Ge).clear(),l(this,wi).destroy(),(i=l(this,dl))==null||i.destroy(),(r=l(this,Vi))==null||r.hide(),A(this,Vi,null),l(this,Ui)&&(clearTimeout(l(this,Ui)),A(this,Ui,null)),l(this,$i)&&(clearTimeout(l(this,$i)),A(this,$i,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Tu)}get useNewAltTextFlow(){return l(this,Eu)}get useNewAltTextWhenAddingImage(){return l(this,gl)}get hcmFilter(){return ze(this,"hcmFilter",l(this,To)?l(this,bu).addHCMFilter(l(this,To).foreground,l(this,To).background):"none")}get direction(){return ze(this,"direction",getComputedStyle(l(this,Ss)).direction)}get highlightColors(){return ze(this,"highlightColors",l(this,ml)?new Map(l(this,ml).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ze(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){A(this,ku,e)}editAltText(e,t=!1){var i;(i=l(this,dl))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":A(this,gl,t);break}}onPageChanging({pageNumber:e}){A(this,pl,e-1)}focusMainContainer(){l(this,Ss).focus()}findParent(e,t){for(const i of l(this,Wt).values()){const{x:r,y:a,width:c,height:u}=i.div.getBoundingClientRect();if(e>=r&&e<=r+c&&t>=a&&t<=a+u)return i}return null}disableUserSelect(e=!1){l(this,Lu).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Co).add(e)}removeShouldRescale(e){l(this,Co).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Xr.PDF_TO_CSS_UNITS;for(const t of l(this,Co))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:c}=t,u=t.toString(),p=x(this,ee,rf).call(this,t).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;t.empty();const y=x(this,ee,xm).call(this,p),w=l(this,zt)===Re.NONE,_=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:c,text:u}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(Re.HIGHLIGHT,_);return}_()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,As)&&!l(this,As).has(e.id)&&l(this,As).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Er)&&(A(this,Er,!1),x(this,ee,of).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,Ge))if(t.div.contains(e)){A(this,ko,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,ko))return;const[e,t]=l(this,ko);A(this,ko,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){x(this,ee,Em).call(this),x(this,ee,bm).call(this)}removeEditListeners(){x(this,ee,BA).call(this),x(this,ee,Cm).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,Ai))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,Ai))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,Fn))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of l(this,Ge)){const a=r.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const c of l(this,Ai))if(c.isHandlingMimeForPasting(a.type)){c.paste(a,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){Ie(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const a=[];for(const d of i){const p=await r.deserialize(d);if(!p)return;a.push(p)}const c=()=>{for(const d of a)x(this,ee,km).call(this,d);x(this,ee,Tm).call(this,a)},u=()=>{for(const d of a)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(a){Ie(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,zt)!==Re.NONE&&!this.isEditorHandlingKeyboard&&sl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Er)&&(A(this,Er,!1),x(this,ee,of).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(x(this,ee,zA).call(this),x(this,ee,bm).call(this),x(this,ee,hn).call(this,{isEditing:l(this,zt)!==Re.NONE,isEmpty:x(this,ee,Jc).call(this),hasSomethingToUndo:l(this,wi).hasSomethingToUndo(),hasSomethingToRedo:l(this,wi).hasSomethingToRedo(),hasSelectedEditor:!1})):(x(this,ee,HA).call(this),x(this,ee,Cm).call(this),x(this,ee,hn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Ai)){A(this,Ai,e);for(const t of l(this,Ai))x(this,ee,vr).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,Hf).id}get currentLayer(){return l(this,Wt).get(l(this,pl))}getLayer(e){return l(this,Wt).get(e)}get currentPageIndex(){return l(this,pl)}addLayer(e){l(this,Wt).set(e.pageIndex,e),l(this,br)?e.enable():e.disable()}removeLayer(e){l(this,Wt).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(l(this,zt)!==e&&!(l(this,Zn)&&(await l(this,Zn).promise,!l(this,Zn)))){if(A(this,Zn,Promise.withResolvers()),A(this,zt,e),e===Re.NONE){this.setEditingState(!1),x(this,ee,$A).call(this),l(this,Zn).resolve();return}this.setEditingState(!0),await x(this,ee,VA).call(this),this.unselectAll();for(const r of l(this,Wt).values())r.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),l(this,Zn).resolve();return}for(const r of l(this,Tt).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();l(this,Zn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,zt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,Ai)){switch(e){case Ce.CREATE:this.currentLayer.addNewEditor();return;case Ce.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,ku))==null||i.updateColor(t);break;case Ce.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Pu)||A(this,Pu,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of l(this,Ge))r.updateParams(e,t);for(const r of l(this,Ai))r.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var a;for(const c of l(this,Tt).values())c.editorType===e&&c.show(t);(((a=l(this,Pu))==null?void 0:a.get(Ce.HIGHLIGHT_SHOW_ALL))??!0)!==t&&x(this,ee,vr).call(this,[[Ce.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Cu)!==e){A(this,Cu,e);for(const t of l(this,Wt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,Tt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,Tt).get(e)}addEditor(e){l(this,Tt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,Ui)&&clearTimeout(l(this,Ui)),A(this,Ui,setTimeout(()=>{this.focusMainContainer(),A(this,Ui,null)},0))),l(this,Tt).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,bo).has(e.annotationElementId))&&((t=l(this,As))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,bo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,bo).has(e)}removeDeletedAnnotationElement(e){l(this,bo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Fn)!==e&&(A(this,Fn,e),e&&x(this,ee,vr).call(this,e.propertiesToUpdate))}updateUI(e){l(this,ee,WA)===e&&x(this,ee,vr).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,Ge).has(e)){l(this,Ge).delete(e),e.unselect(),x(this,ee,hn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Ge).add(e),e.select(),x(this,ee,vr).call(this,e.propertiesToUpdate),x(this,ee,hn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,Ge))t!==e&&t.unselect();l(this,Ge).clear(),l(this,Ge).add(e),e.select(),x(this,ee,vr).call(this,e.propertiesToUpdate),x(this,ee,hn).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Ge).has(e)}get firstSelectedEditor(){return l(this,Ge).values().next().value}unselect(e){e.unselect(),l(this,Ge).delete(e),x(this,ee,hn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Ge).size!==0}get isEnterHandled(){return l(this,Ge).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,wi).undo(),x(this,ee,hn).call(this,{hasSomethingToUndo:l(this,wi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,ee,Jc).call(this)})}redo(){l(this,wi).redo(),x(this,ee,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,wi).hasSomethingToRedo(),isEmpty:x(this,ee,Jc).call(this)})}addCommands(e){l(this,wi).add(e),x(this,ee,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,ee,Jc).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,Ge)],t=()=>{for(const r of e)r.remove()},i=()=>{for(const r of e)x(this,ee,km).call(this,r)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Fn))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Fn)||this.hasSelection}selectAll(){for(const e of l(this,Ge))e.commit();x(this,ee,Tm).call(this,l(this,Tt).values())}unselectAll(){if(!(l(this,Fn)&&(l(this,Fn).commitOrRemove(),l(this,zt)!==Re.NONE))&&this.hasSelection){for(const e of l(this,Ge))e.unselect();l(this,Ge).clear(),x(this,ee,hn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,kr)[0]+=e,l(this,kr)[1]+=t;const[r,a]=l(this,kr),c=[...l(this,Ge)],u=1e3;l(this,$i)&&clearTimeout(l(this,$i)),A(this,$i,setTimeout(()=>{A(this,$i,null),l(this,kr)[0]=l(this,kr)[1]=0,this.addCommands({cmd:()=>{for(const d of c)l(this,Tt).has(d.id)&&d.translateInPage(r,a)},undo:()=>{for(const d of c)l(this,Tt).has(d.id)&&d.translateInPage(-r,-a)},mustExec:!1})},u));for(const d of c)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Bi,new Map);for(const e of l(this,Ge))l(this,Bi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Bi))return!1;this.disableUserSelect(!1);const e=l(this,Bi);A(this,Bi,null);let t=!1;for(const[{x:r,y:a,pageIndex:c},u]of e)u.newX=r,u.newY=a,u.newPageIndex=c,t||(t=r!==u.savedX||a!==u.savedY||c!==u.savedPageIndex);if(!t)return!1;const i=(r,a,c,u)=>{if(l(this,Tt).has(r.id)){const d=l(this,Wt).get(u);d?r._setParentAndPosition(d,a,c):(r.pageIndex=u,r.x=a,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:a,newY:c,newPageIndex:u}]of e)i(r,a,c,u)},undo:()=>{for(const[r,{savedX:a,savedY:c,savedPageIndex:u}]of e)i(r,a,c,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Bi))for(const i of l(this,Bi).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,Ge).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Fn)===e}getActive(){return l(this,Fn)}getMode(){return l(this,zt)}get imageManager(){return ze(this,"imageManager",new _m)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,m=t.rangeCount;p<m;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:r,width:a,height:c}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(p,m,y,w)=>({x:(m-r)/c,y:1-(p+y-i)/a,width:w/c,height:y/a});break;case"180":u=(p,m,y,w)=>({x:1-(p+y-i)/a,y:1-(m+w-r)/c,width:y/a,height:w/c});break;case"270":u=(p,m,y,w)=>({x:1-(m+w-r)/c,y:(p-i)/a,width:w/c,height:y/a});break;default:u=(p,m,y,w)=>({x:(p-i)/a,y:(m-r)/c,width:y/a,height:w/c});break}const d=[];for(let p=0,m=t.rangeCount;p<m;p++){const y=t.getRangeAt(p);if(!y.collapsed)for(const{x:w,y:_,width:b,height:C}of y.getClientRects())b===0||C===0||d.push(u(w,_,b,C))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,fl)||A(this,fl,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,fl))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=l(this,fl))==null?void 0:r.get(e.data.id);if(!t)return;const i=l(this,As).getRawValue(t);i&&(l(this,zt)===Re.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};hl=new WeakMap,Fn=new WeakMap,Tt=new WeakMap,Wt=new WeakMap,dl=new WeakMap,As=new WeakMap,fl=new WeakMap,wi=new WeakMap,Sr=new WeakMap,pl=new WeakMap,bo=new WeakMap,Bi=new WeakMap,Ai=new WeakMap,Co=new WeakMap,xu=new WeakMap,Eu=new WeakMap,gl=new WeakMap,bu=new WeakMap,Ui=new WeakMap,xr=new WeakMap,ml=new WeakMap,Er=new WeakMap,Vi=new WeakMap,Hf=new WeakMap,br=new WeakMap,Cu=new WeakMap,Cr=new WeakMap,ko=new WeakMap,ku=new WeakMap,Tu=new WeakMap,zt=new WeakMap,Ge=new WeakMap,_s=new WeakMap,To=new WeakMap,Pu=new WeakMap,Ru=new WeakMap,kr=new WeakMap,$i=new WeakMap,Ss=new WeakMap,Lu=new WeakMap,Zn=new WeakMap,ee=new WeakSet,rf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},xm=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of l(this,Wt).values())if(i.hasTextLayer(e))return i;return null},DA=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=x(this,ee,rf).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(l(this,Vi)||A(this,Vi,new Tb(this)),l(this,Vi).show(i,r,this.direction==="ltr"))},OA=function(){var a,c,u;const e=document.getSelection();if(!e||e.isCollapsed){l(this,_s)&&((a=l(this,Vi))==null||a.hide(),A(this,_s,null),x(this,ee,hn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,_s))return;const r=x(this,ee,rf).call(this,e).closest(".textLayer");if(!r){l(this,_s)&&((c=l(this,Vi))==null||c.hide(),A(this,_s,null),x(this,ee,hn).call(this,{hasSelectedText:!1}));return}if((u=l(this,Vi))==null||u.hide(),A(this,_s,t),x(this,ee,hn).call(this,{hasSelectedText:!0}),!(l(this,zt)!==Re.HIGHLIGHT&&l(this,zt)!==Re.NONE)&&(l(this,zt)===Re.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,Er,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=l(this,zt)===Re.HIGHLIGHT?x(this,ee,xm).call(this,r):null;d==null||d.toggleDrawing();const p=new AbortController,m=this.combinedSignal(p),y=w=>{w.type==="pointerup"&&w.button!==0||(p.abort(),d==null||d.toggleDrawing(!0),w.type==="pointerup"&&x(this,ee,of).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("blur",y,{signal:m})}},of=function(e=""){l(this,zt)===Re.HIGHLIGHT?this.highlightSelection(e):l(this,xu)&&x(this,ee,DA).call(this)},jA=function(){document.addEventListener("selectionchange",x(this,ee,OA).bind(this),{signal:this._signal})},zA=function(){if(l(this,xr))return;A(this,xr,new AbortController);const e=this.combinedSignal(l(this,xr));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},HA=function(){var e;(e=l(this,xr))==null||e.abort(),A(this,xr,null)},Em=function(){if(l(this,Cr))return;A(this,Cr,new AbortController);const e=this.combinedSignal(l(this,Cr));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},BA=function(){var e;(e=l(this,Cr))==null||e.abort(),A(this,Cr,null)},bm=function(){if(l(this,Sr))return;A(this,Sr,new AbortController);const e=this.combinedSignal(l(this,Sr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Cm=function(){var e;(e=l(this,Sr))==null||e.abort(),A(this,Sr,null)},UA=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},hn=function(e){Object.entries(e).some(([i,r])=>l(this,Ru)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Ru),e)}),l(this,zt)===Re.HIGHLIGHT&&e.hasSelectedEditor===!1&&x(this,ee,vr).call(this,[[Ce.HIGHLIGHT_FREE,!0]]))},vr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},VA=async function(){if(!l(this,br)){A(this,br,!0);const e=[];for(const t of l(this,Wt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Tt).values())t.enable()}},$A=function(){if(this.unselectAll(),l(this,br)){A(this,br,!1);for(const e of l(this,Wt).values())e.disable();for(const e of l(this,Tt).values())e.disable()}},km=function(e){const t=l(this,Wt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},WA=function(){let e=null;for(e of l(this,Ge));return e},Jc=function(){if(l(this,Tt).size===0)return!0;if(l(this,Tt).size===1)for(const e of l(this,Tt).values())return e.isEmpty();return!1},Tm=function(e){for(const t of l(this,Ge))t.unselect();l(this,Ge).clear();for(const t of e)t.isEmpty()||(l(this,Ge).add(t),t.select());x(this,ee,hn).call(this,{hasSelectedEditor:this.hasSelection})},be(sl,"TRANSLATE_SMALL",1),be(sl,"TRANSLATE_BIG",10);let ya=sl;var Ht,Wi,_i,vl,Gi,Dn,yl,Xi,bn,xs,Po,qi,Tr,Li,Zc,af;const dn=class dn{constructor(e){E(this,Li);E(this,Ht,null);E(this,Wi,!1);E(this,_i,null);E(this,vl,null);E(this,Gi,null);E(this,Dn,null);E(this,yl,!1);E(this,Xi,null);E(this,bn,null);E(this,xs,null);E(this,Po,null);E(this,qi,!1);A(this,bn,e),A(this,qi,e._uiManager.useNewAltTextFlow),l(dn,Tr)||A(dn,Tr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){dn._l10n??(dn._l10n=e)}async render(){const e=A(this,_i,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=A(this,vl,document.createElement("span"));e.append(t),l(this,qi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(dn,Tr).missing),t.setAttribute("data-l10n-id",l(dn,Tr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=l(this,bn)._uiManager._signal;e.addEventListener("contextmenu",ai,{signal:i}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),l(this,bn)._uiManager.editAltText(l(this,bn)),l(this,qi)&&l(this,bn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Li,Zc)}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(A(this,yl,!0),r(a))},{signal:i}),await x(this,Li,af).call(this),e}finish(){l(this,_i)&&(l(this,_i).focus({focusVisible:l(this,yl)}),A(this,yl,!1))}isEmpty(){return l(this,qi)?l(this,Ht)===null:!l(this,Ht)&&!l(this,Wi)}hasData(){return l(this,qi)?l(this,Ht)!==null||!!l(this,xs):this.isEmpty()}get guessedText(){return l(this,xs)}async setGuessedText(e){l(this,Ht)===null&&(A(this,xs,e),A(this,Po,await dn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),x(this,Li,af).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,qi)||l(this,Ht)){(t=l(this,Xi))==null||t.remove(),A(this,Xi,null);return}if(!l(this,Xi)){const i=A(this,Xi,document.createElement("div"));i.className="noAltTextBadge",l(this,bn).div.append(i)}l(this,Xi).classList.toggle("hidden",!e)}serialize(e){let t=l(this,Ht);return!e&&l(this,xs)===t&&(t=l(this,Po)),{altText:t,decorative:l(this,Wi),guessedText:l(this,xs),textWithDisclaimer:l(this,Po)}}get data(){return{altText:l(this,Ht),decorative:l(this,Wi)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:r,cancel:a=!1}){i&&(A(this,xs,i),A(this,Po,r)),!(l(this,Ht)===e&&l(this,Wi)===t)&&(a||(A(this,Ht,e),A(this,Wi,t)),x(this,Li,af).call(this))}toggle(e=!1){l(this,_i)&&(!e&&l(this,Dn)&&(clearTimeout(l(this,Dn)),A(this,Dn,null)),l(this,_i).disabled=!e)}shown(){l(this,bn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Li,Zc)}})}destroy(){var e,t;(e=l(this,_i))==null||e.remove(),A(this,_i,null),A(this,vl,null),A(this,Gi,null),(t=l(this,Xi))==null||t.remove(),A(this,Xi,null)}};Ht=new WeakMap,Wi=new WeakMap,_i=new WeakMap,vl=new WeakMap,Gi=new WeakMap,Dn=new WeakMap,yl=new WeakMap,Xi=new WeakMap,bn=new WeakMap,xs=new WeakMap,Po=new WeakMap,qi=new WeakMap,Tr=new WeakMap,Li=new WeakSet,Zc=function(){return l(this,Ht)&&"added"||l(this,Ht)===null&&this.guessedText&&"review"||"missing"},af=async function(){var r,a,c;const e=l(this,_i);if(!e)return;if(l(this,qi)){if(e.classList.toggle("done",!!l(this,Ht)),e.setAttribute("data-l10n-id",l(dn,Tr)[l(this,Li,Zc)]),(r=l(this,vl))==null||r.setAttribute("data-l10n-id",l(dn,Tr)[`${l(this,Li,Zc)}-label`]),!l(this,Ht)){(a=l(this,Gi))==null||a.remove();return}}else{if(!l(this,Ht)&&!l(this,Wi)){e.classList.remove("done"),(c=l(this,Gi))==null||c.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Gi);if(!t){A(this,Gi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,bn).id}`;const u=100,d=l(this,bn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(l(this,Dn)),A(this,Dn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{A(this,Dn,setTimeout(()=>{A(this,Dn,null),l(this,Gi).classList.add("show"),l(this,bn)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),e.addEventListener("mouseleave",()=>{var p;l(this,Dn)&&(clearTimeout(l(this,Dn)),A(this,Dn,null)),(p=l(this,Gi))==null||p.classList.remove("show")},{signal:d})}l(this,Wi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,Ht)),t.parentNode||e.append(t);const i=l(this,bn).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},E(dn,Tr,null),be(dn,"_l10n",null);let Mf=dn;var Ro,Si,ct,wl,Lo,Gt,Mo,Pr,Mu,Io,Rr,Iu,No,Es,Yi,Al,_l,ei,Nu,Bf,Me,Pm,Fu,Rm,Lm,GA,XA,Mm,Im,Nm,qA,Fm,YA,KA,QA,Dm,eu;const $e=class $e{constructor(e){E(this,Me);E(this,Ro,null);E(this,Si,null);E(this,ct,null);E(this,wl,!1);E(this,Lo,!1);E(this,Gt,null);E(this,Mo,null);E(this,Pr,null);E(this,Mu,"");E(this,Io,!1);E(this,Rr,null);E(this,Iu,!1);E(this,No,!1);E(this,Es,!1);E(this,Yi,null);E(this,Al,0);E(this,_l,0);E(this,ei,null);be(this,"_editToolbar",null);be(this,"_initialOptions",Object.create(null));be(this,"_initialData",null);be(this,"_isVisible",!0);be(this,"_uiManager",null);be(this,"_focusEventsAllowed",!0);E(this,Nu,!1);E(this,Bf,$e._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[a,c];const[u,d]=this.parentDimensions;this.x=e.x/u,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=$e.prototype._resizeWithKeyboard,t=ya.TRANSLATE_SMALL,i=ya.TRANSLATE_BIG;return ze(this,"_resizerKeyboardManager",new Ih([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],$e.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ze(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Mb({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if($e._l10n??($e._l10n=e),$e._l10nResizer||($e._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),$e._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);$e._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Nu)}set _isDraggable(e){var t;A(this,Nu,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Bf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):x(this,Me,eu).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Io)?A(this,Io,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[a,c]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/a,this.y=(t+r)/c,this.fixAndSetPosition()}translate(e,t){x(this,Me,Pm).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Rr)||A(this,Rr,[this.x,this.y]),x(this,Me,Pm).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Rr)||A(this,Rr,[this.x,this.y]);const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:c}=this;const[u,d]=this.getBaseTranslation();a+=u,c+=d,this.div.style.left=`${(100*a).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Rr)&&(l(this,Rr)[0]!==this.x||l(this,Rr)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=$e,r=i/e,a=i/t;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:a,width:c,height:u}=this;if(c*=t,u*=i,r*=t,a*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-c,r)),a=Math.max(0,Math.min(i-u,a));break;case 90:r=Math.max(0,Math.min(t-u,r)),a=Math.min(i,Math.max(c,a));break;case 180:r=Math.min(t,Math.max(c,r)),a=Math.min(i,Math.max(u,a));break;case 270:r=Math.min(t,Math.max(u,r)),a=Math.max(0,Math.min(i-c,a));break}this.x=r/=t,this.y=a/=i;const[d,p]=this.getBaseTranslation();r+=d,a+=p;const{style:m}=this.div;m.left=`${(100*r).toFixed(2)}%`,m.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return x(i=$e,Fu,Rm).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return x(i=$e,Fu,Rm).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,l(this,Lo)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),a=!l(this,Lo)&&t.endsWith("%");if(r&&a)return;const[c,u]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/c).toFixed(2)}%`),!l(this,Lo)&&!a&&(e.height=`${(100*parseFloat(t)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,ct))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,No)?this._editToolbar:(this._editToolbar=new wm(this),this.div.append(this._editToolbar.render()),l(this,ct)&&await this._editToolbar.addAltText(l(this,ct)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,ct))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,ct)||(Mf.initialize($e._l10n),A(this,ct,new Mf(this)),l(this,Ro)&&(l(this,ct).data=l(this,Ro),A(this,Ro,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,ct))==null?void 0:e.data}set altTextData(e){l(this,ct)&&(l(this,ct).data=e)}get guessedAltText(){var e;return(e=l(this,ct))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,ct))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,ct))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,ct)&&!l(this,ct).isEmpty()}hasAltTextData(){var e;return((e=l(this,ct))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,wl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),x(this,Me,Fm).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),Lf(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(A(this,Io,!0),this._isDraggable){x(this,Me,qA).call(this,e);return}x(this,Me,Nm).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,Yi)&&clearTimeout(l(this,Yi)),A(this,Yi,setTimeout(()=>{var e;A(this,Yi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[a,c]=this.pageDimensions,[u,d]=this.pageTranslation,p=e/r,m=t/r,y=this.x*a,w=this.y*c,_=this.width*a,b=this.height*c;switch(i){case 0:return[y+p+u,c-w-m-b+d,y+p+_+u,c-w-m+d];case 90:return[y+m+u,c-w+p+d,y+m+b+u,c-w+p+_+d];case 180:return[y-p-_+u,c-w+m+d,y-p+u,c-w+m+b+d];case 270:return[y-m-b+u,c-w-p-_+d,y-m+u,c-w-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,a,c]=e,u=a-i,d=c-r;switch(this.rotation){case 0:return[i,t-c,u,d];case 90:return[i,t-r,d,u];case 180:return[a,t-r,u,d];case 270:return[a,t-c,d,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){A(this,No,!0)}disableEditMode(){A(this,No,!1)}isInEditMode(){return l(this,No)}shouldGetKeyboardEvents(){return l(this,Es)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){x(this,Me,Fm).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){nt("An editor must be serializable")}static async deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,A(r,Ro,e.accessibilityData);const[a,c]=r.pageDimensions,[u,d,p,m]=r.getRectInCurrentCoords(e.rect,c);return r.x=u/a,r.y=d/c,r.width=p/a,r.height=m/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,Pr))==null||e.abort(),A(this,Pr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Yi)&&(clearTimeout(l(this,Yi)),A(this,Yi,null)),x(this,Me,eu).call(this),this.removeEditToolbar(),l(this,ei)){for(const t of l(this,ei).values())clearTimeout(t);A(this,ei,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(this,Me,GA).call(this),l(this,Gt).classList.remove("hidden"),Lf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Mo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,Gt).children;if(!l(this,Si)){A(this,Si,Array.from(t));const c=x(this,Me,YA).bind(this),u=x(this,Me,KA).bind(this),d=this._uiManager._signal;for(const p of l(this,Si)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:d}),p.addEventListener("blur",u,{signal:d}),p.addEventListener("focus",x(this,Me,QA).bind(this,m),{signal:d}),p.setAttribute("data-l10n-id",$e._l10nResizer[m])}}const i=l(this,Si)[0];let r=0;for(const c of t){if(c===i)break;r++}const a=(360-this.rotation+this.parentRotation)%360/90*(l(this,Si).length/4);if(a!==r){if(a<r)for(let u=0;u<r-a;u++)l(this,Gt).append(l(this,Gt).firstChild);else if(a>r)for(let u=0;u<a-r;u++)l(this,Gt).firstChild.before(l(this,Gt).lastChild);let c=0;for(const u of t){const p=l(this,Si)[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",$e._l10nResizer[p])}}x(this,Me,Dm).call(this,0),A(this,Es,!0),l(this,Gt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Es)&&x(this,Me,Im).call(this,l(this,Mu),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){x(this,Me,eu).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,a;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(i=l(this,ct))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,r,a;(e=l(this,Gt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(a=l(this,ct))==null||a.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Iu)}set isEditing(e){A(this,Iu,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){A(this,Lo,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,ei)||A(this,ei,new Map);const{action:i}=e;let r=l(this,ei).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),l(this,ei).delete(i),l(this,ei).size===0&&A(this,ei,null)},$e._telemetryTimeout),l(this,ei).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),A(this,wl,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,wl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ro=new WeakMap,Si=new WeakMap,ct=new WeakMap,wl=new WeakMap,Lo=new WeakMap,Gt=new WeakMap,Mo=new WeakMap,Pr=new WeakMap,Mu=new WeakMap,Io=new WeakMap,Rr=new WeakMap,Iu=new WeakMap,No=new WeakMap,Es=new WeakMap,Yi=new WeakMap,Al=new WeakMap,_l=new WeakMap,ei=new WeakMap,Nu=new WeakMap,Bf=new WeakMap,Me=new WeakSet,Pm=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()},Fu=new WeakSet,Rm=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Lm=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},GA=function(){if(l(this,Gt))return;A(this,Gt,document.createElement("div")),l(this,Gt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");l(this,Gt).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",x(this,Me,XA).bind(this,i),{signal:t}),r.addEventListener("contextmenu",ai,{signal:t}),r.tabIndex=-1}this.div.prepend(l(this,Gt))},XA=function(e,t){var b;t.preventDefault();const{isMac:i}=pn.platform;if(t.button!==0||t.ctrlKey&&i)return;(b=l(this,ct))==null||b.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const a=new AbortController,c=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(this,Me,Im).bind(this,e),{passive:!0,capture:!0,signal:c}),window.addEventListener("contextmenu",ai,{signal:c});const u=this.x,d=this.y,p=this.width,m=this.height,y=this.parent.div.style.cursor,w=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const _=()=>{var C;a.abort(),this.parent.togglePointerEvents(!0),(C=l(this,ct))==null||C.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=y,this.div.style.cursor=w,x(this,Me,Mm).call(this,u,d,p,m)};window.addEventListener("pointerup",_,{signal:c}),window.addEventListener("blur",_,{signal:c})},Mm=function(e,t,i,r){const a=this.x,c=this.y,u=this.width,d=this.height;a===e&&c===t&&u===i&&d===r||this.addCommands({cmd:()=>{this.width=u,this.height=d,this.x=a,this.y=c;const[p,m]=this.parentDimensions;this.setDims(p*u,m*d),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[p,m]=this.parentDimensions;this.setDims(p*i,m*r),this.fixAndSetPosition()},mustExec:!0})},Im=function(e,t){const[i,r]=this.parentDimensions,a=this.x,c=this.y,u=this.width,d=this.height,p=$e.MIN_SIZE/i,m=$e.MIN_SIZE/r,y=K=>Math.round(K*1e4)/1e4,w=x(this,Me,Lm).call(this,this.rotation),_=(K,U)=>[w[0]*K+w[2]*U,w[1]*K+w[3]*U],b=x(this,Me,Lm).call(this,360-this.rotation),C=(K,U)=>[b[0]*K+b[2]*U,b[1]*K+b[3]*U];let P,k,I=!1,F=!1;switch(e){case"topLeft":I=!0,P=(K,U)=>[0,0],k=(K,U)=>[K,U];break;case"topMiddle":P=(K,U)=>[K/2,0],k=(K,U)=>[K/2,U];break;case"topRight":I=!0,P=(K,U)=>[K,0],k=(K,U)=>[0,U];break;case"middleRight":F=!0,P=(K,U)=>[K,U/2],k=(K,U)=>[0,U/2];break;case"bottomRight":I=!0,P=(K,U)=>[K,U],k=(K,U)=>[0,0];break;case"bottomMiddle":P=(K,U)=>[K/2,U],k=(K,U)=>[K/2,0];break;case"bottomLeft":I=!0,P=(K,U)=>[0,U],k=(K,U)=>[K,0];break;case"middleLeft":F=!0,P=(K,U)=>[0,U/2],k=(K,U)=>[K,U/2];break}const N=P(u,d),B=k(u,d);let H=_(...B);const $=y(a+H[0]),W=y(c+H[1]);let Q=1,ne=1,[te,xe]=this.screenToPageTranslation(t.movementX,t.movementY);if([te,xe]=C(te/i,xe/r),I){const K=Math.hypot(u,d);Q=ne=Math.max(Math.min(Math.hypot(B[0]-N[0]-te,B[1]-N[1]-xe)/K,1/u,1/d),p/u,m/d)}else F?Q=Math.max(p,Math.min(1,Math.abs(B[0]-N[0]-te)))/u:ne=Math.max(m,Math.min(1,Math.abs(B[1]-N[1]-xe)))/d;const fe=y(u*Q),he=y(d*ne);H=_(...k(fe,he));const we=$-H[0],ge=W-H[1];this.width=fe,this.height=he,this.x=we,this.y=ge,this.setDims(i*fe,r*he),this.fixAndSetPosition()},Nm=function(e){const{isMac:t}=pn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},qA=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,r=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),A(this,Al,e.clientX),A(this,_l,e.clientY);const c=u=>{const{clientX:d,clientY:p}=u,[m,y]=this.screenToPageTranslation(d-l(this,Al),p-l(this,_l));A(this,Al,d),A(this,_l,p),this._uiManager.dragSelectedEditors(m,y)};window.addEventListener("pointermove",c,{passive:!0,capture:!0,signal:r})}const a=()=>{i.abort(),t&&this.div.classList.remove("moving"),A(this,Io,!1),this._uiManager.endDragSession()||x(this,Me,Nm).call(this,e)};window.addEventListener("pointerup",a,{signal:r}),window.addEventListener("blur",a,{signal:r})},Fm=function(){if(l(this,Pr)||!this.div)return;A(this,Pr,new AbortController);const e=this._uiManager.combinedSignal(l(this,Pr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},YA=function(e){$e._resizerKeyboardManager.exec(this,e)},KA=function(e){var t;l(this,Es)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,Gt)&&x(this,Me,eu).call(this)},QA=function(e){A(this,Mu,l(this,Es)?e:"")},Dm=function(e){if(l(this,Si))for(const t of l(this,Si))t.tabIndex=e},eu=function(){if(A(this,Es,!1),x(this,Me,Dm).call(this,-1),l(this,Mo)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=l(this,Mo);x(this,Me,Mm).call(this,e,t,i,r),A(this,Mo,null)}},E($e,Fu),be($e,"_l10n",null),be($e,"_l10nResizer",null),be($e,"_borderLineWidth",-1),be($e,"_colorManager",new Sm),be($e,"_zIndex",1),be($e,"_telemetryTimeout",1e3);let qe=$e;class Mb extends qe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Qw=3285377520,Jn=4294901760,Hi=65535;class JA{constructor(e){this.h1=e?e&4294967295:Qw,this.h2=e?e&4294967295:Qw}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let C=0,P=e.length;C<P;C++){const k=e.charCodeAt(C);k<=255?t[i++]=k:(t[i++]=k>>>8,t[i++]=k&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,a=i-r*4,c=new Uint32Array(t.buffer,0,r);let u=0,d=0,p=this.h1,m=this.h2;const y=3432918353,w=461845907,_=y&Hi,b=w&Hi;for(let C=0;C<r;C++)C&1?(u=c[C],u=u*y&Jn|u*_&Hi,u=u<<15|u>>>17,u=u*w&Jn|u*b&Hi,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(d=c[C],d=d*y&Jn|d*_&Hi,d=d<<15|d>>>17,d=d*w&Jn|d*b&Hi,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,a){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*y&Jn|u*_&Hi,u=u<<15|u>>>17,u=u*w&Jn|u*b&Hi,r&1?p^=u:m^=u}this.h1=p,this.h2=m}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Jn|e*36045&Hi,t=t*4283543511&Jn|((t<<16|e>>>16)*2950163797&Jn)>>>16,e^=t>>>1,e=e*444984403&Jn|e*60499&Hi,t=t*3301882366&Jn|((t<<16|e>>>16)*3120437893&Jn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Om=Object.freeze({map:null,hash:"",transfer:void 0});var Fo,Do,Bt,Uf,ZA;class Bv{constructor(){E(this,Uf);E(this,Fo,!1);E(this,Do,null);E(this,Bt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,Bt).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,Bt).get(e)}remove(e){if(l(this,Bt).delete(e),l(this,Bt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,Bt).values())if(t instanceof qe)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,Bt).get(e);let r=!1;if(i!==void 0)for(const[a,c]of Object.entries(t))i[a]!==c&&(r=!0,i[a]=c);else r=!0,l(this,Bt).set(e,t);r&&x(this,Uf,ZA).call(this),t instanceof qe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,Bt).has(e)}getAll(){return l(this,Bt).size>0?Fv(l(this,Bt)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,Bt).size}resetModified(){l(this,Fo)&&(A(this,Fo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new e_(this)}get serializable(){if(l(this,Bt).size===0)return Om;const e=new Map,t=new JA,i=[],r=Object.create(null);let a=!1;for(const[c,u]of l(this,Bt)){const d=u instanceof qe?u.serialize(!1,r):u;d&&(e.set(c,d),t.update(`${c}:${JSON.stringify(d)}`),a||(a=!!d.bitmap))}if(a)for(const c of e.values())c.bitmap&&i.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Om}get editorStats(){let e=null;const t=new Map;for(const i of l(this,Bt).values()){if(!(i instanceof qe))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:a}=r;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[a]||(e[a]=new Map);for(const[u,d]of Object.entries(r)){if(u==="type")continue;let p=c.get(u);p||(p=new Map,c.set(u,p));const m=p.get(d)??0;p.set(d,m+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){A(this,Do,null)}get modifiedIds(){if(l(this,Do))return l(this,Do);const e=[];for(const t of l(this,Bt).values())!(t instanceof qe)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return A(this,Do,{ids:new Set(e),hash:e.join(",")})}}Fo=new WeakMap,Do=new WeakMap,Bt=new WeakMap,Uf=new WeakSet,ZA=function(){l(this,Fo)||(A(this,Fo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Du;class e_ extends Bv{constructor(t){super();E(this,Du);const{map:i,hash:r,transfer:a}=t.serializable,c=structuredClone(i,a?{transfer:a}:null);A(this,Du,{map:c,hash:r,transfer:a})}get print(){nt("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Du)}get modifiedIds(){return ze(this,"modifiedIds",{ids:new Set,hash:""})}}Du=new WeakMap;var Sl;class Ib{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){E(this,Sl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Sl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,Sl).has(e.loadedName))){if(Lt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:a}=e,c=new FontFace(i,r,a);this.addNativeFontFace(c);try{await c.load(),l(this,Sl).add(i),t==null||t(e)}catch{Ie(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Ie(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ze(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(an||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ze(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Lt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const a=i.shift();setTimeout(a.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ze(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(N,B){return N.charCodeAt(B)<<24|N.charCodeAt(B+1)<<16|N.charCodeAt(B+2)<<8|N.charCodeAt(B+3)&255}function r(N,B,H,$){const W=N.substring(0,B),Q=N.substring(B+H);return W+$+Q}let a,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let p=0;function m(N,B){if(++p>30){Ie("Load test font never loaded."),B();return}if(d.font="30px "+N,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(m.bind(null,N,B))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,y.length,y);const b=16,C=1482184792;let P=i(w,b);for(a=0,c=y.length-3;a<c;a+=4)P=P-C+i(y,a)|0;a<y.length&&(P=P-C+i(y+"XXX",a)|0),w=r(w,b,4,vb(P));const k=`url(data:font/opentype;base64,${btoa(w)});`,I=`@font-face {font-family:"${y}";src:${k}}`;this.insertRule(I);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const N of[e.loadedName,y]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=N,F.append(B)}this._document.body.append(F),m(y,()=>{F.remove(),t.complete()})}}Sl=new WeakMap;class Nb{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${xb(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(a){Ie(`getPathGenerator - ignoring character: "${a}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(a,c){};const r=[];for(let a=0,c=i.length;a<c;)switch(i[a++]){case gs.BEZIER_CURVE_TO:{const[u,d,p,m,y,w]=i.slice(a,a+6);r.push(_=>_.bezierCurveTo(u,d,p,m,y,w)),a+=6}break;case gs.MOVE_TO:{const[u,d]=i.slice(a,a+2);r.push(p=>p.moveTo(u,d)),a+=2}break;case gs.LINE_TO:{const[u,d]=i.slice(a,a+2);r.push(p=>p.lineTo(u,d)),a+=2}break;case gs.QUADRATIC_CURVE_TO:{const[u,d,p,m]=i.slice(a,a+4);r.push(y=>y.quadraticCurveTo(u,d,p,m)),a+=4}break;case gs.RESTORE:r.push(u=>u.restore());break;case gs.SAVE:r.push(u=>u.save());break;case gs.SCALE:Lt(r.length===2,"Scale command is only valid at the third position.");break;case gs.TRANSFORM:{const[u,d,p,m,y,w]=i.slice(a,a+6);r.push(_=>_.transform(u,d,p,m,y,w)),a+=6}break;case gs.TRANSLATE:{const[u,d]=i.slice(a,a+2);r.push(p=>p.translate(u,d)),a+=2}break}return this.compiledGlyphs[t]=function(c,u){r[0](c),r[1](c),c.scale(u,-u);for(let d=2,p=r.length;d<p;d++)r[d](c)}}}var Ou;class t_{constructor({enableHWA:e=!1}){E(this,Ou,!1);A(this,Ou,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,Ou)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){nt("Abstract method `_createCanvas` called.")}}Ou=new WeakMap;class Fb extends t_{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class n_{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class i_ extends n_{async _fetch(e){const t=await rp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):sp(t)}}class s_{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,a){return"none"}destroy(e=!1){}}var Oo,jo,Ki,bs,nn,Vf,zo,se,en,Ka,Qa,lf,Ja,r_,jm,Za,tu,nu,zm,iu;class Db extends s_{constructor({docId:t,ownerDocument:i=globalThis.document}){super();E(this,se);E(this,Oo);E(this,jo);E(this,Ki);E(this,bs);E(this,nn);E(this,Vf);E(this,zo,0);A(this,bs,t),A(this,nn,i)}addFilter(t){if(!t)return"none";let i=l(this,se,en).get(t);if(i)return i;const[r,a,c]=x(this,se,lf).call(this,t),u=t.length===1?r:`${r}${a}${c}`;if(i=l(this,se,en).get(u),i)return l(this,se,en).set(t,i),i;const d=`g_${l(this,bs)}_transfer_map_${un(this,zo)._++}`,p=x(this,se,Ja).call(this,d);l(this,se,en).set(t,p),l(this,se,en).set(u,p);const m=x(this,se,Za).call(this,d);return x(this,se,nu).call(this,r,a,c,m),p}addHCMFilter(t,i){var b;const r=`${t}-${i}`,a="base";let c=l(this,se,Ka).get(a);if((c==null?void 0:c.key)===r||(c?((b=c.filter)==null||b.remove(),c.key=r,c.url="none",c.filter=null):(c={key:r,url:"none",filter:null},l(this,se,Ka).set(a,c)),!t||!i))return c.url;const u=x(this,se,iu).call(this,t);t=pe.makeHexColor(...u);const d=x(this,se,iu).call(this,i);if(i=pe.makeHexColor(...d),l(this,se,Qa).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return c.url;const p=new Array(256);for(let C=0;C<=255;C++){const P=C/255;p[C]=P<=.03928?P/12.92:((P+.055)/1.055)**2.4}const m=p.join(","),y=`g_${l(this,bs)}_hcm_filter`,w=c.filter=x(this,se,Za).call(this,y);x(this,se,nu).call(this,m,m,m,w),x(this,se,jm).call(this,w);const _=(C,P)=>{const k=u[C]/255,I=d[C]/255,F=new Array(P+1);for(let N=0;N<=P;N++)F[N]=k+N/P*(I-k);return F.join(",")};return x(this,se,nu).call(this,_(0,5),_(1,5),_(2,5),w),c.url=x(this,se,Ja).call(this,y),c.url}addAlphaFilter(t){let i=l(this,se,en).get(t);if(i)return i;const[r]=x(this,se,lf).call(this,[t]),a=`alpha_${r}`;if(i=l(this,se,en).get(a),i)return l(this,se,en).set(t,i),i;const c=`g_${l(this,bs)}_alpha_map_${un(this,zo)._++}`,u=x(this,se,Ja).call(this,c);l(this,se,en).set(t,u),l(this,se,en).set(a,u);const d=x(this,se,Za).call(this,c);return x(this,se,zm).call(this,r,d),u}addLuminosityFilter(t){let i=l(this,se,en).get(t||"luminosity");if(i)return i;let r,a;if(t?([r]=x(this,se,lf).call(this,[t]),a=`luminosity_${r}`):a="luminosity",i=l(this,se,en).get(a),i)return l(this,se,en).set(t,i),i;const c=`g_${l(this,bs)}_luminosity_map_${un(this,zo)._++}`,u=x(this,se,Ja).call(this,c);l(this,se,en).set(t,u),l(this,se,en).set(a,u);const d=x(this,se,Za).call(this,c);return x(this,se,r_).call(this,d),t&&x(this,se,zm).call(this,r,d),u}addHighlightHCMFilter(t,i,r,a,c){var I;const u=`${i}-${r}-${a}-${c}`;let d=l(this,se,Ka).get(t);if((d==null?void 0:d.key)===u||(d?((I=d.filter)==null||I.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},l(this,se,Ka).set(t,d)),!i||!r))return d.url;const[p,m]=[i,r].map(x(this,se,iu).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),w=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[_,b]=[a,c].map(x(this,se,iu).bind(this));w<y&&([y,w,_,b]=[w,y,b,_]),l(this,se,Qa).style.color="";const C=(F,N,B)=>{const H=new Array(256),$=(w-y)/B,W=F/255,Q=(N-F)/(255*B);let ne=0;for(let te=0;te<=B;te++){const xe=Math.round(y+te*$),fe=W+te*Q;for(let he=ne;he<=xe;he++)H[he]=fe;ne=xe+1}for(let te=ne;te<256;te++)H[te]=H[ne-1];return H.join(",")},P=`g_${l(this,bs)}_hcm_${t}_filter`,k=d.filter=x(this,se,Za).call(this,P);return x(this,se,jm).call(this,k),x(this,se,nu).call(this,C(_[0],b[0],5),C(_[1],b[1],5),C(_[2],b[2],5),k),d.url=x(this,se,Ja).call(this,P),d.url}destroy(t=!1){t&&l(this,se,Ka).size!==0||(l(this,Ki)&&(l(this,Ki).parentNode.parentNode.remove(),A(this,Ki,null)),l(this,jo)&&(l(this,jo).clear(),A(this,jo,null)),A(this,zo,0))}}Oo=new WeakMap,jo=new WeakMap,Ki=new WeakMap,bs=new WeakMap,nn=new WeakMap,Vf=new WeakMap,zo=new WeakMap,se=new WeakSet,en=function(){return l(this,jo)||A(this,jo,new Map)},Ka=function(){return l(this,Vf)||A(this,Vf,new Map)},Qa=function(){if(!l(this,Ki)){const t=l(this,nn).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=l(this,nn).createElementNS(vs,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,Ki,l(this,nn).createElementNS(vs,"defs")),t.append(r),r.append(l(this,Ki)),l(this,nn).body.append(t)}return l(this,Ki)},lf=function(t){if(t.length===1){const p=t[0],m=new Array(256);for(let w=0;w<256;w++)m[w]=p[w]/255;const y=m.join(",");return[y,y,y]}const[i,r,a]=t,c=new Array(256),u=new Array(256),d=new Array(256);for(let p=0;p<256;p++)c[p]=i[p]/255,u[p]=r[p]/255,d[p]=a[p]/255;return[c.join(","),u.join(","),d.join(",")]},Ja=function(t){if(l(this,Oo)===void 0){A(this,Oo,"");const i=l(this,nn).URL;i!==l(this,nn).baseURI&&(op(i)?Ie('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,Oo,i.split("#",1)[0]))}return`url(${l(this,Oo)}#${t})`},r_=function(t){const i=l(this,nn).createElementNS(vs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},jm=function(t){const i=l(this,nn).createElementNS(vs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},Za=function(t){const i=l(this,nn).createElementNS(vs,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,se,Qa).append(i),i},tu=function(t,i,r){const a=l(this,nn).createElementNS(vs,i);a.setAttribute("type","discrete"),a.setAttribute("tableValues",r),t.append(a)},nu=function(t,i,r,a){const c=l(this,nn).createElementNS(vs,"feComponentTransfer");a.append(c),x(this,se,tu).call(this,c,"feFuncR",t),x(this,se,tu).call(this,c,"feFuncG",i),x(this,se,tu).call(this,c,"feFuncB",r)},zm=function(t,i){const r=l(this,nn).createElementNS(vs,"feComponentTransfer");i.append(r),x(this,se,tu).call(this,r,"feFuncA",t)},iu=function(t){return l(this,se,Qa).style.color=t,Hv(getComputedStyle(l(this,se,Qa)).getPropertyValue("color"))};class o_{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class a_ extends o_{async _fetch(e){const t=await rp(e,"arraybuffer");return new Uint8Array(t)}}if(an){var Hm=Promise.withResolvers(),pu=null;(async()=>{const e=await qd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await qd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await qd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await qd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let a,c;return new Map(Object.entries({fs:e,http:t,https:i,url:r,canvas:a,path2d:c}))})().then(e=>{pu=e,Hm.resolve()},e=>{Ie(`loadPackages: ${e}`),pu=new Map,Hm.resolve()})}class qr{static get promise(){return Hm.promise}static get(e){return pu==null?void 0:pu.get(e)}}async function l_(f){const t=await qr.get("fs").promises.readFile(f);return new Uint8Array(t)}class Ob extends s_{}class jb extends t_{_createCanvas(e,t){return qr.get("canvas").createCanvas(e,t)}}class zb extends n_{async _fetch(e){return l_(e)}}class Hb extends o_{async _fetch(e){return l_(e)}}const fn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Bm(f,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),f.clip(r)}class Uv{getPattern(){nt("Abstract method `getPattern` called.")}}class Bb extends Uv{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let a;if(r===fn.STROKE||r===fn.FILL){const c=t.current.getClippedPathBoundingBox(r,ht(e))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,p=t.cachedCanvases.getCanvas("pattern",u,d),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),i=pe.transform(i,[1,0,0,1,c[0],c[1]]),m.transform(...t.baseTransform),this.matrix&&m.transform(...this.matrix),Bm(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),a=e.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(i);a.setTransform(y)}else Bm(e,this._bbox),a=this._createGradient(e);return a}}function cm(f,e,t,i,r,a,c,u){const d=e.coords,p=e.colors,m=f.data,y=f.width*4;let w;d[t+1]>d[i+1]&&(w=t,t=i,i=w,w=a,a=c,c=w),d[i+1]>d[r+1]&&(w=i,i=r,r=w,w=c,c=u,u=w),d[t+1]>d[i+1]&&(w=t,t=i,i=w,w=a,a=c,c=w);const _=(d[t]+e.offsetX)*e.scaleX,b=(d[t+1]+e.offsetY)*e.scaleY,C=(d[i]+e.offsetX)*e.scaleX,P=(d[i+1]+e.offsetY)*e.scaleY,k=(d[r]+e.offsetX)*e.scaleX,I=(d[r+1]+e.offsetY)*e.scaleY;if(b>=I)return;const F=p[a],N=p[a+1],B=p[a+2],H=p[c],$=p[c+1],W=p[c+2],Q=p[u],ne=p[u+1],te=p[u+2],xe=Math.round(b),fe=Math.round(I);let he,we,ge,K,U,oe,J,M;for(let V=xe;V<=fe;V++){if(V<P){const me=V<b?0:(b-V)/(b-P);he=_-(_-C)*me,we=F-(F-H)*me,ge=N-(N-$)*me,K=B-(B-W)*me}else{let me;V>I?me=1:P===I?me=0:me=(P-V)/(P-I),he=C-(C-k)*me,we=H-(H-Q)*me,ge=$-($-ne)*me,K=W-(W-te)*me}let le;V<b?le=0:V>I?le=1:le=(b-V)/(b-I),U=_-(_-k)*le,oe=F-(F-Q)*le,J=N-(N-ne)*le,M=B-(B-te)*le;const Ae=Math.round(Math.min(he,U)),ke=Math.round(Math.max(he,U));let ve=y*V+Ae*4;for(let me=Ae;me<=ke;me++)le=(he-me)/(he-U),le<0?le=0:le>1&&(le=1),m[ve++]=we-(we-oe)*le|0,m[ve++]=ge-(ge-J)*le|0,m[ve++]=K-(K-M)*le|0,m[ve++]=255}}function Ub(f,e,t){const i=e.coords,r=e.colors;let a,c;switch(e.type){case"lattice":const u=e.verticesPerRow,d=Math.floor(i.length/u)-1,p=u-1;for(a=0;a<d;a++){let m=a*u;for(let y=0;y<p;y++,m++)cm(f,t,i[m],i[m+1],i[m+u],r[m],r[m+1],r[m+u]),cm(f,t,i[m+u+1],i[m+1],i[m+u],r[m+u+1],r[m+1],r[m+u])}break;case"triangles":for(a=0,c=i.length;a<c;a+=3)cm(f,t,i[a],i[a+1],i[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class Vb extends Uv{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(m*e[1]*1.1)),3e3),_=p/y,b=m/w,C={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/_,scaleY:1/b},P=y+2*2,k=w+2*2,I=i.getCanvas("mesh",P,k),F=I.context,N=F.createImageData(y,w);if(t){const H=N.data;for(let $=0,W=H.length;$<W;$+=4)H[$]=t[0],H[$+1]=t[1],H[$+2]=t[2],H[$+3]=255}for(const H of this._figures)Ub(N,H,C);return F.putImageData(N,2,2),{canvas:I.canvas,offsetX:u-2*_,offsetY:d-2*b,scaleX:_,scaleY:b}}getPattern(e,t,i,r){Bm(e,this._bbox);let a;if(r===fn.SHADING)a=pe.singularValueDecompose2dScale(ht(e));else if(a=pe.singularValueDecompose2dScale(t.baseTransform),this.matrix){const u=pe.singularValueDecompose2dScale(this.matrix);a=[a[0]*u[0],a[1]*u[1]]}const c=this._createMeshCanvas(a,r===fn.SHADING?null:this._background,t.cachedCanvases);return r!==fn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class $b extends Uv{getPattern(){return"hotpink"}}function Wb(f){switch(f[0]){case"RadialAxial":return new Bb(f);case"Mesh":return new Vb(f);case"Dummy":return new $b}throw new Error(`Unknown IR type: ${f[0]}`)}const Jw={COLORED:1,UNCOLORED:2},$f=class $f{constructor(e,t,i,r,a){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=a}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:r,tilingType:a,color:c,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),np("TilingType: "+a);const m=t[0],y=t[1],w=t[2],_=t[3],b=w-m,C=_-y,P=pe.singularValueDecompose2dScale(this.matrix),k=pe.singularValueDecompose2dScale(this.baseTransform),I=P[0]*k[0],F=P[1]*k[1];let N=b,B=C,H=!1,$=!1;const W=Math.ceil(d*I),Q=Math.ceil(p*F),ne=Math.ceil(b*I),te=Math.ceil(C*F);W>=ne?N=d:H=!0,Q>=te?B=p:$=!0;const xe=this.getSizeAndScale(N,this.ctx.canvas.width,I),fe=this.getSizeAndScale(B,this.ctx.canvas.height,F),he=e.cachedCanvases.getCanvas("pattern",xe.size,fe.size),we=he.context,ge=u.createCanvasGraphics(we);if(ge.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ge,r,c),we.translate(-xe.scale*m,-fe.scale*y),ge.transform(xe.scale,0,0,fe.scale,0,0),we.save(),this.clipBbox(ge,m,y,w,_),ge.baseTransform=ht(ge.ctx),ge.executeOperatorList(i),ge.endDrawing(),we.restore(),H||$){const K=he.canvas;H&&(N=d),$&&(B=p);const U=this.getSizeAndScale(N,this.ctx.canvas.width,I),oe=this.getSizeAndScale(B,this.ctx.canvas.height,F),J=U.size,M=oe.size,V=e.cachedCanvases.getCanvas("pattern-workaround",J,M),le=V.context,Ae=H?Math.floor(b/d):0,ke=$?Math.floor(C/p):0;for(let ve=0;ve<=Ae;ve++)for(let me=0;me<=ke;me++)le.drawImage(K,J*ve,M*me,J,M,0,0,J,M);return{canvas:V.canvas,scaleX:U.scale,scaleY:oe.scale,offsetX:m,offsetY:y}}return{canvas:he.canvas,scaleX:xe.scale,scaleY:fe.scale,offsetX:m,offsetY:y}}getSizeAndScale(e,t,i){const r=Math.max($f.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*i);return a>=r?a=r:i=a/e,{scale:i,size:a}}clipBbox(e,t,i,r,a){const c=r-t,u=a-i;e.ctx.rect(t,i,c,u),e.current.updateRectMinMax(ht(e.ctx),[t,i,r,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,a=e.current;switch(t){case Jw.COLORED:const c=this.ctx;r.fillStyle=c.fillStyle,r.strokeStyle=c.strokeStyle,a.fillColor=c.fillStyle,a.strokeColor=c.strokeStyle;break;case Jw.UNCOLORED:const u=pe.makeHexColor(i[0],i[1],i[2]);r.fillStyle=u,r.strokeStyle=u,a.fillColor=u,a.strokeColor=u;break;default:throw new mb(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let a=i;r!==fn.SHADING&&(a=pe.transform(a,t.baseTransform),this.matrix&&(a=pe.transform(a,this.matrix)));const c=this.createPatternCanvas(t);let u=new DOMMatrix(a);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=e.createPattern(c.canvas,"repeat");return d.setTransform(u),d}};be($f,"MAX_PATTERN_SIZE",3e3);let Um=$f;function Gb({src:f,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:c=!1}){const u=pn.isLittleEndian?4278190080:255,[d,p]=c?[a,u]:[u,a],m=i>>3,y=i&7,w=f.length;t=new Uint32Array(t.buffer);let _=0;for(let b=0;b<r;b++){for(const P=e+m;e<P;e++){const k=e<w?f[e]:255;t[_++]=k&128?p:d,t[_++]=k&64?p:d,t[_++]=k&32?p:d,t[_++]=k&16?p:d,t[_++]=k&8?p:d,t[_++]=k&4?p:d,t[_++]=k&2?p:d,t[_++]=k&1?p:d}if(y===0)continue;const C=e<w?f[e++]:255;for(let P=0;P<y;P++)t[_++]=C&1<<7-P?p:d}return{srcPos:e,destPos:_}}const Zw=16,eA=100,Xb=15,tA=10,nA=1e3,Tn=16;function qb(f,e){if(f._removeMirroring)throw new Error("Context is already forwarding operations.");f.__originalSave=f.save,f.__originalRestore=f.restore,f.__originalRotate=f.rotate,f.__originalScale=f.scale,f.__originalTranslate=f.translate,f.__originalTransform=f.transform,f.__originalSetTransform=f.setTransform,f.__originalResetTransform=f.resetTransform,f.__originalClip=f.clip,f.__originalMoveTo=f.moveTo,f.__originalLineTo=f.lineTo,f.__originalBezierCurveTo=f.bezierCurveTo,f.__originalRect=f.rect,f.__originalClosePath=f.closePath,f.__originalBeginPath=f.beginPath,f._removeMirroring=()=>{f.save=f.__originalSave,f.restore=f.__originalRestore,f.rotate=f.__originalRotate,f.scale=f.__originalScale,f.translate=f.__originalTranslate,f.transform=f.__originalTransform,f.setTransform=f.__originalSetTransform,f.resetTransform=f.__originalResetTransform,f.clip=f.__originalClip,f.moveTo=f.__originalMoveTo,f.lineTo=f.__originalLineTo,f.bezierCurveTo=f.__originalBezierCurveTo,f.rect=f.__originalRect,f.closePath=f.__originalClosePath,f.beginPath=f.__originalBeginPath,delete f._removeMirroring},f.save=function(){e.save(),this.__originalSave()},f.restore=function(){e.restore(),this.__originalRestore()},f.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},f.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},f.transform=function(i,r,a,c,u,d){e.transform(i,r,a,c,u,d),this.__originalTransform(i,r,a,c,u,d)},f.setTransform=function(i,r,a,c,u,d){e.setTransform(i,r,a,c,u,d),this.__originalSetTransform(i,r,a,c,u,d)},f.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},f.rotate=function(i){e.rotate(i),this.__originalRotate(i)},f.clip=function(i){e.clip(i),this.__originalClip(i)},f.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},f.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},f.bezierCurveTo=function(t,i,r,a,c,u){e.bezierCurveTo(t,i,r,a,c,u),this.__originalBezierCurveTo(t,i,r,a,c,u)},f.rect=function(t,i,r,a){e.rect(t,i,r,a),this.__originalRect(t,i,r,a)},f.closePath=function(){e.closePath(),this.__originalClosePath()},f.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Yb{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Yd(f,e,t,i,r,a,c,u,d,p){const[m,y,w,_,b,C]=ht(f);if(y===0&&w===0){const I=c*m+b,F=Math.round(I),N=u*_+C,B=Math.round(N),H=(c+d)*m+b,$=Math.abs(Math.round(H)-F)||1,W=(u+p)*_+C,Q=Math.abs(Math.round(W)-B)||1;return f.setTransform(Math.sign(m),0,0,Math.sign(_),F,B),f.drawImage(e,t,i,r,a,0,0,$,Q),f.setTransform(m,y,w,_,b,C),[$,Q]}if(m===0&&_===0){const I=u*w+b,F=Math.round(I),N=c*y+C,B=Math.round(N),H=(u+p)*w+b,$=Math.abs(Math.round(H)-F)||1,W=(c+d)*y+C,Q=Math.abs(Math.round(W)-B)||1;return f.setTransform(0,Math.sign(y),Math.sign(w),0,F,B),f.drawImage(e,t,i,r,a,0,0,Q,$),f.setTransform(m,y,w,_,b,C),[Q,$]}f.drawImage(e,t,i,r,a,c,u,d,p);const P=Math.hypot(m,y),k=Math.hypot(w,_);return[P*d,k*p]}function Kb(f){const{width:e,height:t}=f;if(e>nA||t>nA)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=e+1;let c=new Uint8Array(a*(t+1)),u,d,p;const m=e+7&-8;let y=new Uint8Array(m*t),w=0;for(const k of f.data){let I=128;for(;I>0;)y[w++]=k&I?0:255,I>>=1}let _=0;for(w=0,y[w]!==0&&(c[0]=1,++_),d=1;d<e;d++)y[w]!==y[w+1]&&(c[d]=y[w]?2:1,++_),w++;for(y[w]!==0&&(c[d]=2,++_),u=1;u<t;u++){w=u*m,p=u*a,y[w-m]!==y[w]&&(c[p]=y[w]?1:8,++_);let k=(y[w]?4:0)+(y[w-m]?8:0);for(d=1;d<e;d++)k=(k>>2)+(y[w+1]?4:0)+(y[w-m+1]?8:0),r[k]&&(c[p+d]=r[k],++_),w++;if(y[w-m]!==y[w]&&(c[p+d]=y[w]?2:4,++_),_>i)return null}for(w=m*(t-1),p=u*a,y[w]!==0&&(c[p]=8,++_),d=1;d<e;d++)y[w]!==y[w+1]&&(c[p+d]=y[w]?4:8,++_),w++;if(y[w]!==0&&(c[p+d]=4,++_),_>i)return null;const b=new Int32Array([0,a,-1,0,-a,0,0,0,1]),C=new Path2D;for(u=0;_&&u<=t;u++){let k=u*a;const I=k+e;for(;k<I&&!c[k];)k++;if(k===I)continue;C.moveTo(k%a,u);const F=k;let N=c[k];do{const B=b[N];do k+=B;while(!c[k]);const H=c[k];H!==5&&H!==10?(N=H,c[k]=0):(N=H&51*N>>4,c[k]&=N>>2|N<<2),C.lineTo(k%a,k/a|0),c[k]||--_}while(F!==k);--u}return y=null,c=null,function(k){k.save(),k.scale(1/e,-1/t),k.translate(0,-t),k.fill(C),k.beginPath(),k.restore()}}class iA{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=bA,this.textMatrixScale=1,this.fontMatrix=pm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Zt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=pe.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=pe.applyTransform(t,e),r=pe.applyTransform(t.slice(2),e),a=pe.applyTransform([t[0],t[3]],e),c=pe.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],a[0],c[0]),this.minY=Math.min(this.minY,i[1],r[1],a[1],c[1]),this.maxX=Math.max(this.maxX,i[0],r[0],a[0],c[0]),this.maxY=Math.max(this.maxY,i[1],r[1],a[1],c[1])}updateScalingPathMinMax(e,t){pe.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,a,c,u,d,p,m){const y=pe.bezierBoundingBox(t,i,r,a,c,u,d,p,m);m||this.updateRectMinMax(e,y)}getPathBoundingBox(e=fn.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===fn.STROKE){t||nt("Stroke bounding box must include transform.");const r=pe.singularValueDecompose2dScale(t),a=r[0]*this.lineWidth/2,c=r[1]*this.lineWidth/2;i[0]-=a,i[1]-=c,i[2]+=a,i[3]+=c}return i}updateClipFromPath(){const e=pe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=fn.FILL,t=null){return pe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function sA(f,e){if(typeof ImageData<"u"&&e instanceof ImageData){f.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%Tn,a=(t-r)/Tn,c=r===0?a:a+1,u=f.createImageData(i,Tn);let d=0,p;const m=e.data,y=u.data;let w,_,b,C;if(e.kind===ef.GRAYSCALE_1BPP){const P=m.byteLength,k=new Uint32Array(y.buffer,0,y.byteLength>>2),I=k.length,F=i+7>>3,N=4294967295,B=pn.isLittleEndian?4278190080:255;for(w=0;w<c;w++){for(b=w<a?Tn:r,p=0,_=0;_<b;_++){const H=P-d;let $=0;const W=H>F?i:H*8-7,Q=W&-8;let ne=0,te=0;for(;$<Q;$+=8)te=m[d++],k[p++]=te&128?N:B,k[p++]=te&64?N:B,k[p++]=te&32?N:B,k[p++]=te&16?N:B,k[p++]=te&8?N:B,k[p++]=te&4?N:B,k[p++]=te&2?N:B,k[p++]=te&1?N:B;for(;$<W;$++)ne===0&&(te=m[d++],ne=128),k[p++]=te&ne?N:B,ne>>=1}for(;p<I;)k[p++]=0;f.putImageData(u,0,w*Tn)}}else if(e.kind===ef.RGBA_32BPP){for(_=0,C=i*Tn*4,w=0;w<a;w++)y.set(m.subarray(d,d+C)),d+=C,f.putImageData(u,0,_),_+=Tn;w<c&&(C=i*r*4,y.set(m.subarray(d,d+C)),f.putImageData(u,0,_))}else if(e.kind===ef.RGB_24BPP)for(b=Tn,C=i*b,w=0;w<c;w++){for(w>=a&&(b=r,C=i*b),p=0,_=C;_--;)y[p++]=m[d++],y[p++]=m[d++],y[p++]=m[d++],y[p++]=255;f.putImageData(u,0,w*Tn)}else throw new Error(`bad image kind: ${e.kind}`)}function rA(f,e){if(e.bitmap){f.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%Tn,a=(t-r)/Tn,c=r===0?a:a+1,u=f.createImageData(i,Tn);let d=0;const p=e.data,m=u.data;for(let y=0;y<c;y++){const w=y<a?Tn:r;({srcPos:d}=Gb({src:p,srcPos:d,dest:m,width:i,height:w,nonBlackColor:0})),f.putImageData(u,0,y*Tn)}}function Yc(f,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)f[i]!==void 0&&(e[i]=f[i]);f.setLineDash!==void 0&&(e.setLineDash(f.getLineDash()),e.lineDashOffset=f.lineDashOffset)}function Kd(f){if(f.strokeStyle=f.fillStyle="#000000",f.fillRule="nonzero",f.globalAlpha=1,f.lineWidth=1,f.lineCap="butt",f.lineJoin="miter",f.miterLimit=10,f.globalCompositeOperation="source-over",f.font="10px sans-serif",f.setLineDash!==void 0&&(f.setLineDash([]),f.lineDashOffset=0),!an){const{filter:e}=f;e!=="none"&&e!==""&&(f.filter="none")}}function oA(f,e){if(e)return!0;const t=pe.singularValueDecompose2dScale(f);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Xr.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const Qb=["butt","round","square"],Jb=["miter","round","bevel"],Zb={},aA={};var Kr,Vm,$m;const Kv=class Kv{constructor(e,t,i,r,a,{optionalContentConfig:c,markedContentStack:u=null},d,p){E(this,Kr);this.ctx=e,this.current=new iA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new Yb(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const a=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,c),this.ctx.fillStyle=u,i){const d=this.cachedCanvases.getCanvas("transparent",a,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ht(this.compositeCtx))}this.ctx.save(),Kd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ht(this.ctx)}executeOperatorList(e,t,i,r){const a=e.argsArray,c=e.fnArray;let u=t||0;const d=a.length;if(d===u)return u;const p=d-u>tA&&typeof i=="function",m=p?Date.now()+Xb:0;let y=0;const w=this.commonObjs,_=this.objs;let b;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,i),u;if(b=c[u],b!==vi.dependency)this[b].apply(this,a[u]);else for(const C of a[u]){const P=C.startsWith("g_")?w:_;if(!P.has(C))return P.get(C,i),u}if(u++,u===d)return u;if(p&&++y>tA){if(Date.now()>m)return i(),u;y=0}}}endDrawing(){x(this,Kr,Vm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),x(this,Kr,$m).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=i,d=r,p="prescale1",m,y;for(;a>2&&u>1||c>2&&d>1;){let w=u,_=d;a>2&&u>1&&(w=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/w),c>2&&d>1&&(_=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/_),m=this.cachedCanvases.getCanvas(p,w,_),y=m.context,y.clearRect(0,0,w,_),y.drawImage(e,0,0,u,d,0,0,w,_),e=m.canvas,u=w,d=_,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,a=this.current.fillColor,c=this.current.patternFill,u=ht(t);let d,p,m,y;if((e.bitmap||e.data)&&e.count>1){const W=e.bitmap||e.data.buffer;p=JSON.stringify(c?u:[u.slice(0,4),a]),d=this._cachedBitmapsMap.get(W),d||(d=new Map,this._cachedBitmapsMap.set(W,d));const Q=d.get(p);if(Q&&!c){const ne=Math.round(Math.min(u[0],u[2])+u[4]),te=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:Q,offsetX:ne,offsetY:te}}m=Q}m||(y=this.cachedCanvases.getCanvas("maskCanvas",i,r),rA(y.context,e));let w=pe.transform(u,[1/i,0,0,-1/r,0,0]);w=pe.transform(w,[1,0,0,1,0,-r]);const[_,b,C,P]=pe.getAxialAlignedBoundingBox([0,0,i,r],w),k=Math.round(C-_)||1,I=Math.round(P-b)||1,F=this.cachedCanvases.getCanvas("fillCanvas",k,I),N=F.context,B=_,H=b;N.translate(-B,-H),N.transform(...w),m||(m=this._scaleImage(y.canvas,ms(N)),m=m.img,d&&c&&d.set(p,m)),N.imageSmoothingEnabled=oA(ht(N),e.interpolate),Yd(N,m,0,0,m.width,m.height,0,0,i,r),N.globalCompositeOperation="source-in";const $=pe.transform(ms(N),[1,0,0,1,-B,-H]);return N.fillStyle=c?a.getPattern(t,this,$,fn.FILL):a,N.fillRect(0,0,i,r),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,F.canvas)),{canvas:F.canvas,offsetX:Math.round(B),offsetY:Math.round(H)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Qb[e]}setLineJoin(e){this.ctx.lineJoin=Jb[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const a=this.ctx;a.setTransform(...ht(this.suspendedCtx)),Yc(this.suspendedCtx,a),qb(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Yc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const a=r[0],c=r[1],u=r[2]-a,d=r[3]-c;u===0||d===0||(this.genericComposeSMask(t.context,i,u,d,t.subtype,t.backdrop,t.transferMap,a,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,a,c,u,d,p,m,y){let w=e.canvas,_=d-m,b=p-y;if(c){const P=pe.makeHexColor(...c);if(_<0||b<0||_+i>w.width||b+r>w.height){const k=this.cachedCanvases.getCanvas("maskExtension",i,r),I=k.context;I.drawImage(w,-_,-b),I.globalCompositeOperation="destination-atop",I.fillStyle=P,I.fillRect(0,0,i,r),I.globalCompositeOperation="source-over",w=k.canvas,_=b=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(_,b,i,r),e.clip(k),e.globalCompositeOperation="destination-atop",e.fillStyle=P,e.fillRect(_,b,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const C=new Path2D;C.rect(d,p,i,r),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(w,_,b,i,r,d,p,i,r),t.restore()}save(){this.inSMaskMode?(Yc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Yc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,a,c){this.ctx.transform(e,t,i,r,a,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,a=this.current;let c=a.x,u=a.y,d,p;const m=ht(r),y=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,w=y?i.slice(0):null;for(let _=0,b=0,C=e.length;_<C;_++)switch(e[_]|0){case vi.rectangle:c=t[b++],u=t[b++];const P=t[b++],k=t[b++],I=c+P,F=u+k;r.moveTo(c,u),P===0||k===0?r.lineTo(I,F):(r.lineTo(I,u),r.lineTo(I,F),r.lineTo(c,F)),y||a.updateRectMinMax(m,[c,u,I,F]),r.closePath();break;case vi.moveTo:c=t[b++],u=t[b++],r.moveTo(c,u),y||a.updatePathMinMax(m,c,u);break;case vi.lineTo:c=t[b++],u=t[b++],r.lineTo(c,u),y||a.updatePathMinMax(m,c,u);break;case vi.curveTo:d=c,p=u,c=t[b+4],u=t[b+5],r.bezierCurveTo(t[b],t[b+1],t[b+2],t[b+3],c,u),a.updateCurvePathMinMax(m,d,p,t[b],t[b+1],t[b+2],t[b+3],c,u,w),b+=6;break;case vi.curveTo2:d=c,p=u,r.bezierCurveTo(c,u,t[b],t[b+1],t[b+2],t[b+3]),a.updateCurvePathMinMax(m,d,p,c,u,t[b],t[b+1],t[b+2],t[b+3],w),c=t[b+2],u=t[b+3],b+=4;break;case vi.curveTo3:d=c,p=u,c=t[b+2],u=t[b+3],r.bezierCurveTo(t[b],t[b+1],c,u,c,u),a.updateCurvePathMinMax(m,d,p,t[b],t[b+1],c,u,c,u,w),b+=4;break;case vi.closePath:r.closePath();break}y&&a.updateScalingPathMinMax(m,w),a.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,ms(t),fn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let a=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,ms(t),fn.FILL),a=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),a&&t.restore(),e&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Zb}eoClip(){this.pendingClip=aA}beginText(){this.current.textMatrix=bA,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var m;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||pm,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ie("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const a=i.loadedName||"sans-serif",c=((m=i.systemFontInfo)==null?void 0:m.css)||`"${a}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const d=i.italic?"italic":"normal";let p=t;t<Zw?p=Zw:t>eA&&(p=eA),this.current.fontSizeScale=t/p,this.ctx.font=`${d} ${u} ${p}px ${c}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,a,c){this.current.textMatrix=[e,t,i,r,a,c],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const a=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,m=d&Zt.FILL_STROKE_MASK,y=!!(d&Zt.ADD_TO_PATH_FLAG),w=c.patternFill&&!u.missingFile;let _;(u.disableFontFace||y||w)&&(_=u.getPathGenerator(this.commonObjs,e)),u.disableFontFace||w?(a.save(),a.translate(t,i),a.beginPath(),_(a,p),r&&a.setTransform(...r),(m===Zt.FILL||m===Zt.FILL_STROKE)&&a.fill(),(m===Zt.STROKE||m===Zt.FILL_STROKE)&&a.stroke(),a.restore()):((m===Zt.FILL||m===Zt.FILL_STROKE)&&a.fillText(e,t,i),(m===Zt.STROKE||m===Zt.FILL_STROKE)&&a.strokeText(e,t,i)),y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ht(a),x:t,y:i,fontSize:p,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return ze(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const a=this.ctx,c=t.fontSizeScale,u=t.charSpacing,d=t.wordSpacing,p=t.fontDirection,m=t.textHScale*p,y=e.length,w=i.vertical,_=w?1:-1,b=i.defaultVMetrics,C=r*t.fontMatrix[0],P=t.textRenderingMode===Zt.FILL&&!i.disableFontFace&&!t.patternFill;a.save(),a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),p>0?a.scale(m,-1):a.scale(m,1);let k;if(t.patternFill){a.save();const H=t.fillColor.getPattern(a,this,ms(a),fn.FILL);k=ht(a),a.restore(),a.fillStyle=H}let I=t.lineWidth;const F=t.textMatrixScale;if(F===0||I===0){const H=t.textRenderingMode&Zt.FILL_STROKE_MASK;(H===Zt.STROKE||H===Zt.FILL_STROKE)&&(I=this.getSinglePixelWidth())}else I/=F;if(c!==1&&(a.scale(c,c),I/=c),a.lineWidth=I,i.isInvalidPDFjsFont){const H=[];let $=0;for(const W of e)H.push(W.unicode),$+=W.width;a.fillText(H.join(""),0,0),t.x+=$*C*m,a.restore(),this.compose();return}let N=0,B;for(B=0;B<y;++B){const H=e[B];if(typeof H=="number"){N+=_*H*r/1e3;continue}let $=!1;const W=(H.isSpace?d:0)+u,Q=H.fontChar,ne=H.accent;let te,xe,fe=H.width;if(w){const we=H.vmetric||b,ge=-(H.vmetric?we[1]:fe*.5)*C,K=we[2]*C;fe=we?-we[0]:fe,te=ge/c,xe=(N+K)/c}else te=N/c,xe=0;if(i.remeasure&&fe>0){const we=a.measureText(Q).width*1e3/r*c;if(fe<we&&this.isFontSubpixelAAEnabled){const ge=fe/we;$=!0,a.save(),a.scale(ge,1),te/=ge}else fe!==we&&(te+=(fe-we)/2e3*r/c)}if(this.contentVisible&&(H.isInFont||i.missingFile)){if(P&&!ne)a.fillText(Q,te,xe);else if(this.paintChar(Q,te,xe,k),ne){const we=te+r*ne.offset.x/c,ge=xe-r*ne.offset.y/c;this.paintChar(ne.fontChar,we,ge,k)}}const he=w?fe*C-W*p:fe*C+W*p;N+=he,$&&a.restore()}w?t.y-=N:t.x+=N*m,a.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,a=i.fontSize,c=i.fontDirection,u=r.vertical?1:-1,d=i.charSpacing,p=i.wordSpacing,m=i.textHScale*c,y=i.fontMatrix||pm,w=e.length,_=i.textRenderingMode===Zt.INVISIBLE;let b,C,P,k;if(!(_||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(m,c),b=0;b<w;++b){if(C=e[b],typeof C=="number"){k=u*C*a/1e3,this.ctx.translate(k,0),i.x+=k*m;continue}const I=(C.isSpace?p:0)+d,F=r.charProcOperatorList[C.operatorListId];if(!F){Ie(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),t.scale(a,a),t.transform(...y),this.executeOperatorList(F),this.restore()),P=pe.applyTransform([C.width,0],y)[0]*a+I,t.translate(P,0),i.x+=P*m}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,a,c){this.ctx.rect(i,r,a-i,c-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||ht(this.ctx),a={createCanvasGraphics:c=>new Kv(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Um(e,i,this.ctx,a,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=pe.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=pe.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=Wb(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,ms(t),fn.SHADING);const r=ms(t);if(r){const{width:a,height:c}=t.canvas,[u,d,p,m]=pe.getAxialAlignedBoundingBox([0,0,a,c],r);this.ctx.fillRect(u,d,p-u,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){nt("Should not call beginInlineImage")}beginImageData(){nt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ht(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(ht(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||np("TODO: Support non-isolated groups."),e.knockout&&Ie("Knockout groups not supported.");const i=ht(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=pe.getAxialAlignedBoundingBox(e.bbox,ht(t));const a=[0,0,t.canvas.width,t.canvas.height];r=pe.intersect(r,a)||[0,0,0,0];const c=Math.floor(r[0]),u=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-c,1),p=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,p]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,d,p),w=y.context;w.translate(-c,-u),w.transform(...i),e.smask?this.smaskStack.push({canvas:y.canvas,context:w,offsetX:c,offsetY:u,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(c,u),t.save()),Yc(t,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=ht(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const a=pe.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,i,r,a){if(x(this,Kr,Vm).call(this),Kd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const c=t[2]-t[0],u=t[3]-t[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=c,t[3]=u;const[d,p]=pe.singularValueDecompose2dScale(ht(this.ctx)),{viewportScale:m}=this,y=Math.ceil(c*this.outputScaleX*m),w=Math.ceil(u*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(y,w);const{canvas:_,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(e,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(d,0,0,-p,0,u*p),Kd(this.ctx)}else Kd(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],c,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new iA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),x(this,Kr,$m).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=Kb(e)),r.compiled)){r.compiled(i);return}const a=this._createMaskCanvas(e),c=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(c,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,a,c){if(!this.contentVisible)return;e=this.getObject(e.data,e);const u=this.ctx;u.save();const d=ht(u);u.transform(t,i,r,a,0,0);const p=this._createMaskCanvas(e);u.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let m=0,y=c.length;m<y;m+=2){const w=pe.transform(d,[t,i,r,a,c[m],c[m+1]]),[_,b]=pe.applyTransform([0,0],w);u.drawImage(p.canvas,_,b)}u.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const a of e){const{data:c,width:u,height:d,transform:p}=a,m=this.cachedCanvases.getCanvas("maskCanvas",u,d),y=m.context;y.save();const w=this.getObject(c,a);rA(y,w),y.globalCompositeOperation="source-in",y.fillStyle=r?i.getPattern(y,this,ms(t),fn.FILL):i,y.fillRect(0,0,u,d),y.restore(),t.save(),t.transform(...p),t.scale(1,-1),Yd(t,m.canvas,0,0,u,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ie("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){Ie("Dependent image isn't ready yet");return}const c=a.width,u=a.height,d=[];for(let p=0,m=r.length;p<m;p+=2)d.push({transform:[t,0,0,i,r[p],r[p+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,a=this.cachedCanvases.getCanvas("inlineImage",i,r),c=a.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!an){const{filter:u}=r;u!=="none"&&u!==""&&(r.filter="none")}r.scale(1/t,-1/i);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,i).context;sA(d,e),a=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(a,ms(r));r.imageSmoothingEnabled=oA(ht(r),e.interpolate),Yd(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const a=e.width,c=e.height,d=this.cachedCanvases.getCanvas("inlineImage",a,c).context;sA(d,e),r=this.applyTransferMapsToCanvas(d)}for(const a of t)i.save(),i.transform(...a.transform),i.scale(1,-1),Yd(i,r,a.x,a.y,a.w,a.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===aA?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ht(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:a}=this.ctx.getTransform();let c,u;if(i===0&&r===0){const d=Math.abs(t),p=Math.abs(a);if(d===p)if(e===0)c=u=1/d;else{const m=d*e;c=u=m<1?1/m:1}else if(e===0)c=1/d,u=1/p;else{const m=d*e,y=p*e;c=m<1?1/m:1,u=y<1?1/y:1}}else{const d=Math.abs(t*a-i*r),p=Math.hypot(t,i),m=Math.hypot(r,a);if(e===0)c=m/d,u=p/d;else{const y=e*d;c=m>y?m/y:1,u=p>y?p/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,a]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&a===1){t.stroke();return}const c=t.getLineDash();if(e&&t.save(),t.scale(r,a),c.length>0){const u=Math.max(r,a);t.setLineDash(c.map(d=>d/u)),t.lineDashOffset/=u}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Kr=new WeakSet,Vm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},$m=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let rl=Kv;for(const f in vi)rl.prototype[f]!==void 0&&(rl.prototype[vi[f]]=rl.prototype[f]);var ju,zu;class $s{static get workerPort(){return l(this,ju)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");A(this,ju,e)}static get workerSrc(){return l(this,zu)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");A(this,zu,e)}}ju=new WeakMap,zu=new WeakMap,E($s,ju,null),E($s,zu,"");const Qd={DATA:1,ERROR:2},_t={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Nn(f){switch(f instanceof Error||typeof f=="object"&&f!==null||nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),f.name){case"AbortException":return new Ea(f.message);case"MissingPDFException":return new xa(f.message);case"PasswordException":return new gm(f.message,f.code);case"UnexpectedResponseException":return new ip(f.message,f.status);case"UnknownErrorException":return new mm(f.message,f.details);default:return new mm(f.message,f.toString())}}var xl,oi,c_,u_,h_,cf;class su{constructor(e,t,i){E(this,oi);E(this,xl,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",x(this,oi,c_).bind(this),{signal:l(this,xl).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(c){a.reject(c)}return a.promise}sendWithStream(e,t,i,r){const a=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[a]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:e,streamId:a,data:t,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[a].pullCall=m,d.postMessage({sourceName:c,targetName:u,stream:_t.PULL,streamId:a,desiredSize:p.desiredSize}),m.promise},cancel:p=>{Lt(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[a].cancelCall=m,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:_t.CANCEL,streamId:a,reason:Nn(p)}),m.promise}},i)}destroy(){var e;(e=l(this,xl))==null||e.abort(),A(this,xl,null)}}xl=new WeakMap,oi=new WeakSet,c_=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){x(this,oi,h_).call(this,e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Qd.DATA)r.resolve(e.data);else if(e.callback===Qd.ERROR)r.reject(Nn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,a=this.comObj;new Promise(function(c){c(t(e.data))}).then(function(c){a.postMessage({sourceName:i,targetName:r,callback:Qd.DATA,callbackId:e.callbackId,data:c})},function(c){a.postMessage({sourceName:i,targetName:r,callback:Qd.ERROR,callbackId:e.callbackId,reason:Nn(c)})});return}if(e.streamId){x(this,oi,u_).call(this,e);return}t(e.data)},u_=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,c=this,u=this.actionHandler[e.action],d={enqueue(p,m=1,y){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=m,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:_t.ENQUEUE,streamId:t,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:_t.CLOSE,streamId:t}),delete c.streamSinks[t])},error(p){Lt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:_t.ERROR,streamId:t,reason:Nn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(p){p(u(e.data,d))}).then(function(){a.postMessage({sourceName:i,targetName:r,stream:_t.START_COMPLETE,streamId:t,success:!0})},function(p){a.postMessage({sourceName:i,targetName:r,stream:_t.START_COMPLETE,streamId:t,reason:Nn(p)})})},h_=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,c=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case _t.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(Nn(e.reason));break;case _t.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(Nn(e.reason));break;case _t.PULL:if(!u){a.postMessage({sourceName:i,targetName:r,stream:_t.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,new Promise(function(d){var p;d((p=u.onPull)==null?void 0:p.call(u))}).then(function(){a.postMessage({sourceName:i,targetName:r,stream:_t.PULL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:i,targetName:r,stream:_t.PULL_COMPLETE,streamId:t,reason:Nn(d)})});break;case _t.ENQUEUE:if(Lt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case _t.CLOSE:if(Lt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),x(this,oi,cf).call(this,c,t);break;case _t.ERROR:Lt(c,"error should have stream controller"),c.controller.error(Nn(e.reason)),x(this,oi,cf).call(this,c,t);break;case _t.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(Nn(e.reason)),x(this,oi,cf).call(this,c,t);break;case _t.CANCEL:if(!u)break;new Promise(function(d){var p;d((p=u.onCancel)==null?void 0:p.call(u,Nn(e.reason)))}).then(function(){a.postMessage({sourceName:i,targetName:r,stream:_t.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:i,targetName:r,stream:_t.CANCEL_COMPLETE,streamId:t,reason:Nn(d)})}),u.sinkCapability.reject(Nn(e.reason)),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},cf=async function(e,t){var i,r,a;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var Ho,Hu;class e1{constructor({parsedData:e,rawData:t}){E(this,Ho);E(this,Hu);A(this,Ho,e),A(this,Hu,t)}getRaw(){return l(this,Hu)}get(e){return l(this,Ho).get(e)??null}getAll(){return Fv(l(this,Ho))}has(e){return l(this,Ho).has(e)}}Ho=new WeakMap,Hu=new WeakMap;const el=Symbol("INTERNAL");var Bu,Uu,Vu,El;class t1{constructor(e,{name:t,intent:i,usage:r,rbGroups:a}){E(this,Bu,!1);E(this,Uu,!1);E(this,Vu,!1);E(this,El,!0);A(this,Bu,!!(e&Vn.DISPLAY)),A(this,Uu,!!(e&Vn.PRINT)),this.name=t,this.intent=i,this.usage=r,this.rbGroups=a}get visible(){if(l(this,Vu))return l(this,El);if(!l(this,El))return!1;const{print:e,view:t}=this.usage;return l(this,Bu)?(t==null?void 0:t.viewState)!=="OFF":l(this,Uu)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==el&&nt("Internal method `_setVisible` called."),A(this,Vu,i),A(this,El,t)}}Bu=new WeakMap,Uu=new WeakMap,Vu=new WeakMap,El=new WeakMap;var Lr,Xe,bl,Cl,$u,Wm;class n1{constructor(e,t=Vn.DISPLAY){E(this,$u);E(this,Lr,null);E(this,Xe,new Map);E(this,bl,null);E(this,Cl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,A(this,Cl,e.order);for(const i of e.groups)l(this,Xe).set(i.id,new t1(t,i));if(e.baseState==="OFF")for(const i of l(this,Xe).values())i._setVisible(el,!1);for(const i of e.on)l(this,Xe).get(i)._setVisible(el,!0);for(const i of e.off)l(this,Xe).get(i)._setVisible(el,!1);A(this,bl,this.getHash())}}isVisible(e){if(l(this,Xe).size===0)return!0;if(!e)return np("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,Xe).has(e.id)?l(this,Xe).get(e.id).visible:(Ie(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return x(this,$u,Wm).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(l(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(!l(this,Xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(!l(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(l(this,Xe).get(t).visible)return!1}return!0}return Ie(`Unknown optional content policy ${e.policy}.`),!0}return Ie(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var a;const r=l(this,Xe).get(e);if(!r){Ie(`Optional content group not found: ${e}`);return}if(i&&t&&r.rbGroups.length)for(const c of r.rbGroups)for(const u of c)u!==e&&((a=l(this,Xe).get(u))==null||a._setVisible(el,!1,!0));r._setVisible(el,!!t,!0),A(this,Lr,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const a=l(this,Xe).get(r);if(a)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!a.visible,t);break}}A(this,Lr,null)}get hasInitialVisibility(){return l(this,bl)===null||this.getHash()===l(this,bl)}getOrder(){return l(this,Xe).size?l(this,Cl)?l(this,Cl).slice():[...l(this,Xe).keys()]:null}getGroups(){return l(this,Xe).size>0?Fv(l(this,Xe)):null}getGroup(e){return l(this,Xe).get(e)||null}getHash(){if(l(this,Lr)!==null)return l(this,Lr);const e=new JA;for(const[t,i]of l(this,Xe))e.update(`${t}:${i.visible}`);return A(this,Lr,e.hexdigest())}}Lr=new WeakMap,Xe=new WeakMap,bl=new WeakMap,Cl=new WeakMap,$u=new WeakSet,Wm=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const a=e[r];let c;if(Array.isArray(a))c=x(this,$u,Wm).call(this,a);else if(l(this,Xe).has(a))c=l(this,Xe).get(a).visible;else return Ie(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"};class i1{constructor(e,{disableRange:t=!1,disableStream:i=!1}){Lt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:a,progressiveDone:c,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,(a==null?void 0:a.length)>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),e.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(i),!0)});Lt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,a;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(a=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||a.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new s1(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new r1(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class s1{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=jv(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class r1{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function o1(f){let e=!0,t=i("filename\\*","i").exec(f);if(t){t=t[1];let m=u(t);return m=unescape(m),m=d(m),m=p(m),a(m)}if(t=c(f),t){const m=p(t);return a(m)}if(t=i("filename","i").exec(f),t){t=t[1];let m=u(t);return m=p(m),a(m)}function i(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const w=new TextDecoder(m,{fatal:!0}),_=sp(y);y=w.decode(_),e=!1}catch{}}return y}function a(m){return e&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),e&&(m=r("iso-8859-1",m))),m}function c(m){const y=[];let w;const _=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=_.exec(m))!==null;){let[,C,P,k]=w;if(C=parseInt(C,10),C in y){if(C===0)break;continue}y[C]=[P,k]}const b=[];for(let C=0;C<y.length&&C in y;++C){let[P,k]=y[C];k=u(k),P&&(k=unescape(k),C===0&&(k=d(k))),b.push(k)}return b.join("")}function u(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let w=0;w<y.length;++w){const _=y[w].indexOf('"');_!==-1&&(y[w]=y[w].slice(0,_),y.length=w+1),y[w]=y[w].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function d(m){const y=m.indexOf("'");if(y===-1)return m;const w=m.slice(0,y),b=m.slice(y+1).replace(/^[^']*'/,"");return r(w,b)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,w,_,b){if(_==="q"||_==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,P){return String.fromCharCode(parseInt(P,16))}),r(w,b);try{b=atob(b)}catch{}return r(w,b)})}return""}function Vv(f,e){const t=new Headers;if(!f||!e||typeof e!="object")return t;for(const i in e){const r=e[i];r!==void 0&&t.append(i,r)}return t}function $v({responseHeaders:f,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(f.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*t)||i||!e||f.get("Accept-Ranges")!=="bytes"||(f.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Wv(f){const e=f.get("Content-Disposition");if(e){let t=o1(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(jv(t))return t}return null}function ap(f,e){return f===404||f===0&&e.startsWith("file:")?new xa('Missing PDF "'+e+'".'):new ip(`Unexpected server response (${f}) while retrieving PDF "${e}".`,f)}function d_(f){return f===200||f===206}function f_(f,e,t){return{method:"GET",headers:f,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function p_(f){return f instanceof Uint8Array?f.buffer:f instanceof ArrayBuffer?f:(Ie(`getArrayBuffer - unexpected data format: ${f}`),new Uint8Array(f).buffer)}class lA{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Vv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new a1(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new l1(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class a1{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,f_(i,this._withCredentials,this._abortController)).then(a=>{if(!d_(a.status))throw ap(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();const c=a.headers,{allowRangeRequests:u,suggestedLength:d}=$v({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=Wv(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ea("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:p_(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class l1{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${i-1}`);const c=r.url;fetch(c,f_(a,this._withCredentials,this._abortController)).then(u=>{if(!d_(u.status))throw ap(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:p_(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const um=200,hm=206;function c1(f){const e=f.response;return typeof e!="string"?e:sp(e).buffer}class u1{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Vv(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const a in i)r[a]=i[a];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,c]of this.headers)t.setRequestHeader(a,c);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=hm):r.expectedStatus=um,t.responseType="arraybuffer",e.onError&&(t.onerror=function(a){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){var d,p,m;const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(d=i.onError)==null||d.call(i,r.status);return}const a=r.status||um;if(!(a===um&&i.expectedStatus===hm)&&a!==i.expectedStatus){(p=i.onError)==null||p.call(i,r.status);return}const u=c1(r);if(a===hm){const y=r.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);i.onDone({begin:parseInt(w[1],10),chunk:u})}else u?i.onDone({begin:0,chunk:u}):(m=i.onError)==null||m.call(i,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class h1{constructor(e){this._source=e,this._manager=new u1(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d1(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new f1(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class d1{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(c=>{const[u,...d]=c.split(": ");return[u,d.join(": ")]})),{allowRangeRequests:r,suggestedLength:a}=$v({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=Wv(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ap(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class f1{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=ap(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const p1=/^[a-z][a-z0-9\-+.]+:/i;function g1(f){if(p1.test(f))return new URL(f);const e=qr.get("url");return new URL(e.pathToFileURL(f))}function g_(f,e,t){return f.protocol==="http:"?qr.get("http").request(f,{headers:e},t):qr.get("https").request(f,{headers:e},t)}class m1{constructor(e){this.source=e,this.url=g1(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Vv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new w1(this):new v1(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new A1(this,e,t):new y1(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class m_{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ea("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class v_{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class v1 extends m_{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=r=>{if(r.statusCode===404){const d=new xa(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(r);const a=new Headers(this._readableStream.headers),{allowRangeRequests:c,suggestedLength:u}=$v({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=Wv(a)};this._request=g_(this._url,t,i),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class y1 extends v_{constructor(e,t,i){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${i-1}`;const a=c=>{if(c.statusCode===404){const u=new xa(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(c)};this._request=g_(this._url,r,a),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class w1 extends m_{constructor(e){super(e);const t=qr.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new xa(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class A1 extends v_{constructor(e,t,i){super(e);const r=qr.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}const _1=1e5,xn=30,S1=.8;var xA,Mr,Cn,Wu,Gu,Bo,Cs,Xu,qu,Uo,kl,Tl,Ir,Pl,Yu,Rl,Vo,Ku,Qu,pt,$o,Wo,Ju,Nr,Ll,qs,y_,w_,Xm,Wn,uf,qm,A_,__;let Gm=(pt=class{constructor({textContentSource:e,container:t,viewport:i}){E(this,qs);E(this,Mr,Promise.withResolvers());E(this,Cn,null);E(this,Wu,!1);E(this,Gu,!!((xA=globalThis.FontInspector)!=null&&xA.enabled));E(this,Bo,null);E(this,Cs,null);E(this,Xu,0);E(this,qu,0);E(this,Uo,null);E(this,kl,null);E(this,Tl,0);E(this,Ir,0);E(this,Pl,Object.create(null));E(this,Yu,[]);E(this,Rl,null);E(this,Vo,[]);E(this,Ku,new WeakMap);E(this,Qu,null);var d;if(e instanceof ReadableStream)A(this,Rl,e);else if(typeof e=="object")A(this,Rl,new ReadableStream({start(p){p.enqueue(e),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,Cn,A(this,kl,t)),A(this,Ir,i.scale*(globalThis.devicePixelRatio||1)),A(this,Tl,i.rotation),A(this,Cs,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:a,pageX:c,pageY:u}=i.rawDims;A(this,Qu,[1,0,0,-1,-c,u+a]),A(this,qu,r),A(this,Xu,a),x(d=pt,Wn,A_).call(d),va(t,i),l(this,Mr).promise.finally(()=>{l(pt,Ll).delete(this),A(this,Cs,null),A(this,Pl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=pn.platform;return ze(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Uo).read().then(({value:t,done:i})=>{if(i){l(this,Mr).resolve();return}l(this,Bo)??A(this,Bo,t.lang),Object.assign(l(this,Pl),t.styles),x(this,qs,y_).call(this,t.items),e()},l(this,Mr).reject)};return A(this,Uo,l(this,Rl).getReader()),l(pt,Ll).add(this),e(),l(this,Mr).promise}update({viewport:e,onBefore:t=null}){var a;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==l(this,Tl)&&(t==null||t(),A(this,Tl,r),va(l(this,kl),{rotation:r})),i!==l(this,Ir)){t==null||t(),A(this,Ir,i);const c={div:null,properties:null,ctx:x(a=pt,Wn,uf).call(a,l(this,Bo))};for(const u of l(this,Vo))c.properties=l(this,Ku).get(u),c.div=u,x(this,qs,Xm).call(this,c)}}cancel(){var t;const e=new Ea("TextLayer task cancelled.");(t=l(this,Uo))==null||t.cancel(e).catch(()=>{}),A(this,Uo,null),l(this,Mr).reject(e)}get textDivs(){return l(this,Vo)}get textContentItemsStr(){return l(this,Yu)}static cleanup(){if(!(l(this,Ll).size>0)){l(this,$o).clear();for(const{canvas:e}of l(this,Wo).values())e.remove();l(this,Wo).clear()}}},Mr=new WeakMap,Cn=new WeakMap,Wu=new WeakMap,Gu=new WeakMap,Bo=new WeakMap,Cs=new WeakMap,Xu=new WeakMap,qu=new WeakMap,Uo=new WeakMap,kl=new WeakMap,Tl=new WeakMap,Ir=new WeakMap,Pl=new WeakMap,Yu=new WeakMap,Rl=new WeakMap,Vo=new WeakMap,Ku=new WeakMap,Qu=new WeakMap,$o=new WeakMap,Wo=new WeakMap,Ju=new WeakMap,Nr=new WeakMap,Ll=new WeakMap,qs=new WeakSet,y_=function(e){var r,a;if(l(this,Wu))return;(a=l(this,Cs)).ctx??(a.ctx=x(r=pt,Wn,uf).call(r,l(this,Bo)));const t=l(this,Vo),i=l(this,Yu);for(const c of e){if(t.length>_1){Ie("Ignoring additional textDivs for performance reasons."),A(this,Wu,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const u=l(this,Cn);A(this,Cn,document.createElement("span")),l(this,Cn).classList.add("markedContent"),c.id!==null&&l(this,Cn).setAttribute("id",`${c.id}`),u.append(l(this,Cn))}else c.type==="endMarkedContent"&&A(this,Cn,l(this,Cn).parentNode);continue}i.push(c.str),x(this,qs,w_).call(this,c)}},w_=function(e){var C;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Vo).push(t);const r=pe.transform(l(this,Qu),e.transform);let a=Math.atan2(r[1],r[0]);const c=l(this,Pl)[e.fontName];c.vertical&&(a+=Math.PI/2);let u=l(this,Gu)&&c.fontSubstitution||c.fontFamily;u=pt.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),p=d*x(C=pt,Wn,__).call(C,u,l(this,Bo));let m,y;a===0?(m=r[4],y=r[5]-p):(m=r[4]+p*Math.sin(a),y=r[5]-p*Math.cos(a));const w="calc(var(--scale-factor)*",_=t.style;l(this,Cn)===l(this,kl)?(_.left=`${(100*m/l(this,qu)).toFixed(2)}%`,_.top=`${(100*y/l(this,Xu)).toFixed(2)}%`):(_.left=`${w}${m.toFixed(2)}px)`,_.top=`${w}${y.toFixed(2)}px)`),_.fontSize=`${w}${(l(pt,Nr)*d).toFixed(2)}px)`,_.fontFamily=u,i.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,Gu)&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),a!==0&&(i.angle=a*(180/Math.PI));let b=!1;if(e.str.length>1)b=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const P=Math.abs(e.transform[0]),k=Math.abs(e.transform[3]);P!==k&&Math.max(P,k)/Math.min(P,k)>1.5&&(b=!0)}if(b&&(i.canvasWidth=c.vertical?e.height:e.width),l(this,Ku).set(t,i),l(this,Cs).div=t,l(this,Cs).properties=i,x(this,qs,Xm).call(this,l(this,Cs)),i.hasText&&l(this,Cn).append(t),i.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),l(this,Cn).append(P)}},Xm=function(e){var u;const{div:t,properties:i,ctx:r}=e,{style:a}=t;let c="";if(l(pt,Nr)>1&&(c=`scale(${1/l(pt,Nr)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:d}=a,{canvasWidth:p,fontSize:m}=i;x(u=pt,Wn,qm).call(u,r,m*l(this,Ir),d);const{width:y}=r.measureText(t.textContent);y>0&&(c=`scaleX(${p*l(this,Ir)/y}) ${c}`)}i.angle!==0&&(c=`rotate(${i.angle}deg) ${c}`),c.length>0&&(a.transform=c)},Wn=new WeakSet,uf=function(e=null){let t=l(this,Wo).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Wo).set(e,t),l(this,Ju).set(t,{size:0,family:""})}return t},qm=function(e,t,i){const r=l(this,Ju).get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)},A_=function(){if(l(this,Nr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),A(this,Nr,e.getBoundingClientRect().height),e.remove()},__=function(e,t){const i=l(this,$o).get(e);if(i)return i;const r=x(this,Wn,uf).call(this,t);r.canvas.width=r.canvas.height=xn,x(this,Wn,qm).call(this,r,xn,e);const a=r.measureText("");let c=a.fontBoundingBoxAscent,u=Math.abs(a.fontBoundingBoxDescent);if(c){const m=c/(c+u);return l(this,$o).set(e,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,xn,xn),r.strokeText("g",0,0);let d=r.getImageData(0,0,xn,xn).data;u=0;for(let m=d.length-1-3;m>=0;m-=4)if(d[m]>0){u=Math.ceil(m/4/xn);break}r.clearRect(0,0,xn,xn),r.strokeText("A",0,xn),d=r.getImageData(0,0,xn,xn).data,c=0;for(let m=0,y=d.length;m<y;m+=4)if(d[m]>0){c=xn-Math.floor(m/4/xn);break}r.canvas.width=r.canvas.height=0;const p=c?c/(c+u):S1;return l(this,$o).set(e,p),p},E(pt,Wn),E(pt,$o,new Map),E(pt,Wo,new Map),E(pt,Ju,new WeakMap),E(pt,Nr,null),E(pt,Ll,new Set),pt);class mu{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(a){var d;if(!a)return;let c=null;const u=a.name;if(u==="#text")c=a.value;else if(mu.shouldBuildText(u))(d=a==null?void 0:a.attributes)!=null&&d.textContent?c=a.attributes.textContent:a.value&&(c=a.value);else return;if(c!==null&&t.push({str:c}),!!a.children)for(const p of a.children)r(p)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const x1=65536,E1=100,b1=5e3,C1=an?jb:Fb,k1=an?zb:i_,T1=an?Ob:Db,P1=an?Hb:a_;function R1(f={}){typeof f=="string"||f instanceof URL?f={url:f}:(f instanceof ArrayBuffer||ArrayBuffer.isView(f))&&(f={data:f});const e=new Ym,{docId:t}=e,i=f.url?L1(f.url):null,r=f.data?M1(f.data):null,a=f.httpHeaders||null,c=f.withCredentials===!0,u=f.password??null,d=f.range instanceof S_?f.range:null,p=Number.isInteger(f.rangeChunkSize)&&f.rangeChunkSize>0?f.rangeChunkSize:x1;let m=f.worker instanceof ol?f.worker:null;const y=f.verbosity,w=typeof f.docBaseUrl=="string"&&!op(f.docBaseUrl)?f.docBaseUrl:null,_=typeof f.cMapUrl=="string"?f.cMapUrl:null,b=f.cMapPacked!==!1,C=f.CMapReaderFactory||k1,P=typeof f.standardFontDataUrl=="string"?f.standardFontDataUrl:null,k=f.StandardFontDataFactory||P1,I=f.stopAtErrors!==!0,F=Number.isInteger(f.maxImageSize)&&f.maxImageSize>-1?f.maxImageSize:-1,N=f.isEvalSupported!==!1,B=typeof f.isOffscreenCanvasSupported=="boolean"?f.isOffscreenCanvasSupported:!an,H=typeof f.isChrome=="boolean"?f.isChrome:!pn.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),$=Number.isInteger(f.canvasMaxAreaInBytes)?f.canvasMaxAreaInBytes:-1,W=typeof f.disableFontFace=="boolean"?f.disableFontFace:an,Q=f.fontExtraProperties===!0,ne=f.enableXfa===!0,te=f.ownerDocument||globalThis.document,xe=f.disableRange===!0,fe=f.disableStream===!0,he=f.disableAutoFetch===!0,we=f.pdfBug===!0,ge=f.CanvasFactory||C1,K=f.FilterFactory||T1,U=f.enableHWA===!0,oe=d?d.length:f.length??NaN,J=typeof f.useSystemFonts=="boolean"?f.useSystemFonts:!an&&!W,M=typeof f.useWorkerFetch=="boolean"?f.useWorkerFetch:C===i_&&k===a_&&_&&P&&Qc(_,document.baseURI)&&Qc(P,document.baseURI);f.canvasFactory&&Kw("`canvasFactory`-instance option, please use `CanvasFactory` instead."),f.filterFactory&&Kw("`filterFactory`-instance option, please use `FilterFactory` instead.");const V=null;db(y);const le={canvasFactory:new ge({ownerDocument:te,enableHWA:U}),filterFactory:new K({docId:t,ownerDocument:te}),cMapReaderFactory:M?null:new C({baseUrl:_,isCompressed:b}),standardFontDataFactory:M?null:new k({baseUrl:P})};if(!m){const ve={verbosity:y,port:$s.workerPort};m=ve.port?ol.fromPort(ve):new ol(ve),e._worker=m}const Ae={docId:t,apiVersion:"4.8.69",data:r,password:u,disableAutoFetch:he,rangeChunkSize:p,length:oe,docBaseUrl:w,enableXfa:ne,evaluatorOptions:{maxImageSize:F,disableFontFace:W,ignoreErrors:I,isEvalSupported:N,isOffscreenCanvasSupported:B,isChrome:H,canvasMaxAreaInBytes:$,fontExtraProperties:Q,useSystemFonts:J,cMapUrl:M?_:null,standardFontDataUrl:M?P:null}},ke={disableFontFace:W,fontExtraProperties:Q,ownerDocument:te,pdfBug:we,styleElement:V,loadingParams:{disableAutoFetch:he,enableXfa:ne}};return m.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ve=m.messageHandler.sendWithPromise("GetDocRequest",Ae,r?[r.buffer]:null);let me;if(d)me=new i1(d,{disableRange:xe,disableStream:fe});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Le;an?Le=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Qc(i)?lA:m1:Le=Qc(i)?lA:h1,me=new Le({url:i,length:oe,httpHeaders:a,withCredentials:c,rangeChunkSize:p,disableRange:xe,disableStream:fe})}return ve.then(Le=>{if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Oe=new su(t,Le,m.port),Ne=new D1(Oe,e,me,ke,le);e._transport=Ne,Oe.send("Ready",null)})}).catch(e._capability.reject),e}function L1(f){if(f instanceof URL)return f.href;try{return new URL(f,window.location).href}catch{if(an&&typeof f=="string")return f}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function M1(f){if(an&&typeof Buffer<"u"&&f instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength)return f;if(typeof f=="string")return sp(f);if(f instanceof ArrayBuffer||ArrayBuffer.isView(f)||typeof f=="object"&&!isNaN(f==null?void 0:f.length))return new Uint8Array(f);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function cA(f){return typeof f=="object"&&Number.isInteger(f==null?void 0:f.num)&&f.num>=0&&Number.isInteger(f==null?void 0:f.gen)&&f.gen>=0}var Wf;const Gf=class Gf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${un(Gf,Wf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Wf=new WeakMap,E(Gf,Wf,0);let Ym=Gf,S_=class{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class I1{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Fr,ks,si,tl,hf;class N1{constructor(e,t,i,r=!1){E(this,si);E(this,Fr,null);E(this,ks,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new Yw:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new x_,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new Mh({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=wr.ENABLE,transform:a=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:y=!1}){var N,B;(N=this._stats)==null||N.time("Overall");const w=this._transport.getRenderingIntent(i,r,m,y),{renderingIntent:_,cacheKey:b}=w;A(this,ks,!1),x(this,si,hf).call(this),u||(u=this._transport.getOptionalContentConfig(_));let C=this._intentStates.get(b);C||(C=Object.create(null),this._intentStates.set(b,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const P=!!(_&Vn.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(B=this._stats)==null||B.time("Page Request"),this._pumpOperatorList(w));const k=H=>{var $;C.renderTasks.delete(I),(this._maybeCleanupAfterRender||P)&&A(this,ks,!0),x(this,si,tl).call(this,!P),H?(I.capability.reject(H),this._abortOperatorList({intentState:C,reason:H instanceof Error?H:new Error(H)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),($=globalThis.Stats)!=null&&$.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new Qm({callback:k,params:{canvasContext:e,viewport:t,transform:a,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!P,pdfBug:this._pdfBug,pageColors:p});(C.renderTasks||(C.renderTasks=new Set)).add(I);const F=I.task;return Promise.all([C.displayReadyCapability.promise,u]).then(([H,$])=>{var W;if(this.destroyed){k();return}if((W=this._stats)==null||W.time("Rendering"),!($.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:H,optionalContentConfig:$}),I.operatorListChanged()}).catch(k),F}getOperatorList({intent:e="display",annotationMode:t=wr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var p;function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(e,t,i,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>mu.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function a(){c.read().then(function({value:d,done:p}){if(p){i(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),a()},r)}const c=t.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),A(this,ks,!1),x(this,si,hf).call(this),Promise.all(e)}cleanup(e=!1){A(this,ks,!0);const t=x(this,si,tl).call(this,!1);return e&&t&&this._stats&&(this._stats=new Yw),t}_startRenderPage(e,t){var r,a;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(a=i.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&x(this,si,tl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:a,transfer:c}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:r},c).getReader(),p=this._intentStates.get(t);p.streamReader=d;const m=()=>{d.read().then(({value:y,done:w})=>{if(w){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),m())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const w of p.renderTasks)w.operatorListChanged();x(this,si,tl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Ov){let r=E1;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Ea(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,a]of this._intentStates)if(a===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Fr=new WeakMap,ks=new WeakMap,si=new WeakSet,tl=function(e=!1){if(x(this,si,hf).call(this),!l(this,ks)||this.destroyed)return!1;if(e)return A(this,Fr,setTimeout(()=>{A(this,Fr,null),x(this,si,tl).call(this,!1)},b1)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,ks,!1),!0},hf=function(){l(this,Fr)&&(clearTimeout(l(this,Fr)),A(this,Fr,null))};var Ts,Xf;class F1{constructor(){E(this,Ts,new Map);E(this,Xf,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,Xf).then(()=>{for(const[r]of l(this,Ts))r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:a}=i;if(a.aborted){Ie("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(e,t);r=()=>a.removeEventListener("abort",c),a.addEventListener("abort",c)}l(this,Ts).set(t,r)}removeEventListener(e,t){const i=l(this,Ts).get(t);i==null||i(),l(this,Ts).delete(t)}terminate(){for(const[,e]of l(this,Ts))e==null||e();l(this,Ts).clear()}}Ts=new WeakMap,Xf=new WeakMap;var qf,Go,Xo,Ml,df,Il,ff;const rt=class rt{constructor({name:e=null,port:t=null,verbosity:i=fb()}={}){E(this,Ml);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=l(rt,Xo))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(rt,Xo)||A(rt,Xo,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return an?Promise.all([qr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new su("main","worker",e),this._messageHandler.on("ready",function(){}),x(this,Ml,df).call(this)}_initialize(){if(l(rt,Go)||l(rt,Il,ff)){this._setupFakeWorker();return}let{workerSrc:e}=rt;try{rt._isSameOrigin(window.location.href,e)||(e=rt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new su("main","worker",t),r=()=>{a.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:a.signal}),i.on("test",u=>{if(a.abort(),this.destroyed||!u){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,x(this,Ml,df).call(this)}),i.on("ready",u=>{if(a.abort(),this.destroyed){r();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};c();return}catch{np("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(rt,Go)||(Ie("Setting up fake worker."),A(rt,Go,!0)),rt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new F1;this._port=t;const i=`fake${un(rt,qf)._++}`,r=new su(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new su(i,i+"_worker",t),x(this,Ml,df).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(rt,Xo))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,Xo))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new rt(e)}static get workerSrc(){if($s.workerSrc)return $s.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ze(this,"_setupFakeWorkerGlobal",(async()=>l(this,Il,ff)?l(this,Il,ff):(await import(this.workerSrc)).WorkerMessageHandler)())}};qf=new WeakMap,Go=new WeakMap,Xo=new WeakMap,Ml=new WeakSet,df=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Il=new WeakSet,ff=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},E(rt,Il),E(rt,qf,0),E(rt,Go,!1),E(rt,Xo),an&&(A(rt,Go,!0),$s.workerSrc||($s.workerSrc="./pdf.worker.mjs")),rt._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},rt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let ol=rt;var Ps,Qi,Nl,Fl,Ji,qo,ru;class D1{constructor(e,t,i,r,a){E(this,qo);E(this,Ps,new Map);E(this,Qi,new Map);E(this,Nl,new Map);E(this,Fl,new Map);E(this,Ji,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new x_,this.fontLoader=new Ib({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ze(this,"annotationStorage",new Bv)}getRenderingIntent(e,t=wr.ENABLE,i=null,r=!1,a=!1){let c=Vn.DISPLAY,u=Om;switch(e){case"any":c=Vn.ANY;break;case"display":break;case"print":c=Vn.PRINT;break;default:Ie(`getRenderingIntent - invalid intent: ${e}`)}const d=c&Vn.PRINT&&i instanceof e_?i:this.annotationStorage;switch(t){case wr.DISABLE:c+=Vn.ANNOTATIONS_DISABLE;break;case wr.ENABLE:break;case wr.ENABLE_FORMS:c+=Vn.ANNOTATIONS_FORMS;break;case wr.ENABLE_STORAGE:c+=Vn.ANNOTATIONS_STORAGE,u=d.serializable;break;default:Ie(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(c+=Vn.IS_EDITING),a&&(c+=Vn.OPLIST);const{ids:p,hash:m}=d.modifiedIds,y=[c,u.hash,m];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,Ji))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of l(this,Qi).values())e.push(r._destroy());l(this,Qi).clear(),l(this,Nl).clear(),l(this,Fl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Ps).clear(),this.filterFactory.destroy(),Gm.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Ea("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{Lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:c}){if(c){r.close();return}Lt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",async i=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:a,contentLength:c}=this._fullReader;return(!r||!a)&&(this._lastProgress&&((u=t.onProgress)==null||u.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var p;(p=t.onProgress)==null||p.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:c}}),e.on("GetRangeReader",(i,r)=>{Lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:c,done:u}){if(u){r.close();return}Lt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{a.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new I1(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new gm(i.message,i.code);break;case"InvalidPDFException":r=new CA(i.message);break;case"MissingPDFException":r=new xa(i.message);break;case"UnexpectedResponseException":r=new ip(i.message,i.status);break;case"UnknownErrorException":r=new mm(i.message,i.details);break;default:nt("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(A(this,Ji,Promise.withResolvers()),t.onPassword){const r=a=>{a instanceof Error?l(this,Ji).reject(a):l(this,Ji).resolve({password:a})};try{t.onPassword(r,i.code)}catch(a){l(this,Ji).reject(a)}}else l(this,Ji).reject(new gm(i.message,i.code));return l(this,Ji).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,Qi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,a])=>{var c;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:u,fontExtraProperties:d,pdfBug:p}=this._params;if("error"in a){const _=a.error;Ie(`Error during font loading: ${_}`),this.commonObjs.resolve(i,_);break}const m=p&&((c=globalThis.FontInspector)!=null&&c.enabled)?(_,b)=>globalThis.FontInspector.fontAdded(_,b):null,y=new Nb(a,{disableFontFace:u,inspectFont:m});this.fontLoader.bind(y).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d&&y.data&&(y.data=null),this.commonObjs.resolve(i,y)});break;case"CopyLocalImage":const{imageRef:w}=a;Lt(w,"The imageRef must be defined.");for(const _ of l(this,Qi).values())for(const[,b]of _.objs)if((b==null?void 0:b.ref)===w)return b.dataLen?(this.commonObjs.resolve(i,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,a,c])=>{var d;if(this.destroyed)return;const u=l(this,Qi).get(r);if(!u.objs.has(i)){if(u._intentStates.size===0){(d=c==null?void 0:c.bitmap)==null||d.close();return}switch(a){case"Image":u.objs.resolve(i,c),(c==null?void 0:c.dataLen)>lb&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Ie("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,Nl).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&l(this,Fl).set(a.refStr,e);const c=new N1(t,a,this,this._params.pdfBug);return l(this,Qi).set(t,c),c});return l(this,Nl).set(t,r),r}getPageIndex(e){return cA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return x(this,qo,ru).call(this,"GetFieldObjects")}hasJSActions(){return x(this,qo,ru).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return x(this,qo,ru).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return x(this,qo,ru).call(this,"GetOptionalContentConfig").then(t=>new n1(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Ps).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var a,c;return{info:r[0],metadata:r[1]?new e1(r[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return l(this,Ps).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Qi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Ps).clear(),this.filterFactory.destroy(!0),Gm.cleanup()}}cachedPageNumber(e){if(!cA(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Fl).get(t)??null}}Ps=new WeakMap,Qi=new WeakMap,Nl=new WeakMap,Fl=new WeakMap,Ji=new WeakMap,qo=new WeakSet,ru=function(e,t=null){const i=l(this,Ps).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return l(this,Ps).set(e,r),r};const Jd=Symbol("INITIAL_DATA");var xi,Zu,Km;class x_{constructor(){E(this,Zu);E(this,xi,Object.create(null))}get(e,t=null){if(t){const r=x(this,Zu,Km).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=l(this,xi)[e];if(!i||i.data===Jd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,xi)[e];return!!t&&t.data!==Jd}resolve(e,t=null){const i=x(this,Zu,Km).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,xi)){const{data:i}=l(this,xi)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}A(this,xi,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,xi)){const{data:t}=l(this,xi)[e];t!==Jd&&(yield[e,t])}}}xi=new WeakMap,Zu=new WeakSet,Km=function(e){var t;return(t=l(this,xi))[e]||(t[e]={...Promise.withResolvers(),data:Jd})};var Dr;class O1{constructor(e){E(this,Dr,null);A(this,Dr,e),this.onContinue=null}get promise(){return l(this,Dr).capability.promise}cancel(e=0){l(this,Dr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Dr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Dr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Dr=new WeakMap;var Or,Yo;const Ao=class Ao{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:w=null}){E(this,Or,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new O1(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var u,d;if(this.cancelled)return;if(this._canvas){if(l(Ao,Yo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Ao,Yo).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:a,background:c}=this.params;this.gfx=new rl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:r,transparency:e,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,Or)&&(window.cancelAnimationFrame(l(this,Or)),A(this,Or,null)),l(Ao,Yo).delete(this._canvas),this.callback(e||new Ov(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,Or,window.requestAnimationFrame(()=>{A(this,Or,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Ao,Yo).delete(this._canvas),this.callback())))}};Or=new WeakMap,Yo=new WeakMap,E(Ao,Yo,new WeakSet);let Qm=Ao;const j1="4.8.69",z1="3634dab10";function uA(f){return Math.floor(Math.max(0,Math.min(1,f))*255).toString(16).padStart(2,"0")}function Kc(f){return Math.max(0,Math.min(255,255*f))}class hA{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Kc(e),[e,e,e]}static G_HTML([e]){const t=uA(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Kc)}static RGB_HTML(e){return`#${e.map(uA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[Kc(1-Math.min(1,e+r)),Kc(1-Math.min(1,i+r)),Kc(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,a=1-t,c=1-i,u=Math.min(r,a,c);return["CMYK",r,a,c,u]}}class H1{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){nt("Abstract method `_createSVG` called.")}}class Gv extends H1{_createSVG(e){return document.createElementNS(vs,e)}}class E_{static setupStorage(e,t,i,r,a){const c=r.getValue(t,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),a==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?e.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),a==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const u of i.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const d=u.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:a}){const{attributes:c}=t,u=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[d,p]of Object.entries(c))if(p!=null)switch(d){case"class":p.length&&e.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!u||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,p)}u&&a.addLinkAttributes(e,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(e,c.dataId,t,i)}static render(e){var y,w;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,a=e.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:a,linkService:i});const u=a!=="richText",d=e.div;if(d.append(c),e.viewport){const _=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=_}u&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const _=document.createTextNode(r.value);c.append(_),u&&mu.shouldBuildText(r.name)&&p.push(_)}return{textDivs:p}}const m=[[r,-1,c]];for(;m.length>0;){const[_,b,C]=m.at(-1);if(b+1===_.children.length){m.pop();continue}const P=_.children[++m.at(-1)[1]];if(P===null)continue;const{name:k}=P;if(k==="#text"){const F=document.createTextNode(P.value);p.push(F),C.append(F);continue}const I=(y=P==null?void 0:P.attributes)!=null&&y.xmlns?document.createElementNS(P.attributes.xmlns,k):document.createElement(k);if(C.append(I),P.attributes&&this.setAttributes({html:I,element:P,storage:t,intent:a,linkService:i}),((w=P.children)==null?void 0:w.length)>0)m.push([P,-1,I]);else if(P.value){const F=document.createTextNode(P.value);u&&mu.shouldBuildText(k)&&p.push(F),I.append(F)}}for(const _ of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Nh=1e3,B1=9,wa=new WeakSet;function Ws(f){return{width:f[2]-f[0],height:f[3]-f[1]}}class U1{static create(e){switch(e.data.annotationType){case kt.LINK:return new b_(e);case kt.TEXT:return new V1(e);case kt.WIDGET:switch(e.data.fieldType){case"Tx":return new $1(e);case"Btn":return e.data.radioButton?new T_(e):e.data.checkBox?new G1(e):new X1(e);case"Ch":return new q1(e);case"Sig":return new W1(e)}return new ba(e);case kt.POPUP:return new Zm(e);case kt.FREETEXT:return new I_(e);case kt.LINE:return new K1(e);case kt.SQUARE:return new Q1(e);case kt.CIRCLE:return new J1(e);case kt.POLYLINE:return new N_(e);case kt.CARET:return new eC(e);case kt.INK:return new Xv(e);case kt.POLYGON:return new Z1(e);case kt.HIGHLIGHT:return new F_(e);case kt.UNDERLINE:return new tC(e);case kt.SQUIGGLY:return new nC(e);case kt.STRIKEOUT:return new iC(e);case kt.STAMP:return new D_(e);case kt.FILEATTACHMENT:return new sC(e);default:return new wt(e)}}}var Ko,Dl,Ol,eh,Jm;const Qv=class Qv{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){E(this,eh);E(this,Ko,null);E(this,Dl,!1);E(this,Ol,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Qv._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,Ko)||A(this,Ko,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&x(this,eh,Jm).call(this,t),(i=l(this,Ol))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,Ko)&&(x(this,eh,Jm).call(this,l(this,Ko).rect),(e=l(this,Ol))==null||e.popup.resetEdited(),A(this,Ko,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof ba||(a.tabIndex=Nh);const{style:c}=a;if(c.zIndex=this.parent.zIndex++,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof Zm){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,a),a}const{width:u,height:d}=Ws(t.rect);if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,P=t.borderStyle.verticalCornerRadius;if(C>0||P>0){const I=`calc(${C}px * var(--scale-factor)) / calc(${P}px * var(--scale-factor))`;c.borderRadius=I}else if(this instanceof T_){const I=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;c.borderRadius=I}switch(t.borderStyle.style){case qc.SOLID:c.borderStyle="solid";break;case qc.DASHED:c.borderStyle="dashed";break;case qc.BEVELED:Ie("Unimplemented border style: beveled");break;case qc.INSET:Ie("Unimplemented border style: inset");break;case qc.UNDERLINE:c.borderBottomStyle="solid";break}const k=t.borderColor||null;k?(A(this,Dl,!0),c.borderColor=pe.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):c.borderWidth=0}const p=pe.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:y,pageX:w,pageY:_}=r.rawDims;c.left=`${100*(p[0]-w)/m}%`,c.top=`${100*(p[1]-_)/y}%`;const{rotation:b}=t;return t.hasOwnCanvas||b===0?(c.width=`${100*u/m}%`,c.height=`${100*d/y}%`):this.setRotation(b,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:a,height:c}=Ws(this.data.rect);let u,d;e%180===0?(u=100*a/i,d=100*c/r):(u=100*c/i,d=100*a/r),t.style.width=`${u}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const a=r.detail[t],c=a[0],u=a.slice(1);r.target.style[i]=hA[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:hA[`${c}_rgb`](u)})};return ze(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const a=e[r]||i[r];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,a]of Object.entries(t)){const c=i[r];if(c){const u={detail:{[r]:a},target:e};c(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,a]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,P,k,I]=e.subarray(2,6);if(r===C&&a===P&&t===k&&i===I)return}const{style:c}=this.container;let u;if(l(this,Dl)){const{borderColor:C,borderWidth:P}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${P}">`],this.container.classList.add("hasBorder")}const d=r-t,p=a-i,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const w=m.createElement("defs");y.append(w);const _=m.createElement("clipPath"),b=`clippath_${this.data.id}`;_.setAttribute("id",b),_.setAttribute("clipPathUnits","objectBoundingBox"),w.append(_);for(let C=2,P=e.length;C<P;C+=8){const k=e[C],I=e[C+1],F=e[C+2],N=e[C+3],B=m.createElement("rect"),H=(F-t)/d,$=(a-I)/p,W=(k-F)/d,Q=(I-N)/p;B.setAttribute("x",H),B.setAttribute("y",$),B.setAttribute("width",W),B.setAttribute("height",Q),_.append(B),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${H}" y="${$}" width="${W}" height="${Q}"/>`)}l(this,Dl)&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:e}=this,t=A(this,Ol,new Zm({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:a,id:c,exportValues:u}of r){if(a===-1||c===t)continue;const d=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!wa.has(p)){Ie(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:d,domElement:p})}return i}for(const r of document.getElementsByName(e)){const{exportValue:a}=r,c=r.getAttribute("data-element-id");c!==t&&wa.has(r)&&i.push({id:c,exportValue:a,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Ko=new WeakMap,Dl=new WeakMap,Ol=new WeakMap,eh=new WeakSet,Jm=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:c,pageX:u,pageY:d}}}}=this;i==null||i.splice(0,4,...e);const{width:p,height:m}=Ws(e);t.left=`${100*(e[0]-u)/a}%`,t.top=`${100*(c-e[3]+d)/c}%`,r===0?(t.width=`${100*p/a}%`,t.height=`${100*m/c}%`):this.setRotation(r)};let wt=Qv;var $n,go,C_,k_;class b_ extends wt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});E(this,$n);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let a=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(r,t.action),a=!0):t.attachment?(x(this,$n,C_).call(this,r,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(x(this,$n,k_).call(this,r,t.setOCGState),a=!0):t.dest?(this._bindLink(r,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),a=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(r,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&x(this,$n,go).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),x(this,$n,go).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(i.actions)){const c=r.get(a);c&&(t[c]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:a}}),!1})}t.onclick||(t.onclick=()=>!1),x(this,$n,go).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),x(this,$n,go).call(this),!this._fieldObjects){Ie('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var y;r==null||r();const{fields:a,refs:c,include:u}=i,d=[];if(a.length!==0||c.length!==0){const w=new Set(c);for(const _ of a){const b=this._fieldObjects[_]||[];for(const{id:C}of b)w.add(C)}for(const _ of Object.values(this._fieldObjects))for(const b of _)w.has(b.id)===u&&d.push(b)}else for(const w of Object.values(this._fieldObjects))d.push(...w);const p=this.annotationStorage,m=[];for(const w of d){const{id:_}=w;switch(m.push(_),w.type){case"text":{const C=w.defaultValue||"";p.setValue(_,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;p.setValue(_,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";p.setValue(_,{value:C});break}default:continue}const b=document.querySelector(`[data-element-id="${_}"]`);if(b){if(!wa.has(b)){Ie(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}$n=new WeakSet,go=function(){this.container.setAttribute("data-internal-link","")},C_=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(i.content,i.filename,r),!1},x(this,$n,go).call(this)},k_=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),x(this,$n,go).call(this)};class V1 extends wt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ba extends wt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return pn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,a){i.includes("mouse")?e.addEventListener(i,c=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(i,c=>{var u;if(i==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}a&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(c)}}))})}_setEventListeners(e,t,i,r){var a,c,u;for(const[d,p]of i)(p==="Action"||(a=this.data.actions)!=null&&a[p])&&((p==="Focus"||p==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,p,r),p==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(e,t,"blur","Blur",null):p==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":pe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||B1,a=e.style;let c;const u=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(p/(om*r))||1,y=p/m;c=Math.min(r,d(y/om))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,d(p/om))}a.fontSize=`calc(${c}px * var(--scale-factor))`,a.color=pe.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class $1 extends ba{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const a=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=i),a.setValue(c.id,{[r]:i})}render(){var r,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const c=e.getValue(t,{value:this.data.fieldValue});let u=c.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let p=c.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:u,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??u,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??u),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),wa.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Nh,this._setRequired(i,this.data.required),d&&(i.maxLength=d),i.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),m.formattedValue=null}),i.addEventListener("resetform",w=>{const _=this.data.defaultFieldValue??"";i.value=m.userValue=_,m.formattedValue=null});let y=w=>{const{formattedValue:_}=m;_!=null&&(w.target.value=_),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",_=>{var C;if(m.focused)return;const{target:b}=_;m.userValue&&(b.value=m.userValue),m.lastCommittedValue=b.value,m.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(m.focused=!0)}),i.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const b={value(C){m.userValue=C.detail.value??"",e.setValue(t,{value:m.userValue.toString()}),C.target.value=m.userValue},formattedValue(C){const{formattedValue:P}=C.detail;m.formattedValue=P,P!=null&&C.target!==document.activeElement&&(C.target.value=P),e.setValue(t,{formattedValue:P})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var F;const{charLimit:P}=C.detail,{target:k}=C;if(P===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",P);let I=m.userValue;!I||I.length<=P||(I=I.slice(0,P),k.value=m.userValue=I,e.setValue(t,{value:I}),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(b,_)}),i.addEventListener("keydown",_=>{var P;m.commitKey=1;let b=-1;if(_.key==="Escape"?b=0:_.key==="Enter"&&!this.data.multiLine?b=2:_.key==="Tab"&&(m.commitKey=3),b===-1)return;const{value:C}=_.target;m.lastCommittedValue!==C&&(m.lastCommittedValue=C,m.userValue=C,(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:b,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const w=y;y=null,i.addEventListener("blur",_=>{var C,P;if(!m.focused||!_.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(m.focused=!1);const{value:b}=_.target;m.userValue=b,m.lastCommittedValue!==b&&((P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:m.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),w(_)}),(a=this.data.actions)!=null&&a.Keystroke&&i.addEventListener("beforeinput",_=>{var B;m.lastCommittedValue=null;const{data:b,target:C}=_,{value:P,selectionStart:k,selectionEnd:I}=C;let F=k,N=I;switch(_.inputType){case"deleteWordBackward":{const H=P.substring(0,k).match(/\w*[^\w]*$/);H&&(F-=H[0].length);break}case"deleteWordForward":{const H=P.substring(k).match(/^[^\w]*\w*/);H&&(N+=H[0].length);break}case"deleteContentBackward":k===I&&(F-=1);break;case"deleteContentForward":k===I&&(N+=1);break}_.preventDefault(),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,change:b||"",willCommit:!1,selStart:F,selEnd:N}})}),this._setEventListeners(i,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/d;i.classList.add("comb"),i.style.letterSpacing=`calc(${_}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class W1 extends ba{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class G1 extends ba{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return wa.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=Nh,a.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const p of this._getElementsByName(u,i)){const m=d&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=m),e.setValue(p.id,{value:m})}e.setValue(i,{value:d})}),a.addEventListener("resetform",c=>{const u=t.defaultFieldValue||"Off";c.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class T_ extends ba{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const c of this._getElementsByName(t.fieldName,i))e.setValue(c.id,{value:!1});const a=document.createElement("input");if(wa.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=Nh,a.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const p of this._getElementsByName(u,i))e.setValue(p.id,{value:!1});e.setValue(i,{value:d})}),a.addEventListener("resetform",c=>{const u=t.defaultFieldValue;c.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;a.addEventListener("updatefromsandbox",u=>{const d={value:p=>{const m=c===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const w=m&&y.id===i;y.domElement&&(y.domElement.checked=w),e.setValue(y.id,{value:w})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class X1 extends b_{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class q1 extends ba{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");wa.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Nh;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,i.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),a=!1),r.append(y)}let c=null;if(a){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),c=()=>{m.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=m=>{const y=m?"value":"textContent",{options:w,multiple:_}=r;return _?Array.prototype.filter.call(w,b=>b.selected).map(b=>b[y]):w.selectedIndex===-1?null:w[w.selectedIndex][y]};let d=u(!1);const p=m=>{const y=m.target.options;return Array.prototype.map.call(y,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const y={value(w){c==null||c();const _=w.detail.value,b=new Set(Array.isArray(_)?_:[_]);for(const C of r.options)C.selected=b.has(C.value);e.setValue(t,{value:u(!0)}),d=u(!1)},multipleSelection(w){r.multiple=!0},remove(w){const _=r.options,b=w.detail.remove;_[b].selected=!1,r.remove(b),_.length>0&&Array.prototype.findIndex.call(_,P=>P.selected)===-1&&(_[0].selected=!0),e.setValue(t,{value:u(!0),items:p(w)}),d=u(!1)},clear(w){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=u(!1)},insert(w){const{index:_,displayValue:b,exportValue:C}=w.detail.insert,P=r.children[_],k=document.createElement("option");k.textContent=b,k.value=C,P?P.before(k):r.append(k),e.setValue(t,{value:u(!0),items:p(w)}),d=u(!1)},items(w){const{items:_}=w.detail;for(;r.length!==0;)r.remove(0);for(const b of _){const{displayValue:C,exportValue:P}=b,k=document.createElement("option");k.textContent=C,k.value=P,r.append(k)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:p(w)}),d=u(!1)},indices(w){const _=new Set(w.detail.indices);for(const b of w.target.options)b.selected=_.has(b.index);e.setValue(t,{value:u(!0)}),d=u(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(y,m)}),r.addEventListener("input",m=>{var _;const y=u(!0),w=u(!1);e.setValue(t,{value:y}),m.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:w,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Zm extends wt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:wt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Y1({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${Dv}${i}`).join(",")),this.container}}var jl,Yf,Kf,zl,Qo,ft,Rs,Hl,th,nh,Bl,Ls,Ei,Ms,ih,Is,sh,Jo,Zo,Ke,pf,ev,P_,R_,L_,M_,gf,mf,tv;class Y1{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:a,contentsObj:c,richText:u,parent:d,rect:p,parentRect:m,open:y}){E(this,Ke);E(this,jl,x(this,Ke,L_).bind(this));E(this,Yf,x(this,Ke,tv).bind(this));E(this,Kf,x(this,Ke,mf).bind(this));E(this,zl,x(this,Ke,gf).bind(this));E(this,Qo,null);E(this,ft,null);E(this,Rs,null);E(this,Hl,null);E(this,th,null);E(this,nh,null);E(this,Bl,null);E(this,Ls,!1);E(this,Ei,null);E(this,Ms,null);E(this,ih,null);E(this,Is,null);E(this,sh,null);E(this,Jo,null);E(this,Zo,!1);var w;A(this,ft,e),A(this,sh,r),A(this,Rs,c),A(this,Is,u),A(this,nh,d),A(this,Qo,t),A(this,ih,p),A(this,Bl,m),A(this,th,i),A(this,Hl,zv.toDateObject(a)),this.trigger=i.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",l(this,zl)),_.addEventListener("mouseenter",l(this,Kf)),_.addEventListener("mouseleave",l(this,Yf)),_.classList.add("popupTriggerArea");for(const _ of i)(w=_.container)==null||w.addEventListener("keydown",l(this,jl));l(this,ft).hidden=!0,y&&x(this,Ke,gf).call(this)}render(){if(l(this,Ei))return;const e=A(this,Ei,document.createElement("div"));if(e.className="popup",l(this,Qo)){const a=e.style.outlineColor=pe.makeHexColor(...l(this,Qo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:e.style.backgroundColor=pe.makeHexColor(...l(this,Qo).map(u=>Math.floor(.7*(255-u)+u)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,sh),e.append(t),l(this,Hl)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Hl).valueOf()})),t.append(a)}const r=l(this,Ke,pf);if(r)E_.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(l(this,Rs));e.append(a)}l(this,ft).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let a=0,c=r.length;a<c;++a){const u=r[a];i.append(document.createTextNode(u)),a<c-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,Jo)||A(this,Jo,{contentsObj:l(this,Rs),richText:l(this,Is)}),e&&A(this,Ms,null),t&&(A(this,Is,x(this,Ke,R_).call(this,t)),A(this,Rs,null)),(i=l(this,Ei))==null||i.remove(),A(this,Ei,null)}resetEdited(){var e;l(this,Jo)&&({contentsObj:un(this,Rs)._,richText:un(this,Is)._}=l(this,Jo),A(this,Jo,null),(e=l(this,Ei))==null||e.remove(),A(this,Ei,null),A(this,Ms,null))}forceHide(){A(this,Zo,this.isVisible),l(this,Zo)&&(l(this,ft).hidden=!0)}maybeShow(){l(this,Zo)&&(l(this,Ei)||x(this,Ke,mf).call(this),A(this,Zo,!1),l(this,ft).hidden=!1)}get isVisible(){return l(this,ft).hidden===!1}}jl=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,zl=new WeakMap,Qo=new WeakMap,ft=new WeakMap,Rs=new WeakMap,Hl=new WeakMap,th=new WeakMap,nh=new WeakMap,Bl=new WeakMap,Ls=new WeakMap,Ei=new WeakMap,Ms=new WeakMap,ih=new WeakMap,Is=new WeakMap,sh=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,Ke=new WeakSet,pf=function(){const e=l(this,Is),t=l(this,Rs);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Is).html||null},ev=function(){var e,t,i;return((i=(t=(e=l(this,Ke,pf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},P_=function(){var e,t,i;return((i=(t=(e=l(this,Ke,pf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},R_=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:l(this,Ke,P_),fontSize:l(this,Ke,ev)?`calc(${l(this,Ke,ev)}px * var(--scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:r});return i},L_=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Ls))&&x(this,Ke,gf).call(this)},M_=function(){if(l(this,Ms)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:a}}}=l(this,nh);let c=!!l(this,Bl),u=c?l(this,Bl):l(this,ih);for(const b of l(this,th))if(!u||pe.intersect(b.data.rect,u)!==null){u=b.data.rect,c=!0;break}const d=pe.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),m=c?u[2]-u[0]+5:0,y=d[0]+m,w=d[1];A(this,Ms,[100*(y-r)/t,100*(w-a)/i]);const{style:_}=l(this,ft);_.left=`${l(this,Ms)[0]}%`,_.top=`${l(this,Ms)[1]}%`},gf=function(){A(this,Ls,!l(this,Ls)),l(this,Ls)?(x(this,Ke,mf).call(this),l(this,ft).addEventListener("click",l(this,zl)),l(this,ft).addEventListener("keydown",l(this,jl))):(x(this,Ke,tv).call(this),l(this,ft).removeEventListener("click",l(this,zl)),l(this,ft).removeEventListener("keydown",l(this,jl)))},mf=function(){l(this,Ei)||this.render(),this.isVisible?l(this,Ls)&&l(this,ft).classList.add("focused"):(x(this,Ke,M_).call(this),l(this,ft).hidden=!1,l(this,ft).style.zIndex=parseInt(l(this,ft).style.zIndex)+1e3)},tv=function(){l(this,ft).classList.remove("focused"),!(l(this,Ls)||!this.isVisible)&&(l(this,ft).hidden=!0,l(this,ft).style.zIndex=parseInt(l(this,ft).style.zIndex)-1e3)};class I_ extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Re.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var rh;class K1 extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,rh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=Ws(t.rect),a=this.svgFactory.create(i,r,!0),c=A(this,rh,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),c.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),c.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),c.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),c.setAttribute("stroke-width",t.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,rh)}addHighlightArea(){this.container.classList.add("highlightArea")}}rh=new WeakMap;var oh;class Q1 extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,oh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=Ws(t.rect),a=this.svgFactory.create(i,r,!0),c=t.borderStyle.width,u=A(this,oh,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",i-c),u.setAttribute("height",r-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}oh=new WeakMap;var ah;class J1 extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,ah,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=Ws(t.rect),a=this.svgFactory.create(i,r,!0),c=t.borderStyle.width,u=A(this,ah,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",i/2),u.setAttribute("cy",r/2),u.setAttribute("rx",i/2-c/2),u.setAttribute("ry",r/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ah)}addHighlightArea(){this.container.classList.add("highlightArea")}}ah=new WeakMap;var lh;class N_ extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,lh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:a}}=this;if(!i)return this.container;const{width:c,height:u}=Ws(t),d=this.svgFactory.create(c,u,!0);let p=[];for(let y=0,w=i.length;y<w;y+=2){const _=i[y]-t[0],b=t[3]-i[y+1];p.push(`${_},${b}`)}p=p.join(" ");const m=A(this,lh,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),d.append(m),this.container.append(d),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}lh=new WeakMap;class Z1 extends N_{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class eC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var ch;class Xv extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,ch,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Re.HIGHLIGHT:Re.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:r,popupRef:a}}=this,{width:c,height:u}=Ws(t),d=this.svgFactory.create(c,u,!0);for(const p of i){let m=[];for(let w=0,_=p.length;w<_;w+=2){const b=p[w]-t[0],C=t[3]-p[w+1];m.push(`${b},${C}`)}m=m.join(" ");const y=this.svgFactory.createElement(this.svgElementName);l(this,ch).push(y),y.setAttribute("points",m),y.setAttribute("stroke-width",r.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),d.append(y)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,ch)}addHighlightArea(){this.container.classList.add("highlightArea")}}ch=new WeakMap;class F_ extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Re.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class tC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class nC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class iC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class D_ extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Re.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var uh,hh,nv;class sC extends wt{constructor(t){var r;super(t,{isRenderable:!0});E(this,hh);E(this,uh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",x(this,hh,nv).bind(this)),A(this,uh,r);const{isMac:a}=pn.platform;return t.addEventListener("keydown",c=>{c.key==="Enter"&&(a?c.metaKey:c.ctrlKey)&&x(this,hh,nv).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return l(this,uh)}addHighlightArea(){this.container.classList.add("highlightArea")}}uh=new WeakMap,hh=new WeakSet,nv=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var dh,ea,ta,fh,_a,O_,iv,EA;let rC=(EA=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:a,viewport:c,structTreeLayer:u}){E(this,_a);E(this,dh,null);E(this,ea,null);E(this,ta,new Map);E(this,fh,null);this.div=e,A(this,dh,t),A(this,ea,i),A(this,fh,u||null),this.page=a,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return l(this,ta).size>0}async render(e){var c;const{annotations:t}=e,i=this.div;va(i,this.viewport);const r=new Map,a={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Gv,annotationStorage:e.annotationStorage||new Bv,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const d=u.annotationType===kt.POPUP;if(d){const y=r.get(u.id);if(!y)continue;a.elements=y}else{const{width:y,height:w}=Ws(u.rect);if(y<=0||w<=0)continue}a.data=u;const p=U1.create(a);if(!p.isRenderable)continue;if(!d&&u.popupRef){const y=r.get(u.popupRef);y?y.push(p):r.set(u.popupRef,[p])}const m=p.render();u.hidden&&(m.style.visibility="hidden"),await x(this,_a,O_).call(this,m,u.id),p._isEditable&&(l(this,ta).set(p.data.id,p),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(p))}x(this,_a,iv).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,va(t,{rotation:e.rotation}),x(this,_a,iv).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,ta).values())}getEditableAnnotation(e){return l(this,ta).get(e)}},dh=new WeakMap,ea=new WeakMap,ta=new WeakMap,fh=new WeakMap,_a=new WeakSet,O_=async function(e,t){var c,u;const i=e.firstChild||e,r=i.id=`${Dv}${t}`,a=await((c=l(this,fh))==null?void 0:c.getAriaAttributes(r));if(a)for(const[d,p]of a)i.setAttribute(d,p);this.div.append(e),(u=l(this,dh))==null||u.moveElementInDOM(this.div,e,i,!1)},iv=function(){if(!l(this,ea))return;const e=this.div;for(const[t,i]of l(this,ea)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i)}l(this,ea).clear()},EA);const Zd=/\r\n?|\n/g;var bi,On,ph,na,jn,xt,j_,z_,H_,vf,Xs,yf,wf,B_,rv,U_;const Ze=class Ze extends qe{constructor(t){super({...t,name:"freeTextEditor"});E(this,xt);E(this,bi);E(this,On,"");E(this,ph,`${this.id}-editor`);E(this,na,null);E(this,jn);A(this,bi,t.color||Ze._defaultColor||qe._defaultLineColor),A(this,jn,t.fontSize||Ze._defaultFontSize)}static get _keyboardManager(){const t=Ze.prototype,i=c=>c.isEmpty(),r=ya.TRANSLATE_SMALL,a=ya.TRANSLATE_BIG;return ze(this,"_keyboardManager",new Ih([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:i}]]))}static initialize(t,i){qe.initialize(t,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Ce.FREETEXT_SIZE:Ze._defaultFontSize=i;break;case Ce.FREETEXT_COLOR:Ze._defaultColor=i;break}}updateParams(t,i){switch(t){case Ce.FREETEXT_SIZE:x(this,xt,j_).call(this,i);break;case Ce.FREETEXT_COLOR:x(this,xt,z_).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.FREETEXT_SIZE,Ze._defaultFontSize],[Ce.FREETEXT_COLOR,Ze._defaultColor||qe._defaultLineColor]]}get propertiesToUpdate(){return[[Ce.FREETEXT_SIZE,l(this,jn)],[Ce.FREETEXT_COLOR,l(this,bi)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ze._internalPadding*t,-(Ze._internalPadding+l(this,jn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Re.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,na,new AbortController);const t=this._uiManager.combinedSignal(l(this,na));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,ph)),this._isDraggable=!0,(t=l(this,na))==null||t.abort(),A(this,na,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,On),i=A(this,On,x(this,xt,H_).call(this).trimEnd());if(t===i)return;const r=a=>{if(A(this,On,a),!a){this.remove();return}x(this,xt,wf).call(this),this._uiManager.rebuild(this),x(this,xt,vf).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),x(this,xt,vf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ze._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,ph)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${l(this,jn)}px * var(--scale-factor))`,r.color=l(this,bi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Lf(this,this.div,["dblclick","keydown"]),this.width){const[a,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,p]=this.getInitialTranslation();[d,p]=this.pageTranslationToScreen(d,p);const[m,y]=this.pageDimensions,[w,_]=this.pageTranslation;let b,C;switch(this.rotation){case 0:b=t+(u[0]-w)/m,C=i+this.height-(u[1]-_)/y;break;case 90:b=t+(u[0]-w)/m,C=i-(u[1]-_)/y,[d,p]=[p,-d];break;case 180:b=t-this.width+(u[0]-w)/m,C=i-(u[1]-_)/y,[d,p]=[-d,-p];break;case 270:b=t+(u[0]-w-this.height*y)/m,C=i+(u[1]-_-this.width*m)/y,[d,p]=[-p,d];break}this.setAt(b*a,C*c,d,p)}else this.setAt(t*a,i*c,this.width*a,this.height*c);x(this,xt,wf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var b,C,P;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const a=x(b=Ze,Xs,rv).call(b,i.getData("text")||"").replaceAll(Zd,`
`);if(!a)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!a.includes(`
`)){u.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:d,startOffset:p}=u,m=[],y=[];if(d.nodeType===Node.TEXT_NODE){const k=d.parentElement;if(y.push(d.nodeValue.slice(p).replaceAll(Zd,"")),k!==this.editorDiv){let I=m;for(const F of this.editorDiv.childNodes){if(F===k){I=y;continue}I.push(x(C=Ze,Xs,yf).call(C,F))}}m.push(d.nodeValue.slice(0,p).replaceAll(Zd,""))}else if(d===this.editorDiv){let k=m,I=0;for(const F of this.editorDiv.childNodes)I++===p&&(k=y),k.push(x(P=Ze,Xs,yf).call(P,F))}A(this,On,`${m.join(`
`)}${a}${y.join(`
`)}`),x(this,xt,wf).call(this);const w=new Range;let _=m.reduce((k,I)=>k+I.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const I=k.nodeValue.length;if(_<=I){w.setStart(k,_),w.setEnd(k,_);break}_-=I}c.removeAllRanges(),c.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,r){var u;let a=null;if(t instanceof I_){const{data:{defaultAppearanceData:{fontSize:d,fontColor:p},rect:m,rotation:y,id:w,popupRef:_},textContent:b,textPosition:C,parent:{page:{pageNumber:P}}}=t;if(!b||b.length===0)return null;a=t={annotationType:Re.FREETEXT,color:Array.from(p),fontSize:d,value:b.join(`
`),position:C,pageIndex:P-1,rect:m.slice(0),rotation:y,id:w,deleted:!1,popupRef:_}}const c=await super.deserialize(t,i,r);return A(c,jn,t.fontSize),A(c,bi,pe.makeHexColor(...t.color)),A(c,On,x(u=Ze,Xs,rv).call(u,t.value)),c.annotationElementId=t.id||null,c._initialData=a,c}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Ze._internalPadding*this.parentScale,r=this.getRect(i,i),a=qe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,bi)),c={annotationType:Re.FREETEXT,color:a,fontSize:l(this,jn),value:x(this,xt,B_).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?c:this.annotationElementId&&!x(this,xt,U_).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${l(this,jn)}px * var(--scale-factor))`,r.color=l(this,bi),i.replaceChildren();for(const c of l(this,On).split(`
`)){const u=document.createElement("div");u.append(c?document.createTextNode(c):document.createElement("br")),i.append(u)}const a=Ze._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:l(this,On)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};bi=new WeakMap,On=new WeakMap,ph=new WeakMap,na=new WeakMap,jn=new WeakMap,xt=new WeakSet,j_=function(t){const i=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-l(this,jn))*this.parentScale),A(this,jn,a),x(this,xt,vf).call(this)},r=l(this,jn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},z_=function(t){const i=a=>{A(this,bi,this.editorDiv.style.color=a)},r=l(this,bi);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},H_=function(){var r;const t=[];this.editorDiv.normalize();let i=null;for(const a of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(x(r=Ze,Xs,yf).call(r,a)),i=a);return t.join(`
`)},vf=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:a,div:c}=this,u=c.style.display,d=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",a.div.append(this.div),r=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},Xs=new WeakSet,yf=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Zd,"")},wf=function(){if(this.editorDiv.replaceChildren(),!!l(this,On))for(const t of l(this,On).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},B_=function(){return l(this,On).replaceAll(""," ")},rv=function(t){return t.replaceAll(" ","")},U_=function(t){const{value:i,fontSize:r,color:a,pageIndex:c}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((u,d)=>u!==a[d])||t.pageIndex!==c},E(Ze,Xs),be(Ze,"_freeTextDefaultContent",""),be(Ze,"_internalPadding",0),be(Ze,"_defaultColor",null),be(Ze,"_defaultFontSize",10),be(Ze,"_type","freetext"),be(Ze,"_editorType",Re.FREETEXT);let sv=Ze;class V_{toSVGPath(){nt("Abstract method `toSVGPath` must be implemented.")}get box(){nt("Abstract getter `box` must be implemented.")}serialize(e,t){nt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){nt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){nt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var zn,Ci,Ul,Vl,Zi,De,ia,sa,gh,mh,$l,Wl,jr,vh,Qf,Jf,Mt,ou,$_,W_,G_,X_,q_,Y_;const ws=class ws{constructor({x:e,y:t},i,r,a,c,u=0){E(this,Mt);E(this,zn);E(this,Ci,[]);E(this,Ul);E(this,Vl);E(this,Zi,[]);E(this,De,new Float64Array(18));E(this,ia);E(this,sa);E(this,gh);E(this,mh);E(this,$l);E(this,Wl);E(this,jr,[]);A(this,zn,i),A(this,Wl,a*r),A(this,Vl,c),l(this,De).set([NaN,NaN,NaN,NaN,e,t],6),A(this,Ul,u),A(this,mh,l(ws,vh)*r),A(this,gh,l(ws,Jf)*r),A(this,$l,r),l(this,jr).push(e,t)}isEmpty(){return isNaN(l(this,De)[8])}add({x:e,y:t}){var Q;A(this,ia,e),A(this,sa,t);const[i,r,a,c]=l(this,zn);let[u,d,p,m]=l(this,De).subarray(8,12);const y=e-p,w=t-m,_=Math.hypot(y,w);if(_<l(this,gh))return!1;const b=_-l(this,mh),C=b/_,P=C*y,k=C*w;let I=u,F=d;u=p,d=m,p+=P,m+=k,(Q=l(this,jr))==null||Q.push(e,t);const N=-k/b,B=P/b,H=N*l(this,Wl),$=B*l(this,Wl);return l(this,De).set(l(this,De).subarray(2,8),0),l(this,De).set([p+H,m+$],4),l(this,De).set(l(this,De).subarray(14,18),12),l(this,De).set([p-H,m-$],16),isNaN(l(this,De)[6])?(l(this,Zi).length===0&&(l(this,De).set([u+H,d+$],2),l(this,Zi).push(NaN,NaN,NaN,NaN,(u+H-i)/a,(d+$-r)/c),l(this,De).set([u-H,d-$],14),l(this,Ci).push(NaN,NaN,NaN,NaN,(u-H-i)/a,(d-$-r)/c)),l(this,De).set([I,F,u,d,p,m],6),!this.isEmpty()):(l(this,De).set([I,F,u,d,p,m],6),Math.abs(Math.atan2(F-d,I-u)-Math.atan2(k,P))<Math.PI/2?([u,d,p,m]=l(this,De).subarray(2,6),l(this,Zi).push(NaN,NaN,NaN,NaN,((u+p)/2-i)/a,((d+m)/2-r)/c),[u,d,I,F]=l(this,De).subarray(14,18),l(this,Ci).push(NaN,NaN,NaN,NaN,((I+u)/2-i)/a,((F+d)/2-r)/c),!0):([I,F,u,d,p,m]=l(this,De).subarray(0,6),l(this,Zi).push(((I+5*u)/6-i)/a,((F+5*d)/6-r)/c,((5*u+p)/6-i)/a,((5*d+m)/6-r)/c,((u+p)/2-i)/a,((d+m)/2-r)/c),[p,m,u,d,I,F]=l(this,De).subarray(12,18),l(this,Ci).push(((I+5*u)/6-i)/a,((F+5*d)/6-r)/c,((5*u+p)/6-i)/a,((5*d+m)/6-r)/c,((u+p)/2-i)/a,((d+m)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Zi),t=l(this,Ci);if(isNaN(l(this,De)[6])&&!this.isEmpty())return x(this,Mt,$_).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);x(this,Mt,G_).call(this,i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return x(this,Mt,W_).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,r,a,c){return new K_(e,t,i,r,a,c)}getOutlines(){var y;const e=l(this,Zi),t=l(this,Ci),i=l(this,De),[r,a,c,u]=l(this,zn),d=new Float64Array((((y=l(this,jr))==null?void 0:y.length)??0)+2);for(let w=0,_=d.length-2;w<_;w+=2)d[w]=(l(this,jr)[w]-r)/c,d[w+1]=(l(this,jr)[w+1]-a)/u;if(d[d.length-2]=(l(this,ia)-r)/c,d[d.length-1]=(l(this,sa)-a)/u,isNaN(i[6])&&!this.isEmpty())return x(this,Mt,X_).call(this,d);const p=new Float64Array(l(this,Zi).length+24+l(this,Ci).length);let m=e.length;for(let w=0;w<m;w+=2){if(isNaN(e[w])){p[w]=p[w+1]=NaN;continue}p[w]=e[w],p[w+1]=e[w+1]}m=x(this,Mt,Y_).call(this,p,m);for(let w=t.length-6;w>=6;w-=6)for(let _=0;_<6;_+=2){if(isNaN(t[w+_])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=t[w+_],p[m+1]=t[w+_+1],m+=2}return x(this,Mt,q_).call(this,p,m),this.newFreeDrawOutline(p,d,l(this,zn),l(this,$l),l(this,Ul),l(this,Vl))}};zn=new WeakMap,Ci=new WeakMap,Ul=new WeakMap,Vl=new WeakMap,Zi=new WeakMap,De=new WeakMap,ia=new WeakMap,sa=new WeakMap,gh=new WeakMap,mh=new WeakMap,$l=new WeakMap,Wl=new WeakMap,jr=new WeakMap,vh=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Mt=new WeakSet,ou=function(){const e=l(this,De).subarray(4,6),t=l(this,De).subarray(16,18),[i,r,a,c]=l(this,zn);return[(l(this,ia)+(e[0]-t[0])/2-i)/a,(l(this,sa)+(e[1]-t[1])/2-r)/c,(l(this,ia)+(t[0]-e[0])/2-i)/a,(l(this,sa)+(t[1]-e[1])/2-r)/c]},$_=function(){const[e,t,i,r]=l(this,zn),[a,c,u,d]=x(this,Mt,ou).call(this);return`M${(l(this,De)[2]-e)/i} ${(l(this,De)[3]-t)/r} L${(l(this,De)[4]-e)/i} ${(l(this,De)[5]-t)/r} L${a} ${c} L${u} ${d} L${(l(this,De)[16]-e)/i} ${(l(this,De)[17]-t)/r} L${(l(this,De)[14]-e)/i} ${(l(this,De)[15]-t)/r} Z`},W_=function(e){const t=l(this,Ci);e.push(`L${t[4]} ${t[5]} Z`)},G_=function(e){const[t,i,r,a]=l(this,zn),c=l(this,De).subarray(4,6),u=l(this,De).subarray(16,18),[d,p,m,y]=x(this,Mt,ou).call(this);e.push(`L${(c[0]-t)/r} ${(c[1]-i)/a} L${d} ${p} L${m} ${y} L${(u[0]-t)/r} ${(u[1]-i)/a}`)},X_=function(e){const t=l(this,De),[i,r,a,c]=l(this,zn),[u,d,p,m]=x(this,Mt,ou).call(this),y=new Float64Array(36);return y.set([NaN,NaN,NaN,NaN,(t[2]-i)/a,(t[3]-r)/c,NaN,NaN,NaN,NaN,(t[4]-i)/a,(t[5]-r)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(t[16]-i)/a,(t[17]-r)/c,NaN,NaN,NaN,NaN,(t[14]-i)/a,(t[15]-r)/c],0),this.newFreeDrawOutline(y,e,l(this,zn),l(this,$l),l(this,Ul),l(this,Vl))},q_=function(e,t){const i=l(this,Ci);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},Y_=function(e,t){const i=l(this,De).subarray(4,6),r=l(this,De).subarray(16,18),[a,c,u,d]=l(this,zn),[p,m,y,w]=x(this,Mt,ou).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-a)/u,(i[1]-c)/d,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,y,w,NaN,NaN,NaN,NaN,(r[0]-a)/u,(r[1]-c)/d],t),t+=24},E(ws,vh,8),E(ws,Qf,2),E(ws,Jf,l(ws,vh)+l(ws,Qf));let If=ws;var Gl,ra,Ns,yh,Hn,wh,yt,Pn,au,lu,Q_;class K_ extends V_{constructor(t,i,r,a,c,u){super();E(this,Pn);E(this,Gl);E(this,ra,null);E(this,Ns);E(this,yh);E(this,Hn);E(this,wh);E(this,yt);A(this,yt,t),A(this,Hn,i),A(this,Gl,r),A(this,wh,a),A(this,Ns,c),A(this,yh,u),x(this,Pn,Q_).call(this,u);const{x:d,y:p,width:m,height:y}=l(this,ra);for(let w=0,_=t.length;w<_;w+=2)t[w]=(t[w]-d)/m,t[w+1]=(t[w+1]-p)/y;for(let w=0,_=i.length;w<_;w+=2)i[w]=(i[w]-d)/m,i[w+1]=(i[w+1]-p)/y}toSVGPath(){const t=[`M${l(this,yt)[4]} ${l(this,yt)[5]}`];for(let i=6,r=l(this,yt).length;i<r;i+=6){if(isNaN(l(this,yt)[i])){t.push(`L${l(this,yt)[i+4]} ${l(this,yt)[i+5]}`);continue}t.push(`C${l(this,yt)[i]} ${l(this,yt)[i+1]} ${l(this,yt)[i+2]} ${l(this,yt)[i+3]} ${l(this,yt)[i+4]} ${l(this,yt)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,a],c){const u=r-t,d=a-i;let p,m;switch(c){case 0:p=x(this,Pn,au).call(this,l(this,yt),t,a,u,-d),m=x(this,Pn,au).call(this,l(this,Hn),t,a,u,-d);break;case 90:p=x(this,Pn,lu).call(this,l(this,yt),t,i,u,d),m=x(this,Pn,lu).call(this,l(this,Hn),t,i,u,d);break;case 180:p=x(this,Pn,au).call(this,l(this,yt),r,i,-u,d),m=x(this,Pn,au).call(this,l(this,Hn),r,i,-u,d);break;case 270:p=x(this,Pn,lu).call(this,l(this,yt),r,a,-u,-d),m=x(this,Pn,lu).call(this,l(this,Hn),r,a,-u,-d);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return l(this,ra)}newOutliner(t,i,r,a,c,u=0){return new If(t,i,r,a,c,u)}getNewOutline(t,i){const{x:r,y:a,width:c,height:u}=l(this,ra),[d,p,m,y]=l(this,Gl),w=c*m,_=u*y,b=r*m+d,C=a*y+p,P=this.newOutliner({x:l(this,Hn)[0]*w+b,y:l(this,Hn)[1]*_+C},l(this,Gl),l(this,wh),t,l(this,yh),i??l(this,Ns));for(let k=2;k<l(this,Hn).length;k+=2)P.add({x:l(this,Hn)[k]*w+b,y:l(this,Hn)[k+1]*_+C});return P.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Gl=new WeakMap,ra=new WeakMap,Ns=new WeakMap,yh=new WeakMap,Hn=new WeakMap,wh=new WeakMap,yt=new WeakMap,Pn=new WeakSet,au=function(t,i,r,a,c){const u=new Float64Array(t.length);for(let d=0,p=t.length;d<p;d+=2)u[d]=i+t[d]*a,u[d+1]=r+t[d+1]*c;return u},lu=function(t,i,r,a,c){const u=new Float64Array(t.length);for(let d=0,p=t.length;d<p;d+=2)u[d]=i+t[d+1]*a,u[d+1]=r+t[d]*c;return u},Q_=function(t){const i=l(this,yt);let r=i[4],a=i[5],c=r,u=a,d=r,p=a,m=r,y=a;const w=t?Math.max:Math.min;for(let k=6,I=i.length;k<I;k+=6){if(isNaN(i[k]))c=Math.min(c,i[k+4]),u=Math.min(u,i[k+5]),d=Math.max(d,i[k+4]),p=Math.max(p,i[k+5]),y<i[k+5]?(m=i[k+4],y=i[k+5]):y===i[k+5]&&(m=w(m,i[k+4]));else{const F=pe.bezierBoundingBox(r,a,...i.slice(k,k+6));c=Math.min(c,F[0]),u=Math.min(u,F[1]),d=Math.max(d,F[2]),p=Math.max(p,F[3]),y<F[3]?(m=F[2],y=F[3]):y===F[3]&&(m=w(m,F[2]))}r=i[k+4],a=i[k+5]}const _=c-l(this,Ns),b=u-l(this,Ns),C=d-c+2*l(this,Ns),P=p-u+2*l(this,Ns);A(this,ra,{x:_,y:b,width:C,height:P,lastPoint:[m,y]})};var Ah,zr,ki,mn,J_,Af,Z_,eS,ov;class dA{constructor(e,t=0,i=0,r=!0){E(this,mn);E(this,Ah);E(this,zr,[]);E(this,ki,[]);let a=1/0,c=-1/0,u=1/0,d=-1/0;const p=10**-4;for(const{x:P,y:k,width:I,height:F}of e){const N=Math.floor((P-t)/p)*p,B=Math.ceil((P+I+t)/p)*p,H=Math.floor((k-t)/p)*p,$=Math.ceil((k+F+t)/p)*p,W=[N,H,$,!0],Q=[B,H,$,!1];l(this,zr).push(W,Q),a=Math.min(a,N),c=Math.max(c,B),u=Math.min(u,H),d=Math.max(d,$)}const m=c-a+2*i,y=d-u+2*i,w=a-i,_=u-i,b=l(this,zr).at(r?-1:-2),C=[b[0],b[2]];for(const P of l(this,zr)){const[k,I,F]=P;P[0]=(k-w)/m,P[1]=(I-_)/y,P[2]=(F-_)/y}A(this,Ah,{x:w,y:_,width:m,height:y,lastPoint:C})}getOutlines(){l(this,zr).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,zr))t[3]?(e.push(...x(this,mn,ov).call(this,t)),x(this,mn,Z_).call(this,t)):(x(this,mn,eS).call(this,t),e.push(...x(this,mn,ov).call(this,t)));return x(this,mn,J_).call(this,e)}}Ah=new WeakMap,zr=new WeakMap,ki=new WeakMap,mn=new WeakSet,J_=function(e){const t=[],i=new Set;for(const c of e){const[u,d,p]=c;t.push([u,d,c],[u,p,c])}t.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=t.length;c<u;c+=2){const d=t[c][2],p=t[c+1][2];d.push(p),p.push(d),i.add(d),i.add(p)}const r=[];let a;for(;i.size>0;){const c=i.values().next().value;let[u,d,p,m,y]=c;i.delete(c);let w=u,_=d;for(a=[u,p],r.push(a);;){let b;if(i.has(m))b=m;else if(i.has(y))b=y;else break;i.delete(b),[u,d,p,m,y]=b,w!==u&&(a.push(w,_,u,_===d?d:p),w=u),_=_===d?p:d}a.push(w,_)}return new oC(r,l(this,Ah))},Af=function(e){const t=l(this,ki);let i=0,r=t.length-1;for(;i<=r;){const a=i+r>>1,c=t[a][0];if(c===e)return a;c<e?i=a+1:r=a-1}return r+1},Z_=function([,e,t]){const i=x(this,mn,Af).call(this,e);l(this,ki).splice(i,0,[e,t])},eS=function([,e,t]){const i=x(this,mn,Af).call(this,e);for(let r=i;r<l(this,ki).length;r++){const[a,c]=l(this,ki)[r];if(a!==e)break;if(a===e&&c===t){l(this,ki).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[a,c]=l(this,ki)[r];if(a!==e)break;if(a===e&&c===t){l(this,ki).splice(r,1);return}}},ov=function(e){const[t,i,r]=e,a=[[t,i,r]],c=x(this,mn,Af).call(this,r);for(let u=0;u<c;u++){const[d,p]=l(this,ki)[u];for(let m=0,y=a.length;m<y;m++){const[,w,_]=a[m];if(!(p<=w||_<=d)){if(w>=d){if(_>p)a[m][1]=p;else{if(y===1)return[];a.splice(m,1),m--,y--}continue}a[m][2]=d,_>p&&a.push([t,p,_])}}}return a};var _h,Xl;class oC extends V_{constructor(t,i){super();E(this,_h);E(this,Xl);A(this,Xl,t),A(this,_h,i)}toSVGPath(){const t=[];for(const i of l(this,Xl)){let[r,a]=i;t.push(`M${r} ${a}`);for(let c=2;c<i.length;c+=2){const u=i[c],d=i[c+1];u===r?(t.push(`V${d}`),a=d):d===a&&(t.push(`H${u}`),r=u)}t.push("Z")}return t.join(" ")}serialize([t,i,r,a],c){const u=[],d=r-t,p=a-i;for(const m of l(this,Xl)){const y=new Array(m.length);for(let w=0;w<m.length;w+=2)y[w]=t+m[w]*d,y[w+1]=a-m[w+1]*p;u.push(y)}return u}get box(){return l(this,_h)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}_h=new WeakMap,Xl=new WeakMap;class av extends If{newFreeDrawOutline(e,t,i,r,a,c){return new aC(e,t,i,r,a,c)}get classNamesForDrawing(){return["highlight","free"]}}class aC extends K_{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,r,a,c=0){return new av(e,t,i,r,a,c)}}var Ti,oa,ql,Pt,Sh,Yl,xh,Eh,Hr,Pi,Kl,bh,Ye,lv,cv,uv,mo,tS,yr;const En=class En{constructor({editor:e=null,uiManager:t=null}){E(this,Ye);E(this,Ti,null);E(this,oa,null);E(this,ql);E(this,Pt,null);E(this,Sh,!1);E(this,Yl,!1);E(this,xh,null);E(this,Eh);E(this,Hr,null);E(this,Pi,null);E(this,Kl);var i;e?(A(this,Yl,!1),A(this,Kl,Ce.HIGHLIGHT_COLOR),A(this,xh,e)):(A(this,Yl,!0),A(this,Kl,Ce.HIGHLIGHT_DEFAULT_COLOR)),A(this,Pi,(e==null?void 0:e._uiManager)||t),A(this,Eh,l(this,Pi)._eventBus),A(this,ql,(e==null?void 0:e.color)||((i=l(this,Pi))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(En,bh)||A(En,bh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ze(this,"_keyboardManager",new Ih([[["Escape","mac+Escape"],En.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],En.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],En.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],En.prototype._moveToPrevious],[["Home","mac+Home"],En.prototype._moveToBeginning],[["End","mac+End"],En.prototype._moveToEnd]]))}renderButton(){const e=A(this,Ti,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,Pi)._signal;e.addEventListener("click",x(this,Ye,mo).bind(this),{signal:t}),e.addEventListener("keydown",x(this,Ye,uv).bind(this),{signal:t});const i=A(this,oa,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,ql),e.append(i),e}renderMainDropdown(){const e=A(this,Pt,x(this,Ye,lv).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,Ti)){x(this,Ye,mo).call(this,e);return}const t=e.target.getAttribute("data-color");t&&x(this,Ye,cv).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,Ye,yr)){x(this,Ye,mo).call(this,e);return}if(e.target===l(this,Ti)){(t=l(this,Pt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,Pt))==null?void 0:t.firstChild)||e.target===l(this,Ti)){l(this,Ye,yr)&&this._hideDropdownFromKeyboard();return}l(this,Ye,yr)||x(this,Ye,mo).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,Ye,yr)){x(this,Ye,mo).call(this,e);return}(t=l(this,Pt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,Ye,yr)){x(this,Ye,mo).call(this,e);return}(t=l(this,Pt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Pt))==null||e.classList.add("hidden"),(t=l(this,Hr))==null||t.abort(),A(this,Hr,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Yl)){if(!l(this,Ye,yr)){(e=l(this,xh))==null||e.unselect();return}this.hideDropdown(),l(this,Ti).focus({preventScroll:!0,focusVisible:l(this,Sh)})}}updateColor(e){if(l(this,oa)&&(l(this,oa).style.backgroundColor=e),!l(this,Pt))return;const t=l(this,Pi).highlightColors.values();for(const i of l(this,Pt).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,Ti))==null||e.remove(),A(this,Ti,null),A(this,oa,null),(t=l(this,Pt))==null||t.remove(),A(this,Pt,null)}};Ti=new WeakMap,oa=new WeakMap,ql=new WeakMap,Pt=new WeakMap,Sh=new WeakMap,Yl=new WeakMap,xh=new WeakMap,Eh=new WeakMap,Hr=new WeakMap,Pi=new WeakMap,Kl=new WeakMap,bh=new WeakMap,Ye=new WeakSet,lv=function(){const e=document.createElement("div"),t=l(this,Pi)._signal;e.addEventListener("contextmenu",ai,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of l(this,Pi).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=i,a.setAttribute("data-l10n-id",l(En,bh)[i]);const c=document.createElement("span");a.append(c),c.className="swatch",c.style.backgroundColor=r,a.setAttribute("aria-selected",r===l(this,ql)),a.addEventListener("click",x(this,Ye,cv).bind(this,r),{signal:t}),e.append(a)}return e.addEventListener("keydown",x(this,Ye,uv).bind(this),{signal:t}),e},cv=function(e,t){t.stopPropagation(),l(this,Eh).dispatch("switchannotationeditorparams",{source:this,type:l(this,Kl),value:e})},uv=function(e){En._keyboardManager.exec(this,e)},mo=function(e){if(l(this,Ye,yr)){this.hideDropdown();return}if(A(this,Sh,e.detail===0),l(this,Hr)||(A(this,Hr,new AbortController),window.addEventListener("pointerdown",x(this,Ye,tS).bind(this),{signal:l(this,Pi).combinedSignal(l(this,Hr))})),l(this,Pt)){l(this,Pt).classList.remove("hidden");return}const t=A(this,Pt,x(this,Ye,lv).call(this));l(this,Ti).append(t)},tS=function(e){var t;(t=l(this,Pt))!=null&&t.contains(e.target)||this.hideDropdown()},yr=function(){return l(this,Pt)&&!l(this,Pt).classList.contains("hidden")},E(En,bh,null);let Nf=En;var Ql,Ch,Fs,aa,Jl,ti,kh,Th,la,Ri,sn,kn,Zl,Ds,Rt,ec,ni,Ph,Pe,hv,_f,nS,iS,sS,dv,vo,ri,nl,rS,Sf,cu,oS,aS,lS,cS,uS;const Ve=class Ve extends qe{constructor(t){super({...t,name:"highlightEditor"});E(this,Pe);E(this,Ql,null);E(this,Ch,0);E(this,Fs);E(this,aa,null);E(this,Jl,null);E(this,ti,null);E(this,kh,null);E(this,Th,0);E(this,la,null);E(this,Ri,null);E(this,sn,null);E(this,kn,!1);E(this,Zl,null);E(this,Ds);E(this,Rt,null);E(this,ec,"");E(this,ni);E(this,Ph,"");this.color=t.color||Ve._defaultColor,A(this,ni,t.thickness||Ve._defaultThickness),A(this,Ds,t.opacity||Ve._defaultOpacity),A(this,Fs,t.boxes||null),A(this,Ph,t.methodOfCreation||""),A(this,ec,t.text||""),this._isDraggable=!1,t.highlightId>-1?(A(this,kn,!0),x(this,Pe,_f).call(this,t),x(this,Pe,vo).call(this)):l(this,Fs)&&(A(this,Ql,t.anchorNode),A(this,Ch,t.anchorOffset),A(this,kh,t.focusNode),A(this,Th,t.focusOffset),x(this,Pe,hv).call(this),x(this,Pe,vo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ve.prototype;return ze(this,"_keyboardManager",new Ih([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,kn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,ni),methodOfCreation:l(this,Ph)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;qe.initialize(t,i),Ve._defaultColor||(Ve._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case Ce.HIGHLIGHT_DEFAULT_COLOR:Ve._defaultColor=i;break;case Ce.HIGHLIGHT_THICKNESS:Ve._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,Zl)}updateParams(t,i){switch(t){case Ce.HIGHLIGHT_COLOR:x(this,Pe,nS).call(this,i);break;case Ce.HIGHLIGHT_THICKNESS:x(this,Pe,iS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.HIGHLIGHT_DEFAULT_COLOR,Ve._defaultColor],[Ce.HIGHLIGHT_THICKNESS,Ve._defaultThickness]]}get propertiesToUpdate(){return[[Ce.HIGHLIGHT_COLOR,this.color||Ve._defaultColor],[Ce.HIGHLIGHT_THICKNESS,l(this,ni)||Ve._defaultThickness],[Ce.HIGHLIGHT_FREE,l(this,kn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(A(this,Jl,new Nf({editor:this})),t.addColorPicker(l(this,Jl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(this,Pe,cu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,x(this,Pe,cu).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){x(this,Pe,dv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,Pe,vo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?x(this,Pe,dv).call(this):t&&(x(this,Pe,vo).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var a,c,u;const{drawLayer:i}=this.parent;let r;l(this,kn)?(t=(t-this.rotation+360)%360,r=x(a=Ve,ri,nl).call(a,l(this,Ri).box,t)):r=x(c=Ve,ri,nl).call(c,this,t),i.rotate(l(this,sn),t),i.rotate(l(this,Rt),t),i.updateBox(l(this,sn),r),i.updateBox(l(this,Rt),x(u=Ve,ri,nl).call(u,l(this,ti).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,ec)&&(t.setAttribute("aria-label",l(this,ec)),t.setAttribute("role","mark")),l(this,kn)?t.classList.add("free"):this.div.addEventListener("keydown",x(this,Pe,rS).bind(this),{signal:this._uiManager._signal});const i=A(this,la,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,aa);const[r,a]=this.parentDimensions;return this.setDims(this.width*r,this.height*a),Lf(this,l(this,la),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,Rt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,Rt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:x(this,Pe,Sf).call(this,!0);break;case 1:case 3:x(this,Pe,Sf).call(this,!1);break}}select(){var t,i;super.select(),l(this,Rt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,Rt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(l(this,Rt),"selected"))}unselect(){var t;super.unselect(),l(this,Rt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,Rt),"selected"),l(this,kn)||x(this,Pe,Sf).call(this,!1))}get _mustFixPosition(){return!l(this,kn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,sn),t),this.parent.drawLayer.show(l(this,Rt),t))}static startHighlighting(t,i,{target:r,x:a,y:c}){const{x:u,y:d,width:p,height:m}=r.getBoundingClientRect(),y=new AbortController,w=t.combinedSignal(y),_=C=>{C.preventDefault(),C.stopPropagation()},b=C=>{y.abort(),x(this,ri,cS).call(this,t,C)};window.addEventListener("blur",b,{signal:w}),window.addEventListener("pointerup",b,{signal:w}),window.addEventListener("pointerdown",_,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ai,{signal:w}),r.addEventListener("pointermove",x(this,ri,lS).bind(this,t),{signal:w}),this._freeHighlight=new av({x:a,y:c},[u,d,p,m],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,r){var C,P,k,I;let a=null;if(t instanceof F_){const{data:{quadPoints:F,rect:N,rotation:B,id:H,color:$,opacity:W,popupRef:Q},parent:{page:{pageNumber:ne}}}=t;a=t={annotationType:Re.HIGHLIGHT,color:Array.from($),opacity:W,quadPoints:F,boxes:null,pageIndex:ne-1,rect:N.slice(0),rotation:B,id:H,deleted:!1,popupRef:Q}}else if(t instanceof Xv){const{data:{inkLists:F,rect:N,rotation:B,id:H,color:$,borderStyle:{rawWidth:W},popupRef:Q},parent:{page:{pageNumber:ne}}}=t;a=t={annotationType:Re.HIGHLIGHT,color:Array.from($),thickness:W,inkLists:F,boxes:null,pageIndex:ne-1,rect:N.slice(0),rotation:B,id:H,deleted:!1,popupRef:Q}}const{color:c,quadPoints:u,inkLists:d,opacity:p}=t,m=await super.deserialize(t,i,r);m.color=pe.makeHexColor(...c),A(m,Ds,p||1),d&&A(m,ni,t.thickness),m.annotationElementId=t.id||null,m._initialData=a;const[y,w]=m.pageDimensions,[_,b]=m.pageTranslation;if(u){const F=A(m,Fs,[]);for(let N=0;N<u.length;N+=8)F.push({x:(u[N]-_)/y,y:1-(u[N+1]-b)/w,width:(u[N+2]-u[N])/y,height:(u[N+1]-u[N+5])/w});x(C=m,Pe,hv).call(C),x(P=m,Pe,vo).call(P),m.rotate(m.rotation)}else if(d){A(m,kn,!0);const F=d[0],N={x:F[0]-_,y:w-(F[1]-b)},B=new av(N,[0,0,y,w],1,l(m,ni)/2,!0,.001);for(let W=0,Q=F.length;W<Q;W+=2)N.x=F[W]-_,N.y=w-(F[W+1]-b),B.add(N);const{id:H,clipPathId:$}=i.drawLayer.draw(B,m.color,m._defaultOpacity,!0);x(k=m,Pe,_f).call(k,{highlightOutlines:B.getOutlines(),highlightId:H,clipPathId:$}),x(I=m,Pe,vo).call(I)}return m}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=qe._colorManager.convert(this.color),a={annotationType:Re.HIGHLIGHT,color:r,opacity:l(this,Ds),thickness:l(this,ni),quadPoints:x(this,Pe,oS).call(this),outlines:x(this,Pe,aS).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:x(this,Pe,cu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!x(this,Pe,uS).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ql=new WeakMap,Ch=new WeakMap,Fs=new WeakMap,aa=new WeakMap,Jl=new WeakMap,ti=new WeakMap,kh=new WeakMap,Th=new WeakMap,la=new WeakMap,Ri=new WeakMap,sn=new WeakMap,kn=new WeakMap,Zl=new WeakMap,Ds=new WeakMap,Rt=new WeakMap,ec=new WeakMap,ni=new WeakMap,Ph=new WeakMap,Pe=new WeakSet,hv=function(){const t=new dA(l(this,Fs),.001);A(this,Ri,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,Ri).box;const i=new dA(l(this,Fs),.0025,.001,this._uiManager.direction==="ltr");A(this,ti,i.getOutlines());const{lastPoint:r}=l(this,ti).box;A(this,Zl,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},_f=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var y,w;if(A(this,Ri,t),A(this,ti,t.getNewOutline(l(this,ni)/2+1.5,.0025)),i>=0)A(this,sn,i),A(this,aa,r),this.parent.drawLayer.finalizeLine(i,t),A(this,Rt,this.parent.drawLayer.drawOutline(l(this,ti)));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,sn),t),this.parent.drawLayer.updateBox(l(this,sn),x(y=Ve,ri,nl).call(y,l(this,Ri).box,(_-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,Rt),l(this,ti)),this.parent.drawLayer.updateBox(l(this,Rt),x(w=Ve,ri,nl).call(w,l(this,ti).box,_))}const{x:c,y:u,width:d,height:p}=t.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=d,this.height=p;break;case 90:{const[_,b]=this.parentDimensions;this.x=u,this.y=1-c,this.width=d*b/_,this.height=p*_/b;break}case 180:this.x=1-c,this.y=1-u,this.width=d,this.height=p;break;case 270:{const[_,b]=this.parentDimensions;this.x=1-u,this.y=c,this.width=d*b/_,this.height=p*_/b;break}}const{lastPoint:m}=l(this,ti).box;A(this,Zl,[(m[0]-c)/d,(m[1]-u)/p])},nS=function(t){const i=(c,u)=>{var d,p,m;this.color=c,(d=this.parent)==null||d.drawLayer.changeColor(l(this,sn),c),(p=l(this,Jl))==null||p.updateColor(c),A(this,Ds,u),(m=this.parent)==null||m.drawLayer.changeOpacity(l(this,sn),u)},r=this.color,a=l(this,Ds);this.addCommands({cmd:i.bind(this,t,Ve._defaultOpacity),undo:i.bind(this,r,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},iS=function(t){const i=l(this,ni),r=a=>{A(this,ni,a),x(this,Pe,sS).call(this,a)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},sS=function(t){if(!l(this,kn))return;x(this,Pe,_f).call(this,{highlightOutlines:l(this,Ri).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},dv=function(){l(this,sn)===null||!this.parent||(this.parent.drawLayer.remove(l(this,sn)),A(this,sn,null),this.parent.drawLayer.remove(l(this,Rt)),A(this,Rt,null))},vo=function(t=this.parent){l(this,sn)===null&&({id:un(this,sn)._,clipPathId:un(this,aa)._}=t.drawLayer.draw(l(this,Ri),this.color,l(this,Ds)),A(this,Rt,t.drawLayer.drawOutline(l(this,ti))),l(this,la)&&(l(this,la).style.clipPath=l(this,aa)))},ri=new WeakSet,nl=function({x:t,y:i,width:r,height:a},c){switch(c){case 90:return{x:1-i-a,y:t,width:a,height:r};case 180:return{x:1-t-r,y:1-i-a,width:r,height:a};case 270:return{x:i,y:1-t-r,width:a,height:r}}return{x:t,y:i,width:r,height:a}},rS=function(t){Ve._keyboardManager.exec(this,t)},Sf=function(t){if(!l(this,Ql))return;const i=window.getSelection();t?i.setPosition(l(this,Ql),l(this,Ch)):i.setPosition(l(this,kh),l(this,Th))},cu=function(){return l(this,kn)?this.rotation:0},oS=function(){if(l(this,kn))return null;const[t,i]=this.pageDimensions,[r,a]=this.pageTranslation,c=l(this,Fs),u=new Float32Array(c.length*8);let d=0;for(const{x:p,y:m,width:y,height:w}of c){const _=p*t+r,b=(1-m-w)*i+a;u[d]=u[d+4]=_,u[d+1]=u[d+3]=b,u[d+2]=u[d+6]=_+y*t,u[d+5]=u[d+7]=b+w*i,d+=8}return u},aS=function(t){return l(this,Ri).serialize(t,x(this,Pe,cu).call(this))},lS=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},cS=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},uS=function(t){const{color:i}=this._initialData;return t.color.some((r,a)=>r!==i[a])},E(Ve,ri),be(Ve,"_defaultColor",null),be(Ve,"_defaultOpacity",1),be(Ve,"_defaultThickness",12),be(Ve,"_type","highlight"),be(Ve,"_editorType",Re.HIGHLIGHT),be(Ve,"_freeHighlightId",-1),be(Ve,"_freeHighlight",null),be(Ve,"_freeHighlightClipId","");let Ff=Ve;var ca,ua,es,Os,ii,ha,da,fa,js,tc,pa,ga,Br,Z,hS,dS,fS,pS,pv,gS,gv,mS,vS,yS,wS,AS,yo,mv,vv,yv,xf,Ef,il,wv,bf,Ys,_S,Av,SS,xS,_v,Cf,uu;const lt=class lt extends qe{constructor(t){super({...t,name:"inkEditor"});E(this,Z);E(this,ca,0);E(this,ua,0);E(this,es,null);E(this,Os,new Path2D);E(this,ii,!1);E(this,ha,null);E(this,da,!1);E(this,fa,!1);E(this,js,null);E(this,tc,null);E(this,pa,0);E(this,ga,0);E(this,Br,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){qe.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case Ce.INK_THICKNESS:lt._defaultThickness=i;break;case Ce.INK_COLOR:lt._defaultColor=i;break;case Ce.INK_OPACITY:lt._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case Ce.INK_THICKNESS:x(this,Z,hS).call(this,i);break;case Ce.INK_COLOR:x(this,Z,dS).call(this,i);break;case Ce.INK_OPACITY:x(this,Z,fS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.INK_THICKNESS,lt._defaultThickness],[Ce.INK_COLOR,lt._defaultColor||qe._defaultLineColor],[Ce.INK_OPACITY,Math.round(lt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Ce.INK_THICKNESS,this.thickness||lt._defaultThickness],[Ce.INK_COLOR,this.color||lt._defaultColor||qe._defaultLineColor],[Ce.INK_OPACITY,Math.round(100*(this.opacity??lt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(x(this,Z,xf).call(this),x(this,Z,Ef).call(this)),this.isAttachedToDOM||(this.parent.add(this),x(this,Z,il).call(this)),x(this,Z,uu).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,es)&&(clearTimeout(l(this,es)),A(this,es,null)),(t=l(this,js))==null||t.disconnect(),A(this,js,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,r=this.width*t,a=this.height*i;this.setDimensions(r,a)}enableEditMode(){l(this,ii)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,x(this,Z,mv).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),x(this,Z,vv).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,ii)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),A(this,ii,!0),this.div.classList.add("disabled"),x(this,Z,uu).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,ii)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),x(this,Z,gS).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),x(this,Z,gv).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),x(this,Z,yv).call(this,t)}canvasPointerleave(t){x(this,Z,yv).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,ii)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,a,c,u]=x(this,Z,pS).call(this);if(this.setAt(r,a,0,0),this.setDims(c,u),x(this,Z,xf).call(this),this.width){const[d,p]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*p),this.setAt(t*d,i*p,this.width*d,this.height*p),A(this,fa,!0),x(this,Z,il).call(this),this.setDims(this.width*d,this.height*p),x(this,Z,yo).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return x(this,Z,Ef).call(this),this.div}setDimensions(t,i){const r=Math.round(t),a=Math.round(i);if(l(this,pa)===r&&l(this,ga)===a)return;A(this,pa,r),A(this,ga,a),this.canvas.style.visibility="hidden";const[c,u]=this.parentDimensions;this.width=t/c,this.height=i/u,this.fixAndSetPosition(),l(this,ii)&&x(this,Z,wv).call(this,t,i),x(this,Z,il).call(this),x(this,Z,yo).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,r){var P,k,I;if(t instanceof Xv)return null;const a=await super.deserialize(t,i,r);a.thickness=t.thickness,a.color=pe.makeHexColor(...t.color),a.opacity=t.opacity;const[c,u]=a.pageDimensions,d=a.width*c,p=a.height*u,m=a.parentScale,y=t.thickness/2;A(a,ii,!0),A(a,pa,Math.round(d)),A(a,ga,Math.round(p));const{paths:w,rect:_,rotation:b}=t;for(let{bezier:F}of w){F=x(P=lt,Ys,SS).call(P,F,_,b);const N=[];a.paths.push(N);let B=m*(F[0]-y),H=m*(F[1]-y);for(let W=2,Q=F.length;W<Q;W+=6){const ne=m*(F[W]-y),te=m*(F[W+1]-y),xe=m*(F[W+2]-y),fe=m*(F[W+3]-y),he=m*(F[W+4]-y),we=m*(F[W+5]-y);N.push([[B,H],[ne,te],[xe,fe],[he,we]]),B=he,H=we}const $=x(this,Ys,_S).call(this,N);a.bezierPath2D.push($)}const C=x(k=a,Z,_v).call(k);return A(a,ua,Math.max(qe.MIN_SIZE,C[2]-C[0])),A(a,ca,Math.max(qe.MIN_SIZE,C[3]-C[1])),x(I=a,Z,wv).call(I,d,p),a}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=qe._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Re.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:x(this,Z,xS).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ca=new WeakMap,ua=new WeakMap,es=new WeakMap,Os=new WeakMap,ii=new WeakMap,ha=new WeakMap,da=new WeakMap,fa=new WeakMap,js=new WeakMap,tc=new WeakMap,pa=new WeakMap,ga=new WeakMap,Br=new WeakMap,Z=new WeakSet,hS=function(t){const i=a=>{this.thickness=a,x(this,Z,uu).call(this)},r=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},dS=function(t){const i=a=>{this.color=a,x(this,Z,yo).call(this)},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},fS=function(t){const i=a=>{this.opacity=a,x(this,Z,yo).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},pS=function(){const{parentRotation:t,parentDimensions:[i,r]}=this;switch(t){case 90:return[0,r,r,i];case 180:return[i,r,i,r];case 270:return[i,0,r,i];default:return[0,0,i,r]}},pv=function(){const{ctx:t,color:i,opacity:r,thickness:a,parentScale:c,scaleFactor:u}=this;t.lineWidth=a*c/u,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${Pb(r)}`},gS=function(t,i){this.canvas.addEventListener("contextmenu",ai,{signal:this._uiManager._signal}),x(this,Z,vv).call(this),A(this,ha,new AbortController);const r=this._uiManager.combinedSignal(l(this,ha));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,l(this,fa)||(A(this,fa,!0),x(this,Z,il).call(this),this.thickness||(this.thickness=lt._defaultThickness),this.color||(this.color=lt._defaultColor||qe._defaultLineColor),this.opacity??(this.opacity=lt._defaultOpacity)),this.currentPath.push([t,i]),A(this,da,!1),x(this,Z,pv).call(this),A(this,Br,()=>{x(this,Z,yS).call(this),l(this,Br)&&window.requestAnimationFrame(l(this,Br))}),window.requestAnimationFrame(l(this,Br))},gv=function(t,i){const[r,a]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&i===a)return;const c=this.currentPath;let u=l(this,Os);if(c.push([t,i]),A(this,da,!0),c.length<=2){u.moveTo(...c[0]),u.lineTo(t,i);return}c.length===3&&(A(this,Os,u=new Path2D),u.moveTo(...c[0])),x(this,Z,wS).call(this,u,...c.at(-3),...c.at(-2),t,i)},mS=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,Os).lineTo(...t)},vS=function(t,i){A(this,Br,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),x(this,Z,gv).call(this,t,i),x(this,Z,mS).call(this);let r;if(this.currentPath.length!==1)r=x(this,Z,AS).call(this);else{const p=[t,i];r=[[p,p.slice(),p.slice(),p]]}const a=l(this,Os),c=this.currentPath;this.currentPath=[],A(this,Os,new Path2D);const u=()=>{this.allRawPaths.push(c),this.paths.push(r),this.bezierPath2D.push(a),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(x(this,Z,xf).call(this),x(this,Z,Ef).call(this)),x(this,Z,uu).call(this))};this.addCommands({cmd:u,undo:d,mustExec:!0})},yS=function(){if(!l(this,da))return;A(this,da,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),r=i.map(u=>u[0]),a=i.map(u=>u[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...a)-t,Math.max(...a)+t;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)c.stroke(u);c.stroke(l(this,Os)),c.restore()},wS=function(t,i,r,a,c,u,d){const p=(i+a)/2,m=(r+c)/2,y=(a+u)/2,w=(c+d)/2;t.bezierCurveTo(p+2*(a-p)/3,m+2*(c-m)/3,y+2*(a-y)/3,w+2*(c-w)/3,y,w)},AS=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let r,[a,c]=t[0];for(r=1;r<t.length-2;r++){const[_,b]=t[r],[C,P]=t[r+1],k=(_+C)/2,I=(b+P)/2,F=[a+2*(_-a)/3,c+2*(b-c)/3],N=[k+2*(_-k)/3,I+2*(b-I)/3];i.push([[a,c],F,N,[k,I]]),[a,c]=[k,I]}const[u,d]=t[r],[p,m]=t[r+1],y=[a+2*(u-a)/3,c+2*(d-c)/3],w=[p+2*(u-p)/3,m+2*(d-m)/3];return i.push([[a,c],y,w,[p,m]]),i},yo=function(){if(this.isEmpty()){x(this,Z,bf).call(this);return}x(this,Z,pv).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),x(this,Z,bf).call(this);for(const r of this.bezierPath2D)i.stroke(r)},mv=function(){if(l(this,tc))return;A(this,tc,new AbortController);const t=this._uiManager.combinedSignal(l(this,tc));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},vv=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},yv=function(t){var i;(i=l(this,ha))==null||i.abort(),A(this,ha,null),x(this,Z,mv).call(this),l(this,es)&&clearTimeout(l(this,es)),A(this,es,setTimeout(()=>{A(this,es,null),this.canvas.removeEventListener("contextmenu",ai)},10)),x(this,Z,vS).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},xf=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Ef=function(){A(this,js,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),l(this,js).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,js))==null||t.disconnect(),A(this,js,null)},{once:!0})},il=function(){if(!l(this,fa))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),x(this,Z,bf).call(this)},wv=function(t,i){const r=x(this,Z,Cf).call(this),a=(t-r)/l(this,ua),c=(i-r)/l(this,ca);this.scaleFactor=Math.min(a,c)},bf=function(){const t=x(this,Z,Cf).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Ys=new WeakSet,_S=function(t){const i=new Path2D;for(let r=0,a=t.length;r<a;r++){const[c,u,d,p]=t[r];r===0&&i.moveTo(...c),i.bezierCurveTo(u[0],u[1],d[0],d[1],p[0],p[1])}return i},Av=function(t,i,r){const[a,c,u,d]=i;switch(r){case 0:for(let p=0,m=t.length;p<m;p+=2)t[p]+=a,t[p+1]=d-t[p+1];break;case 90:for(let p=0,m=t.length;p<m;p+=2){const y=t[p];t[p]=t[p+1]+a,t[p+1]=y+c}break;case 180:for(let p=0,m=t.length;p<m;p+=2)t[p]=u-t[p],t[p+1]+=c;break;case 270:for(let p=0,m=t.length;p<m;p+=2){const y=t[p];t[p]=u-t[p+1],t[p+1]=d-y}break;default:throw new Error("Invalid rotation")}return t},SS=function(t,i,r){const[a,c,u,d]=i;switch(r){case 0:for(let p=0,m=t.length;p<m;p+=2)t[p]-=a,t[p+1]=d-t[p+1];break;case 90:for(let p=0,m=t.length;p<m;p+=2){const y=t[p];t[p]=t[p+1]-c,t[p+1]=y-a}break;case 180:for(let p=0,m=t.length;p<m;p+=2)t[p]=u-t[p],t[p+1]-=c;break;case 270:for(let p=0,m=t.length;p<m;p+=2){const y=t[p];t[p]=d-t[p+1],t[p+1]=u-y}break;default:throw new Error("Invalid rotation")}return t},xS=function(t,i,r,a){var m,y;const c=[],u=this.thickness/2,d=t*i+u,p=t*r+u;for(const w of this.paths){const _=[],b=[];for(let C=0,P=w.length;C<P;C++){const[k,I,F,N]=w[C];if(k[0]===N[0]&&k[1]===N[1]&&P===1){const fe=t*k[0]+d,he=t*k[1]+p;_.push(fe,he),b.push(fe,he);break}const B=t*k[0]+d,H=t*k[1]+p,$=t*I[0]+d,W=t*I[1]+p,Q=t*F[0]+d,ne=t*F[1]+p,te=t*N[0]+d,xe=t*N[1]+p;C===0&&(_.push(B,H),b.push(B,H)),_.push($,W,Q,ne,te,xe),b.push($,W),C===P-1&&b.push(te,xe)}c.push({bezier:x(m=lt,Ys,Av).call(m,_,a,this.rotation),points:x(y=lt,Ys,Av).call(y,b,a,this.rotation)})}return c},_v=function(){let t=1/0,i=-1/0,r=1/0,a=-1/0;for(const c of this.paths)for(const[u,d,p,m]of c){const y=pe.bezierBoundingBox(...u,...d,...p,...m);t=Math.min(t,y[0]),r=Math.min(r,y[1]),i=Math.max(i,y[2]),a=Math.max(a,y[3])}return[t,r,i,a]},Cf=function(){return l(this,ii)?Math.ceil(this.thickness*this.parentScale):0},uu=function(t=!1){if(this.isEmpty())return;if(!l(this,ii)){x(this,Z,yo).call(this);return}const i=x(this,Z,_v).call(this),r=x(this,Z,Cf).call(this);A(this,ua,Math.max(qe.MIN_SIZE,i[2]-i[0])),A(this,ca,Math.max(qe.MIN_SIZE,i[3]-i[1]));const a=Math.ceil(r+l(this,ua)*this.scaleFactor),c=Math.ceil(r+l(this,ca)*this.scaleFactor),[u,d]=this.parentDimensions;this.width=a/u,this.height=c/d,this.setAspectRatio(a,c);const p=this.translationX,m=this.translationY;this.translationX=-i[0],this.translationY=-i[1],x(this,Z,il).call(this),x(this,Z,yo).call(this),A(this,pa,a),A(this,ga,c),this.setDims(a,c);const y=t?r/this.scaleFactor/2:0;this.translate(p-this.translationX-y,m-this.translationY-y)},E(lt,Ys),be(lt,"_defaultColor",null),be(lt,"_defaultOpacity",1),be(lt,"_defaultThickness",1),be(lt,"_type","ink"),be(lt,"_editorType",Re.INK);let fv=lt;var ut,Xt,Ur,zs,Vr,nc,ts,Hs,ns,Bn,ic,je,hu,du,kf,xv,ES,Tf,Ev,Pf,bS,CS;const gu=class gu extends qe{constructor(t){super({...t,name:"stampEditor"});E(this,je);E(this,ut,null);E(this,Xt,null);E(this,Ur,null);E(this,zs,null);E(this,Vr,null);E(this,nc,"");E(this,ts,null);E(this,Hs,null);E(this,ns,null);E(this,Bn,!1);E(this,ic,!1);A(this,zs,t.bitmapUrl),A(this,Vr,t.bitmapFile)}static initialize(t,i){qe.initialize(t,i)}static get supportedTypes(){return ze(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return ze(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Re.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:c,height:u}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:a,width:c,height:u,channels:a.length/(c*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const p=d.output;return await this.setGuessedAltText(p),i&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var t,i;l(this,Xt)&&(A(this,ut,null),this._uiManager.imageManager.deleteId(l(this,Xt)),(t=l(this,ts))==null||t.remove(),A(this,ts,null),(i=l(this,Hs))==null||i.disconnect(),A(this,Hs,null),l(this,ns)&&(clearTimeout(l(this,ns)),A(this,ns,null))),super.remove()}rebuild(){if(!this.parent){l(this,Xt)&&x(this,je,kf).call(this);return}super.rebuild(),this.div!==null&&(l(this,Xt)&&l(this,ts)===null&&x(this,je,kf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,Ur)||l(this,ut)||l(this,zs)||l(this,Vr)||l(this,Xt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,ut)?x(this,je,xv).call(this):x(this,je,kf).call(this),this.width&&!this.annotationElementId){const[r,a]=this.parentDimensions;this.setAt(t*r,i*a,this.width*r,this.height*a)}return this.div}copyCanvas(t,i,r=!1){var _;t||(t=224);const{width:a,height:c}=l(this,ut),u=new ym;let d=l(this,ut),p=a,m=c,y=null;if(i){if(a>i||c>i){const W=Math.min(i/a,i/c);p=Math.floor(a*W),m=Math.floor(c*W)}y=document.createElement("canvas");const b=y.width=Math.ceil(p*u.sx),C=y.height=Math.ceil(m*u.sy);l(this,Bn)||(d=x(this,je,Tf).call(this,b,C));const P=y.getContext("2d");P.filter=this._uiManager.hcmFilter;let k="white",I="#cfcfd8";this._uiManager.hcmFilter!=="none"?I="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",I="#42414d");const F=15,N=F*u.sx,B=F*u.sy,H=new OffscreenCanvas(N*2,B*2),$=H.getContext("2d");$.fillStyle=k,$.fillRect(0,0,N*2,B*2),$.fillStyle=I,$.fillRect(0,0,N,B),$.fillRect(N,B,N,B),P.fillStyle=P.createPattern(H,"repeat"),P.fillRect(0,0,b,C),P.drawImage(d,0,0,d.width,d.height,0,0,b,C)}let w=null;if(r){let b,C;if(u.symmetric&&d.width<t&&d.height<t)b=d.width,C=d.height;else if(d=l(this,ut),a>t||c>t){const I=Math.min(t/a,t/c);b=Math.floor(a*I),C=Math.floor(c*I),l(this,Bn)||(d=x(this,je,Tf).call(this,b,C))}const k=new OffscreenCanvas(b,C).getContext("2d",{willReadFrequently:!0});k.drawImage(d,0,0,d.width,d.height,0,0,b,C),w={width:b,height:C,data:k.getImageData(0,0,b,C).data}}return{canvas:y,width:p,height:m,imageData:w}}getImageForAltText(){return l(this,ts)}static async deserialize(t,i,r){var C;let a=null;if(t instanceof D_){const{data:{rect:P,rotation:k,id:I,structParent:F,popupRef:N},container:B,parent:{page:{pageNumber:H}}}=t,$=B.querySelector("canvas"),W=r.imageManager.getFromCanvas(B.id,$);$.remove();const Q=((C=await i._structTree.getAriaAttributes(`${Dv}${I}`))==null?void 0:C.get("aria-label"))||"";a=t={annotationType:Re.STAMP,bitmapId:W.id,bitmap:W.bitmap,pageIndex:H-1,rect:P.slice(0),rotation:k,id:I,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:F,popupRef:N}}const c=await super.deserialize(t,i,r),{rect:u,bitmap:d,bitmapUrl:p,bitmapId:m,isSvg:y,accessibilityData:w}=t;m&&r.imageManager.isValidId(m)?(A(c,Xt,m),d&&A(c,ut,d)):A(c,zs,p),A(c,Bn,y);const[_,b]=c.pageDimensions;return c.width=(u[2]-u[0])/_,c.height=(u[3]-u[1])/b,c.annotationElementId=t.id||null,w&&(c.altTextData=w),c._initialData=a,A(c,ic,!!a),c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Re.STAMP,bitmapId:l(this,Xt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Bn),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=x(this,je,Pf).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:a,altText:c}=this.serializeAltText(!1);if(!a&&c&&(r.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const d=x(this,je,CS).call(this,r);if(d.isSame)return null;d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const u=l(this,Bn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(l(this,Xt)))i.stamps.set(l(this,Xt),{area:u,serialized:r}),r.bitmap=x(this,je,Pf).call(this,!1);else if(l(this,Bn)){const d=i.stamps.get(l(this,Xt));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=x(this,je,Pf).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};ut=new WeakMap,Xt=new WeakMap,Ur=new WeakMap,zs=new WeakMap,Vr=new WeakMap,nc=new WeakMap,ts=new WeakMap,Hs=new WeakMap,ns=new WeakMap,Bn=new WeakMap,ic=new WeakMap,je=new WeakSet,hu=function(t,i=!1){if(!t){this.remove();return}A(this,ut,t.bitmap),i||(A(this,Xt,t.id),A(this,Bn,t.isSvg)),t.file&&A(this,nc,t.file.name),x(this,je,xv).call(this)},du=function(){if(A(this,Ur,null),this._uiManager.enableWaiting(!1),!!l(this,ts)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ut)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ut)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},kf=function(){if(l(this,Xt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Xt)).then(r=>x(this,je,hu).call(this,r,!0)).finally(()=>x(this,je,du).call(this));return}if(l(this,zs)){const r=l(this,zs);A(this,zs,null),this._uiManager.enableWaiting(!0),A(this,Ur,this._uiManager.imageManager.getFromUrl(r).then(a=>x(this,je,hu).call(this,a)).finally(()=>x(this,je,du).call(this)));return}if(l(this,Vr)){const r=l(this,Vr);A(this,Vr,null),this._uiManager.enableWaiting(!0),A(this,Ur,this._uiManager.imageManager.getFromFile(r).then(a=>x(this,je,hu).call(this,a)).finally(()=>x(this,je,du).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=gu.supportedTypesStr;const i=this._uiManager._signal;A(this,Ur,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(this,je,hu).call(this,a)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>x(this,je,du).call(this))),t.click()},xv=function(){const{div:t}=this;let{width:i,height:r}=l(this,ut);const[a,c]=this.pageDimensions,u=.75;if(this.width)i=this.width*a,r=this.height*c;else if(i>u*a||r>u*c){const y=Math.min(u*a/i,u*c/r);i*=y,r*=y}const[d,p]=this.parentDimensions;this.setDims(i*d/a,r*p/c),this._uiManager.enableWaiting(!1);const m=A(this,ts,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),x(this,je,Ev).call(this,i,r),x(this,je,bS).call(this),l(this,ic)||(this.parent.addUndoableEditor(this),A(this,ic,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,nc)&&m.setAttribute("aria-label",l(this,nc))},ES=function(t,i){var u;const[r,a]=this.parentDimensions;this.width=t/r,this.height=i/a,(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,ns)!==null&&clearTimeout(l(this,ns)),A(this,ns,setTimeout(()=>{A(this,ns,null),x(this,je,Ev).call(this,t,i)},200))},Tf=function(t,i){const{width:r,height:a}=l(this,ut);let c=r,u=a,d=l(this,ut);for(;c>2*t||u>2*i;){const p=c,m=u;c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*i&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(c,u);y.getContext("2d").drawImage(d,0,0,p,m,0,0,c,u),d=y.transferToImageBitmap()}return d},Ev=function(t,i){const r=new ym,a=Math.ceil(t*r.sx),c=Math.ceil(i*r.sy),u=l(this,ts);if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;const d=l(this,Bn)?l(this,ut):x(this,je,Tf).call(this,a,c),p=u.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,a,c)},Pf=function(t){if(t){if(l(this,Bn)){const a=this._uiManager.imageManager.getSvgUrl(l(this,Xt));if(a)return a}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,ut),i.getContext("2d").drawImage(l(this,ut),0,0),i.toDataURL()}if(l(this,Bn)){const[i,r]=this.pageDimensions,a=Math.round(this.width*i*Xr.PDF_TO_CSS_UNITS),c=Math.round(this.height*r*Xr.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(a,c);return u.getContext("2d").drawImage(l(this,ut),0,0,l(this,ut).width,l(this,ut).height,0,0,a,c),u.transferToImageBitmap()}return structuredClone(l(this,ut))},bS=function(){this._uiManager._signal&&(A(this,Hs,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&x(this,je,ES).call(this,i.width,i.height)})),l(this,Hs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Hs))==null||t.disconnect(),A(this,Hs,null)},{once:!0}))},CS=function(t){var p;const{rect:i,pageIndex:r,accessibilityData:{altText:a}}=this._initialData,c=t.rect.every((m,y)=>Math.abs(m-i[y])<1),u=t.pageIndex===r,d=(((p=t.accessibilityData)==null?void 0:p.alt)||"")===a;return{isSame:c&&u&&d,isSameAltText:d}},be(gu,"_type","stamp"),be(gu,"_editorType",Re.STAMP);let Sv=gu;var ma,sc,is,$r,Bs,Un,Wr,rc,oc,rn,Us,ye,Gr,qt,kS,Cv,kv,Tv,Rf;const mi=class mi{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:r,accessibilityManager:a,annotationLayer:c,drawLayer:u,textLayer:d,viewport:p,l10n:m}){E(this,qt);E(this,ma);E(this,sc,!1);E(this,is,null);E(this,$r,null);E(this,Bs,null);E(this,Un,new Map);E(this,Wr,!1);E(this,rc,!1);E(this,oc,!1);E(this,rn,null);E(this,Us,null);E(this,ye);const y=[...l(mi,Gr).values()];if(!mi._initialized){mi._initialized=!0;for(const w of y)w.initialize(m,e)}e.registerEditorTypes(y),A(this,ye,e),this.pageIndex=t,this.div=i,A(this,ma,a),A(this,is,c),this.viewport=p,A(this,rn,d),this.drawLayer=u,this._structTree=r,l(this,ye).addLayer(this)}get isEmpty(){return l(this,Un).size===0}get isInvisible(){return this.isEmpty&&l(this,ye).getMode()===Re.NONE}updateToolbar(e){l(this,ye).updateToolbar(e)}updateMode(e=l(this,ye).getMode()){switch(x(this,qt,Rf).call(this),e){case Re.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Re.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Re.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l(mi,Gr).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,rn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,ye).getMode()!==Re.INK)return;if(!e){for(const i of l(this,Un).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,ye).setEditingState(e)}addCommands(e){l(this,ye).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,is))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,Un).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,ye).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,is))return;const t=l(this,is).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,ye).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;A(this,oc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const a of l(this,Un).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){e.set(a.annotationElementId,a);continue}else t.set(a.annotationElementId,a);(r=this.getEditableAnnotation(a.annotationElementId))==null||r.show(),a.remove()}if(l(this,is)){const a=l(this,is).getEditableAnnotations();for(const c of a){const{id:u}=c.data;if(l(this,ye).isDeletedAnnotationElement(u))continue;let d=t.get(u);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=e.get(u),d&&(l(this,ye).addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}x(this,qt,Rf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of l(mi,Gr).values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,oc,!1)}getEditableAnnotation(e){var t;return((t=l(this,is))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,ye).getActive()!==e&&l(this,ye).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,rn))!=null&&e.div&&!l(this,Us)){A(this,Us,new AbortController);const t=l(this,ye).combinedSignal(l(this,Us));l(this,rn).div.addEventListener("pointerdown",x(this,qt,kS).bind(this),{signal:t}),l(this,rn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,rn))!=null&&e.div&&l(this,Us)&&(l(this,Us).abort(),A(this,Us,null),l(this,rn).div.classList.remove("highlighting"))}enableClick(){if(l(this,$r))return;A(this,$r,new AbortController);const e=l(this,ye).combinedSignal(l(this,$r));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,$r))==null||e.abort(),A(this,$r,null)}attach(e){l(this,Un).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,ye).isDeletedAnnotationElement(t)&&l(this,ye).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Un).delete(e.id),(t=l(this,ma))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,oc)&&e.annotationElementId&&l(this,ye).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,ye).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,rc)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,ye).addDeletedAnnotationElement(e.annotationElementId),qe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,ye).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,ye).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Bs)&&(e._focusEventsAllowed=!1,A(this,Bs,setTimeout(()=>{A(this,Bs,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,ye)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,ma))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,ye).getId()}combinedSignal(e){return l(this,ye).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,qt,Cv))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,ye).updateToolbar(e),l(this,ye).updateMode(e);const{offsetX:i,offsetY:r}=x(this,qt,Tv).call(this),a=this.getNextId(),c=x(this,qt,kv).call(this,{parent:this,id:a,x:i,y:r,uiManager:l(this,ye),isCentered:!0,...t});c&&this.add(c)}async deserialize(e){var t;return await((t=l(mi,Gr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,ye)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),a=x(this,qt,kv).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:l(this,ye),isCentered:t,...i});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(x(this,qt,Tv).call(this),!0)}setSelected(e){l(this,ye).setSelected(e)}toggleSelected(e){l(this,ye).toggleSelected(e)}unselect(e){l(this,ye).unselect(e)}pointerup(e){const{isMac:t}=pn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,Wr)){if(A(this,Wr,!1),!l(this,sc)){A(this,sc,!0);return}if(l(this,ye).getMode()===Re.STAMP){l(this,ye).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,ye).getMode()===Re.HIGHLIGHT&&this.enableTextSelection(),l(this,Wr)){A(this,Wr,!1);return}const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;A(this,Wr,!0);const i=l(this,ye).getActive();A(this,sc,!i||i.isEmpty())}findNewParent(e,t,i){const r=l(this,ye).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=l(this,ye).getActive())==null?void 0:e.parent)===this&&(l(this,ye).commitOrRemove(),l(this,ye).setActiveEditor(null)),l(this,Bs)&&(clearTimeout(l(this,Bs)),A(this,Bs,null));for(const i of l(this,Un).values())(t=l(this,ma))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,Un).clear(),l(this,ye).removeLayer(this)}render({viewport:e}){this.viewport=e,va(this.div,e);for(const t of l(this,ye).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,ye).commitOrRemove(),x(this,qt,Rf).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,va(this.div,{rotation:i}),t!==i)for(const r of l(this,Un).values())r.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,ye).viewParameters.realScale}};ma=new WeakMap,sc=new WeakMap,is=new WeakMap,$r=new WeakMap,Bs=new WeakMap,Un=new WeakMap,Wr=new WeakMap,rc=new WeakMap,oc=new WeakMap,rn=new WeakMap,Us=new WeakMap,ye=new WeakMap,Gr=new WeakMap,qt=new WeakSet,kS=function(e){l(this,ye).unselectAll();const{target:t}=e;if(t===l(this,rn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,rn).div.contains(t)){const{isMac:i}=pn.platform;if(e.button!==0||e.ctrlKey&&i)return;l(this,ye).showAllEditors("highlight",!0,!0),l(this,rn).div.classList.add("free"),this.toggleDrawing(),Ff.startHighlighting(this,l(this,ye).direction==="ltr",{target:l(this,rn).div,x:e.x,y:e.y}),l(this,rn).div.addEventListener("pointerup",()=>{l(this,rn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ye)._signal}),e.preventDefault()}},Cv=function(){return l(mi,Gr).get(l(this,ye).getMode())},kv=function(e){const t=l(this,qt,Cv);return t?new t.prototype.constructor(e):null},Tv=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),a=Math.max(0,e),c=Math.max(0,t),u=Math.min(window.innerWidth,e+i),d=Math.min(window.innerHeight,t+r),p=(a+u)/2-e,m=(c+d)/2-t,[y,w]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:y,offsetY:w}},Rf=function(){A(this,rc,!0);for(const e of l(this,Un).values())e.isEmpty()&&e.remove();A(this,rc,!1)},be(mi,"_initialized",!1),E(mi,Gr,new Map([sv,fv,Sv,Ff].map(e=>[e._editorType,e])));let bv=mi;var ss,Rh,St,Vs,Lh,Rv,Sa,Lv,TS;const $t=class $t{constructor({pageIndex:e}){E(this,Sa);E(this,ss,null);E(this,Rh,0);E(this,St,new Map);E(this,Vs,new Map);this.pageIndex=e}setParent(e){if(!l(this,ss)){A(this,ss,e);return}if(l(this,ss)!==e){if(l(this,St).size>0)for(const t of l(this,St).values())t.remove(),e.append(t);A(this,ss,e)}}static get _svgFactory(){return ze(this,"_svgFactory",new Gv)}draw(e,t,i,r=!1){const a=un(this,Rh)._++,c=x(this,Sa,Lv).call(this,e.box);c.classList.add(...e.classNamesForDrawing);const u=$t._svgFactory.createElement("defs");c.append(u);const d=$t._svgFactory.createElement("path");u.append(d);const p=`path_p${this.pageIndex}_${a}`;d.setAttribute("id",p),d.setAttribute("d",e.toSVGPath()),r&&l(this,Vs).set(a,d);const m=x(this,Sa,TS).call(this,u,p),y=$t._svgFactory.createElement("use");return c.append(y),c.setAttribute("fill",t),c.setAttribute("fill-opacity",i),y.setAttribute("href",`#${p}`),l(this,St).set(a,c),{id:a,clipPathId:`url(#${m})`}}drawOutline(e){const t=un(this,Rh)._++,i=x(this,Sa,Lv).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const r=$t._svgFactory.createElement("defs");i.append(r);const a=$t._svgFactory.createElement("path");r.append(a);const c=`path_p${this.pageIndex}_${t}`;a.setAttribute("id",c),a.setAttribute("d",e.toSVGPath()),a.setAttribute("vector-effect","non-scaling-stroke");let u;if(e.mustRemoveSelfIntersections){const m=$t._svgFactory.createElement("mask");r.append(m),u=`mask_p${this.pageIndex}_${t}`,m.setAttribute("id",u),m.setAttribute("maskUnits","objectBoundingBox");const y=$t._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const w=$t._svgFactory.createElement("use");m.append(w),w.setAttribute("href",`#${c}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const d=$t._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${c}`),u&&d.setAttribute("mask",`url(#${u})`);const p=d.cloneNode();return i.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),l(this,St).set(t,i),t}finalizeLine(e,t){const i=l(this,Vs).get(e);l(this,Vs).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,St).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,Vs).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;x(i=$t,Lh,Rv).call(i,l(this,St).get(e),t)}show(e,t){l(this,St).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,St).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,St).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,St).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,St).get(e).classList.add(t)}removeClass(e,t){l(this,St).get(e).classList.remove(t)}getSVGRoot(e){return l(this,St).get(e)}remove(e){l(this,Vs).delete(e),l(this,ss)!==null&&(l(this,St).get(e).remove(),l(this,St).delete(e))}destroy(){A(this,ss,null);for(const e of l(this,St).values())e.remove();l(this,St).clear(),l(this,Vs).clear()}};ss=new WeakMap,Rh=new WeakMap,St=new WeakMap,Vs=new WeakMap,Lh=new WeakSet,Rv=function(e,{x:t=0,y:i=0,width:r=1,height:a=1}={}){const{style:c}=e;c.top=`${100*i}%`,c.left=`${100*t}%`,c.width=`${100*r}%`,c.height=`${100*a}%`},Sa=new WeakSet,Lv=function(e){var i;const t=$t._svgFactory.create(1,1,!0);return l(this,ss).append(t),t.setAttribute("aria-hidden",!0),x(i=$t,Lh,Rv).call(i,t,e),t},TS=function(e,t){const i=$t._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const a=$t._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),r},E($t,Lh);let Pv=$t;var lC=Te.AbortException,cC=Te.AnnotationEditorLayer,uC=Te.AnnotationEditorParamsType,hC=Te.AnnotationEditorType,dC=Te.AnnotationEditorUIManager,PS=Te.AnnotationLayer,RS=Te.AnnotationMode,fC=Te.ColorPicker,pC=Te.DOMSVGFactory,gC=Te.DrawLayer,mC=Te.FeatureTest,qv=Te.GlobalWorkerOptions,vC=Te.ImageKind,yC=Te.InvalidPDFException,wC=Te.MissingPDFException,AC=Te.OPS,_C=Te.OutputScale,SC=Te.PDFDataRangeTransport,xC=Te.PDFDateString,EC=Te.PDFWorker,bC=Te.PasswordResponses,CC=Te.PermissionFlag,kC=Te.PixelsPerInch,TC=Te.RenderingCancelledException,LS=Te.TextLayer,PC=Te.UnexpectedResponseException,RC=Te.Util,LC=Te.VerbosityLevel,MC=Te.XfaLayer,IC=Te.build,NC=Te.createValidAbsoluteUrl,FC=Te.fetchData,MS=Te.getDocument,DC=Te.getFilenameFromUrl,OC=Te.getPdfFilenameFromUrl,jC=Te.getXfaPageViewport,zC=Te.isDataScheme,HC=Te.isPdfFile,BC=Te.noContextMenu,UC=Te.normalizeUnicode,VC=Te.setLayerDimensions,$C=Te.shadow,IS=Te.version;const WC=Object.freeze(Object.defineProperty({__proto__:null,AbortException:lC,AnnotationEditorLayer:cC,AnnotationEditorParamsType:uC,AnnotationEditorType:hC,AnnotationEditorUIManager:dC,AnnotationLayer:PS,AnnotationMode:RS,ColorPicker:fC,DOMSVGFactory:pC,DrawLayer:gC,FeatureTest:mC,GlobalWorkerOptions:qv,ImageKind:vC,InvalidPDFException:yC,MissingPDFException:wC,OPS:AC,OutputScale:_C,PDFDataRangeTransport:SC,PDFDateString:xC,PDFWorker:EC,PasswordResponses:bC,PermissionFlag:CC,PixelsPerInch:kC,RenderingCancelledException:TC,TextLayer:LS,UnexpectedResponseException:PC,Util:RC,VerbosityLevel:LC,XfaLayer:MC,build:IC,createValidAbsoluteUrl:NC,fetchData:FC,getDocument:MS,getFilenameFromUrl:DC,getPdfFilenameFromUrl:OC,getXfaPageViewport:jC,isDataScheme:zC,isPdfFile:HC,noContextMenu:BC,normalizeUnicode:UC,setLayerDimensions:VC,shadow:$C,version:IS},Symbol.toStringTag,{value:"Module"}));var Dt=function(f,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return f.concat(a||Array.prototype.slice.call(e))},GC=["onCopy","onCut","onPaste"],XC=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],qC=["onFocus","onBlur"],YC=["onInput","onInvalid","onReset","onSubmit"],KC=["onLoad","onError"],QC=["onKeyDown","onKeyPress","onKeyUp"],JC=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],ZC=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],ek=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],tk=["onSelect"],nk=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],ik=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],sk=["onScroll"],rk=["onWheel"],ok=["onAnimationStart","onAnimationEnd","onAnimationIteration"],ak=["onTransitionEnd"],lk=["onToggle"],ck=["onChange"],uk=Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt(Dt([],GC,!0),XC,!0),qC,!0),YC,!0),KC,!0),QC,!0),JC,!0),ZC,!0),ek,!0),tk,!0),nk,!0),ik,!0),sk,!0),rk,!0),ok,!0),ak,!0),ck,!0),lk,!0);function NS(f,e){var t={};return uk.forEach(function(i){var r=f[i];r&&(e?t[i]=function(a){return r(a,e(i))}:t[i]=r)}),t}function Fh(f){var e=!1,t=new Promise(function(i,r){f.then(function(a){return!e&&i(a)}).catch(function(a){return!e&&r(a)})});return{promise:t,cancel:function(){e=!0}}}function FS(f){var e,t,i="";if(typeof f=="string"||typeof f=="number")i+=f;else if(typeof f=="object")if(Array.isArray(f)){var r=f.length;for(e=0;e<r;e++)f[e]&&(t=FS(f[e]))&&(i&&(i+=" "),i+=t)}else for(t in f)f[t]&&(i&&(i+=" "),i+=t);return i}function lp(){for(var f,e,t=0,i="",r=arguments.length;t<r;t++)(f=arguments[t])&&(e=FS(f))&&(i&&(i+=" "),i+=e);return i}var hk="Invariant failed";function Qe(f,e){if(!f)throw new Error(hk)}var dm,fA;function dk(){if(fA)return dm;fA=1;var f=function(){};return dm=f,dm}var fk=dk();const on=$E(fk);var pA=Object.prototype.hasOwnProperty;function gA(f,e,t){for(t of f.keys())if(al(t,e))return t}function al(f,e){var t,i,r;if(f===e)return!0;if(f&&e&&(t=f.constructor)===e.constructor){if(t===Date)return f.getTime()===e.getTime();if(t===RegExp)return f.toString()===e.toString();if(t===Array){if((i=f.length)===e.length)for(;i--&&al(f[i],e[i]););return i===-1}if(t===Set){if(f.size!==e.size)return!1;for(i of f)if(r=i,r&&typeof r=="object"&&(r=gA(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(f.size!==e.size)return!1;for(i of f)if(r=i[0],r&&typeof r=="object"&&(r=gA(e,r),!r)||!al(i[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)f=new Uint8Array(f),e=new Uint8Array(e);else if(t===DataView){if((i=f.byteLength)===e.byteLength)for(;i--&&f.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(f)){if((i=f.byteLength)===e.byteLength)for(;i--&&f[i]===e[i];);return i===-1}if(!t||typeof f=="object"){i=0;for(t in f)if(pA.call(f,t)&&++i&&!pA.call(e,t)||!(t in e)||!al(f[t],e[t]))return!1;return Object.keys(e).length===i}}return f!==f&&e!==e}const DS=re.createContext(null);function ll({children:f,type:e}){return z.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:f})}const pk="noopener noreferrer nofollow";class gk{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Qe(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Qe(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Qe(this.pdfDocument),Qe(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Qe(Array.isArray(t));const i=t[0];new Promise(r=>{Qe(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(a=>{r(a)}).catch(()=>{Qe(!1)}):typeof i=="number"?r(i):Qe(!1)}).then(r=>{const a=r+1;Qe(this.pdfViewer),Qe(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:a})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Qe(this.pdfViewer),Qe(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,i){e.href=t,e.rel=this.externalLinkRel||pk,e.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const mA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},cp=typeof window<"u",OS=cp&&window.location.protocol==="file:";function mk(f){return typeof f<"u"}function po(f){return mk(f)&&f!==null}function vk(f){return typeof f=="string"}function yk(f){return f instanceof ArrayBuffer}function wk(f){return Qe(cp),f instanceof Blob}function Mv(f){return vk(f)&&/^data:/.test(f)}function vA(f){Qe(Mv(f));const[e="",t=""]=f.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function Ak(){return cp&&window.devicePixelRatio||1}const jS="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function yA(){on(!OS,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${jS}`)}function _k(){on(!OS,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${jS}`)}function Aa(f){f!=null&&f.cancel&&f.cancel()}function Iv(f,e){return Object.defineProperty(f,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(f,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(f,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(f,"originalHeight",{get(){return this.view[3]},configurable:!0}),f}function Sk(f){return f.name==="RenderingCancelledException"}function xk(f){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return t(new Error("Error while reading a file."));e(i.result)},i.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:a}=r.target;if(!a)return t(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},i.readAsArrayBuffer(f)})}function Ek(f,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return f}}function ac(){return re.useReducer(Ek,{value:void 0,error:void 0})}var bk=function(f,e,t,i){function r(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function u(m){try{p(i.next(m))}catch(y){c(y)}}function d(m){try{p(i.throw(m))}catch(y){c(y)}}function p(m){m.done?a(m.value):r(m.value).then(u,d)}p((i=i.apply(f,e||[])).next())})},wA=function(f,e){var t={};for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&e.indexOf(i)<0&&(t[i]=f[i]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(f);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(f,i[r])&&(t[i[r]]=f[i[r]]);return t};const{PDFDataRangeTransport:Ck}=WC,kk=(f,e)=>{switch(e){case mA.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");f(t);break}case mA.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");f(t);break}}};function AA(f){return typeof f=="object"&&f!==null&&("data"in f||"range"in f||"url"in f)}const Tk=re.forwardRef(function(e,t){var{children:i,className:r,error:a="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:u,file:d,inputRef:p,imageResourcesPath:m,loading:y="Loading PDF",noData:w="No PDF file specified.",onItemClick:_,onLoadError:b,onLoadProgress:C,onLoadSuccess:P,onPassword:k=kk,onSourceError:I,onSourceSuccess:F,options:N,renderMode:B,rotate:H}=e,$=wA(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[W,Q]=ac(),{value:ne,error:te}=W,[xe,fe]=ac(),{value:he,error:we}=xe,ge=re.useRef(new gk),K=re.useRef([]),U=re.useRef(void 0),oe=re.useRef(void 0);d&&d!==U.current&&AA(d)&&(on(!al(d,U.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),U.current=d),N&&N!==oe.current&&(on(!al(N,oe.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),oe.current=N);const J=re.useRef({scrollPageIntoView:Ue=>{const{dest:it,pageNumber:Et,pageIndex:gt=Et-1}=Ue;if(_){_({dest:it,pageIndex:gt,pageNumber:Et});return}const Ii=K.current[gt];if(Ii){Ii.scrollIntoView();return}on(!1,`An internal link leading to page ${Et} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});re.useImperativeHandle(t,()=>({linkService:ge,pages:K,viewer:J}),[]);function M(){F&&F()}function V(){te&&(on(!1,te.toString()),I&&I(te))}function le(){Q({type:"RESET"})}re.useEffect(le,[d,Q]);const Ae=re.useCallback(()=>bk(this,void 0,void 0,function*(){if(!d)return null;if(typeof d=="string")return Mv(d)?{data:vA(d)}:(yA(),{url:d});if(d instanceof Ck)return{range:d};if(yk(d))return{data:d};if(cp&&wk(d))return{data:yield xk(d)};if(Qe(typeof d=="object"),Qe(AA(d)),"url"in d&&typeof d.url=="string"){if(Mv(d.url)){const{url:Ue}=d,it=wA(d,["url"]),Et=vA(Ue);return Object.assign({data:Et},it)}yA()}return d}),[d]);re.useEffect(()=>{const Ue=Fh(Ae());return Ue.promise.then(it=>{Q({type:"RESOLVE",value:it})}).catch(it=>{Q({type:"REJECT",error:it})}),()=>{Aa(Ue)}},[Ae,Q]),re.useEffect(()=>{if(!(typeof ne>"u")){if(ne===!1){V();return}M()}},[ne]);function ke(){he&&(P&&P(he),K.current=new Array(he.numPages),ge.current.setDocument(he))}function ve(){we&&(on(!1,we.toString()),b&&b(we))}re.useEffect(function(){fe({type:"RESET"})},[fe,ne]),re.useEffect(function(){if(!ne)return;const it=N?Object.assign(Object.assign({},ne),N):ne,Et=MS(it);C&&(Et.onProgress=C),k&&(Et.onPassword=k);const gt=Et,Ii=gt.promise.then(Qs=>{fe({type:"RESOLVE",value:Qs})}).catch(Qs=>{gt.destroyed||fe({type:"REJECT",error:Qs})});return()=>{Ii.finally(()=>gt.destroy())}},[N,fe,ne]),re.useEffect(()=>{if(!(typeof he>"u")){if(he===!1){ve();return}ke()}},[he]),re.useEffect(function(){ge.current.setViewer(J.current),ge.current.setExternalLinkRel(c),ge.current.setExternalLinkTarget(u)},[c,u]);const me=re.useCallback((Ue,it)=>{K.current[Ue]=it},[]),Le=re.useCallback(Ue=>{delete K.current[Ue]},[]),Oe=re.useMemo(()=>({imageResourcesPath:m,linkService:ge.current,onItemClick:_,pdf:he,registerPage:me,renderMode:B,rotate:H,unregisterPage:Le}),[m,_,he,me,B,H,Le]),Ne=re.useMemo(()=>NS($,()=>he),[$,he]);function Mi(){return z.jsx(DS.Provider,{value:Oe,children:i})}function Ks(){return d?he==null?z.jsx(ll,{type:"loading",children:typeof y=="function"?y():y}):he===!1?z.jsx(ll,{type:"error",children:typeof a=="function"?a():a}):Mi():z.jsx(ll,{type:"no-data",children:typeof w=="function"?w():w})}return z.jsx("div",Object.assign({className:lp("react-pdf__Document",r),ref:p,style:{"--scale-factor":"1"}},Ne,{children:Ks()}))});function zS(){return re.useContext(DS)}function HS(){for(var f=[],e=0;e<arguments.length;e++)f[e]=arguments[e];var t=f.filter(Boolean);if(t.length<=1){var i=t[0];return i||null}return function(a){t.forEach(function(c){typeof c=="function"?c(a):c&&(c.current=a)})}}const BS=re.createContext(null),US={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Pk=/^H(\d+)$/;function Rk(f){return f in US}function up(f){return"children"in f}function VS(f){return up(f)?f.children.length===1&&0 in f.children&&"id"in f.children[0]:!1}function Lk(f){const e={};if(up(f)){const{role:t}=f,i=t.match(Pk);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(Rk(t)){const r=US[t];r&&(e.role=r)}}return e}function $S(f){const e={};if(up(f)){if(f.alt!==void 0&&(e["aria-label"]=f.alt),f.lang!==void 0&&(e.lang=f.lang),VS(f)){const[t]=f.children;if(t){const i=$S(t);return Object.assign(Object.assign({},e),i)}}}else"id"in f&&(e["aria-owns"]=f.id);return e}function Mk(f){return f?Object.assign(Object.assign({},Lk(f)),$S(f)):null}function WS({className:f,node:e}){const t=re.useMemo(()=>Mk(e),[e]),i=re.useMemo(()=>!up(e)||VS(e)?null:e.children.map((r,a)=>z.jsx(WS,{node:r},a)),[e]);return z.jsx("span",Object.assign({className:f},t,{children:i}))}function hp(){return re.useContext(BS)}function Ik(){const f=hp();Qe(f);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=f,[i,r]=ac(),{value:a,error:c}=i,{customTextRenderer:u,page:d}=f;function p(){a&&t&&t(a)}function m(){c&&(on(!1,c.toString()),e&&e(c))}return re.useEffect(function(){r({type:"RESET"})},[r,d]),re.useEffect(function(){if(u||!d)return;const w=Fh(d.getStructTree()),_=w;return w.promise.then(b=>{r({type:"RESOLVE",value:b})}).catch(b=>{r({type:"REJECT",error:b})}),()=>Aa(_)},[u,d,r]),re.useEffect(()=>{if(a!==void 0){if(a===!1){m();return}p()}},[a]),a?z.jsx(WS,{className:"react-pdf__Page__structTree structTree",node:a}):null}const _A=RS;function Nk(f){const e=hp();Qe(e);const t=Object.assign(Object.assign({},e),f),{_className:i,canvasBackground:r,devicePixelRatio:a=Ak(),onRenderError:c,onRenderSuccess:u,page:d,renderForms:p,renderTextLayer:m,rotate:y,scale:w}=t,{canvasRef:_}=f;Qe(d);const b=re.useRef(null);function C(){d&&u&&u(Iv(d,w))}function P(N){Sk(N)||(on(!1,N.toString()),c&&c(N))}const k=re.useMemo(()=>d.getViewport({scale:w*a,rotation:y}),[a,d,y,w]),I=re.useMemo(()=>d.getViewport({scale:w,rotation:y}),[d,y,w]);re.useEffect(function(){if(!d)return;d.cleanup();const{current:B}=b;if(!B)return;B.width=k.width,B.height=k.height,B.style.width=`${Math.floor(I.width)}px`,B.style.height=`${Math.floor(I.height)}px`,B.style.visibility="hidden";const H={annotationMode:p?_A.ENABLE_FORMS:_A.ENABLE,canvasContext:B.getContext("2d",{alpha:!1}),viewport:k};r&&(H.background=r);const $=d.render(H),W=$;return $.promise.then(()=>{B.style.visibility="",C()}).catch(P),()=>Aa(W)},[r,d,p,k,I]);const F=re.useCallback(()=>{const{current:N}=b;N&&(N.width=0,N.height=0)},[]);return re.useEffect(()=>F,[F]),z.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:HS(_,b),style:{display:"block",userSelect:"none"},children:m?z.jsx(Ik,{}):null})}function Fk(f){return"str"in f}function Dk(){const f=hp();Qe(f);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:i,onRenderTextLayerError:r,onRenderTextLayerSuccess:a,page:c,pageIndex:u,pageNumber:d,rotate:p,scale:m}=f;Qe(c);const[y,w]=ac(),{value:_,error:b}=y,C=re.useRef(null);on(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function P(){_&&i&&i(_)}function k(){b&&(on(!1,b.toString()),t&&t(b))}re.useEffect(function(){w({type:"RESET"})},[c,w]),re.useEffect(function(){if(!c)return;const W=Fh(c.getTextContent()),Q=W;return W.promise.then(ne=>{w({type:"RESOLVE",value:ne})}).catch(ne=>{w({type:"REJECT",error:ne})}),()=>Aa(Q)},[c,w]),re.useEffect(()=>{if(_!==void 0){if(_===!1){k();return}P()}},[_]);const I=re.useCallback(()=>{a&&a()},[a]),F=re.useCallback($=>{on(!1,$.toString()),r&&r($)},[r]);function N(){const $=C.current;$&&$.classList.add("selecting")}function B(){const $=C.current;$&&$.classList.remove("selecting")}const H=re.useMemo(()=>c.getViewport({scale:m,rotation:p}),[c,p,m]);return re.useLayoutEffect(function(){if(!c||!_)return;const{current:W}=C;if(!W)return;W.innerHTML="";const Q=c.streamTextContent({includeMarkedContent:!0}),ne={container:W,textContentSource:Q,viewport:H},te=new LS(ne),xe=te;return te.render().then(()=>{const fe=document.createElement("div");fe.className="endOfContent",W.append(fe);const he=W.querySelectorAll('[role="presentation"]');if(e){let we=0;_.items.forEach((ge,K)=>{if(!Fk(ge))return;const U=he[we];if(!U)return;const oe=e(Object.assign({pageIndex:u,pageNumber:d,itemIndex:K},ge));U.innerHTML=oe,we+=ge.str&&ge.hasEOL?2:1})}I()}).catch(F),()=>Aa(xe)},[e,F,I,c,u,d,_,H]),z.jsx("div",{className:lp("react-pdf__Page__textContent","textLayer"),onMouseUp:B,onMouseDown:N,ref:C})}function Ok(){const f=zS(),e=hp();Qe(e);const t=Object.assign(Object.assign({},f),e),{imageResourcesPath:i,linkService:r,onGetAnnotationsError:a,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:p,pdf:m,renderForms:y,rotate:w,scale:_=1}=t;Qe(m),Qe(p),Qe(r);const[b,C]=ac(),{value:P,error:k}=b,I=re.useRef(null);on(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function F(){P&&c&&c(P)}function N(){k&&(on(!1,k.toString()),a&&a(k))}re.useEffect(function(){C({type:"RESET"})},[C,p]),re.useEffect(function(){if(!p)return;const Q=Fh(p.getAnnotations()),ne=Q;return Q.promise.then(te=>{C({type:"RESOLVE",value:te})}).catch(te=>{C({type:"REJECT",error:te})}),()=>{Aa(ne)}},[C,p]),re.useEffect(()=>{if(P!==void 0){if(P===!1){N();return}F()}},[P]);function B(){d&&d()}function H(W){on(!1,`${W}`),u&&u(W)}const $=re.useMemo(()=>p.getViewport({scale:_,rotation:w}),[p,w,_]);return re.useEffect(function(){if(!m||!p||!r||!P)return;const{current:Q}=I;if(!Q)return;const ne=$.clone({dontFlip:!0}),te={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:Q,l10n:null,page:p,structTreeLayer:null,viewport:ne},xe={annotations:P,annotationStorage:m.annotationStorage,div:Q,imageResourcesPath:i,linkService:r,page:p,renderForms:y,viewport:ne};Q.innerHTML="";try{new PS(te).render(xe),B()}catch(fe){H(fe)}return()=>{}},[P,i,r,p,m,y,$]),z.jsx("div",{className:lp("react-pdf__Page__annotations","annotationLayer"),ref:I})}var jk=function(f,e){var t={};for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&e.indexOf(i)<0&&(t[i]=f[i]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(f);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(f,i[r])&&(t[i[r]]=f[i[r]]);return t};const SA=1;function zk(f){const e=zS(),t=Object.assign(Object.assign({},e),f),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:a,canvasRef:c,children:u,className:d,customRenderer:p,customTextRenderer:m,devicePixelRatio:y,error:w="Failed to load the page.",height:_,inputRef:b,loading:C="Loading page",noData:P="No page specified.",onGetAnnotationsError:k,onGetAnnotationsSuccess:I,onGetStructTreeError:F,onGetStructTreeSuccess:N,onGetTextError:B,onGetTextSuccess:H,onLoadError:$,onLoadSuccess:W,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:ne,onRenderError:te,onRenderSuccess:xe,onRenderTextLayerError:fe,onRenderTextLayerSuccess:he,pageIndex:we,pageNumber:ge,pdf:K,registerPage:U,renderAnnotationLayer:oe=!0,renderForms:J=!1,renderMode:M="canvas",renderTextLayer:V=!0,rotate:le,scale:Ae=SA,unregisterPage:ke,width:ve}=t,me=jk(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Le,Oe]=ac(),{value:Ne,error:Mi}=Le,Ks=re.useRef(null);Qe(K);const Ue=po(ge)?ge-1:we??null,it=ge??(po(we)?we+1:null),Et=le??(Ne?Ne.rotate:null),gt=re.useMemo(()=>{if(!Ne)return null;let Ni=1;const rs=Ae??SA;if(ve||_){const Zr=Ne.getViewport({scale:1,rotation:Et});ve?Ni=ve/Zr.width:_&&(Ni=_/Zr.height)}return rs*Ni},[_,Ne,Et,Ae,ve]);re.useEffect(function(){return()=>{po(Ue)&&r&&ke&&ke(Ue)}},[r,K,Ue,ke]);function Ii(){if(W){if(!Ne||!gt)return;W(Iv(Ne,gt))}if(r&&U){if(!po(Ue)||!Ks.current)return;U(Ue,Ks.current)}}function Qs(){Mi&&(on(!1,Mi.toString()),$&&$(Mi))}re.useEffect(function(){Oe({type:"RESET"})},[Oe,K,Ue]),re.useEffect(function(){if(!K||!it)return;const rs=Fh(K.getPage(it)),Zr=rs;return rs.promise.then(os=>{Oe({type:"RESOLVE",value:os})}).catch(os=>{Oe({type:"REJECT",error:os})}),()=>Aa(Zr)},[Oe,K,it]),re.useEffect(()=>{if(Ne!==void 0){if(Ne===!1){Qs();return}Ii()}},[Ne,gt]);const lc=re.useMemo(()=>Ne&&po(Ue)&&it&&po(Et)&&po(gt)?{_className:i,canvasBackground:a,customTextRenderer:m,devicePixelRatio:y,onGetAnnotationsError:k,onGetAnnotationsSuccess:I,onGetStructTreeError:F,onGetStructTreeSuccess:N,onGetTextError:B,onGetTextSuccess:H,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:ne,onRenderError:te,onRenderSuccess:xe,onRenderTextLayerError:fe,onRenderTextLayerSuccess:he,page:Ne,pageIndex:Ue,pageNumber:it,renderForms:J,renderTextLayer:V,rotate:Et,scale:gt}:null,[i,a,m,y,k,I,F,N,B,H,Q,ne,te,xe,fe,he,Ne,Ue,it,J,V,Et,gt]),Jr=re.useMemo(()=>NS(me,()=>Ne&&(gt?Iv(Ne,gt):void 0)),[me,Ne,gt]),li=`${Ue}@${gt}/${Et}`;function cc(){switch(M){case"custom":return Qe(p),z.jsx(p,{},`${li}_custom`);case"none":return null;case"canvas":default:return z.jsx(Nk,{canvasRef:c},`${li}_canvas`)}}function Dh(){return V?z.jsx(Dk,{},`${li}_text`):null}function Oh(){return oe?z.jsx(Ok,{},`${li}_annotations`):null}function jh(){return z.jsxs(BS.Provider,{value:lc,children:[cc(),Dh(),Oh(),u]})}function zh(){return it?K===null||Ne===void 0||Ne===null?z.jsx(ll,{type:"loading",children:typeof C=="function"?C():C}):K===!1||Ne===!1?z.jsx(ll,{type:"error",children:typeof w=="function"?w():w}):jh():z.jsx(ll,{type:"no-data",children:typeof P=="function"?P():P})}return z.jsx("div",Object.assign({className:lp(i,d),"data-page-number":it,ref:HS(b,Ks),style:{"--scale-factor":`${gt}`,backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Jr,{children:zh()}))}_k();qv.workerSrc="pdf.worker.mjs";const fm="/portfolio/assets/TimTsenguun_Resume_DataEngineer-JvlmS5R2.pdf";qv.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${IS}/pdf.worker.min.js`;const Hk=()=>{const[f,e]=re.useState(window.innerWidth);re.useEffect(()=>{const i=()=>e(window.innerWidth);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const t=i=>console.error("Error loading PDF:",i);return z.jsx("section",{id:"resume",className:"min-h-screen flex items-top justify-center py-30",children:z.jsx(Zf,{children:z.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[z.jsx("h2",{className:"text-3xl md:text-3xl font-bold mb-6 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent leading-normal",children:"Resume"}),z.jsx("div",{className:"flex justify-center mb-6",children:z.jsxs("a",{href:fm,target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] text-white font-semibold py-2 px-6 rounded-full shadow-md hover:shadow-lg hover:scale-105 transform transition duration-300 flex items-center justify-center",children:[z.jsx("svg",{className:"mr-2",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:z.jsx("path",{d:"M19 9H15V3H9V9H5L12 16L19 9ZM5 18V20H19V18H5Z",fill:"white"})}),"Download"]})}),z.jsx("div",{className:"flex justify-center",children:z.jsx("div",{className:"box_transition",children:z.jsx(Tk,{file:fm,onLoadError:t,children:z.jsx(zk,{pageNumber:1,scale:f>786?1.7:.6})})})}),z.jsx("div",{className:"flex justify-center mb-6",children:z.jsxs("a",{href:fm,target:"_blank",rel:"noopener noreferrer",className:"mt-6 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] text-white font-semibold py-2 px-6 rounded-full shadow-md hover:shadow-lg hover:scale-105 transform transition duration-300 flex items-center justify-center",children:[z.jsx("svg",{className:"mr-2",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:z.jsx("path",{d:"M19 9H15V3H9V9H5L12 16L19 9ZM5 18V20H19V18H5Z",fill:"white"})}),"Download"]})})]})})})};function Bk(){const[f,e]=re.useState(!1),[t,i]=re.useState(!1);return z.jsxs(z.Fragment,{children:[!f&&z.jsx(eb,{onComplete:()=>e(!0)})," "," ",z.jsxs("div",{className:`min-h-screen transition-opacity duration-700 ${f?"opacity-100":"opacity-0"} text-gray-100`,children:[z.jsx(tb,{menuOpen:t,setMenuOpen:i}),z.jsx(nb,{menuOpen:t,setMenuOpen:i}),z.jsx(ib,{}),z.jsx(sb,{}),z.jsx(rb,{}),z.jsx(Hk,{})]})]})}ZE.createRoot(document.getElementById("root")).render(z.jsx(re.StrictMode,{children:z.jsx(Bk,{})}));
